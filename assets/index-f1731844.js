function cs(a,s){for(var t=0;t<s.length;t++){const e=s[t];if(typeof e!="string"&&!Array.isArray(e)){for(const i in e)if(i!=="default"&&!(i in a)){const r=Object.getOwnPropertyDescriptor(e,i);r&&Object.defineProperty(a,i,r.get?r:{enumerable:!0,get:()=>e[i]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}var at={};Object.defineProperty(at,"__esModule",{value:!0});const Pe={sourceType:"script",sourceFilename:void 0,startColumn:0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowNewTargetOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createParenthesizedExpressions:!1,errorRecovery:!1,attachComment:!0,annexB:!0};function us(a){if(a&&a.annexB!=null&&a.annexB!==!1)throw new Error("The `annexB` option can only be set to `false`.");const s={};for(const t of Object.keys(Pe))s[t]=a&&a[t]!=null?a[t]:Pe[t];return s}class ut{constructor(s,t){this.token=void 0,this.preserveSpace=void 0,this.token=s,this.preserveSpace=!!t}}const C={brace:new ut("{"),j_oTag:new ut("<tag"),j_cTag:new ut("</tag"),j_expr:new ut("<tag>...</tag>",!0)};C.template=new ut("`",!0);const T=!0,f=!0,Rt=!0,ot=!0,j=!0,ps=!0;class Fe{constructor(s,t={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=s,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.rightAssociative=!!t.rightAssociative,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop!=null?t.binop:null,this.updateContext=null}}const Zt=new Map;function A(a,s={}){s.keyword=a;const t=x(a,s);return Zt.set(a,t),t}function v(a,s){return x(a,{beforeExpr:T,binop:s})}let dt=-1;const F=[],te=[],ee=[],se=[],ie=[],re=[];function x(a,s={}){var t,e,i,r;return++dt,te.push(a),ee.push((t=s.binop)!=null?t:-1),se.push((e=s.beforeExpr)!=null?e:!1),ie.push((i=s.startsExpr)!=null?i:!1),re.push((r=s.prefix)!=null?r:!1),F.push(new Fe(a,s)),dt}function b(a,s={}){var t,e,i,r;return++dt,Zt.set(a,dt),te.push(a),ee.push((t=s.binop)!=null?t:-1),se.push((e=s.beforeExpr)!=null?e:!1),ie.push((i=s.startsExpr)!=null?i:!1),re.push((r=s.prefix)!=null?r:!1),F.push(new Fe("name",s)),dt}const ds={bracketL:x("[",{beforeExpr:T,startsExpr:f}),bracketHashL:x("#[",{beforeExpr:T,startsExpr:f}),bracketBarL:x("[|",{beforeExpr:T,startsExpr:f}),bracketR:x("]"),bracketBarR:x("|]"),braceL:x("{",{beforeExpr:T,startsExpr:f}),braceBarL:x("{|",{beforeExpr:T,startsExpr:f}),braceHashL:x("#{",{beforeExpr:T,startsExpr:f}),braceR:x("}"),braceBarR:x("|}"),parenL:x("(",{beforeExpr:T,startsExpr:f}),parenR:x(")"),comma:x(",",{beforeExpr:T}),semi:x(";",{beforeExpr:T}),colon:x(":",{beforeExpr:T}),doubleColon:x("::",{beforeExpr:T}),dot:x("."),question:x("?",{beforeExpr:T}),questionDot:x("?."),arrow:x("=>",{beforeExpr:T}),template:x("template"),ellipsis:x("...",{beforeExpr:T}),backQuote:x("`",{startsExpr:f}),dollarBraceL:x("${",{beforeExpr:T,startsExpr:f}),templateTail:x("...`",{startsExpr:f}),templateNonTail:x("...${",{beforeExpr:T,startsExpr:f}),at:x("@"),hash:x("#",{startsExpr:f}),interpreterDirective:x("#!..."),eq:x("=",{beforeExpr:T,isAssign:ot}),assign:x("_=",{beforeExpr:T,isAssign:ot}),slashAssign:x("_=",{beforeExpr:T,isAssign:ot}),xorAssign:x("_=",{beforeExpr:T,isAssign:ot}),moduloAssign:x("_=",{beforeExpr:T,isAssign:ot}),incDec:x("++/--",{prefix:j,postfix:ps,startsExpr:f}),bang:x("!",{beforeExpr:T,prefix:j,startsExpr:f}),tilde:x("~",{beforeExpr:T,prefix:j,startsExpr:f}),doubleCaret:x("^^",{startsExpr:f}),doubleAt:x("@@",{startsExpr:f}),pipeline:v("|>",0),nullishCoalescing:v("??",1),logicalOR:v("||",1),logicalAND:v("&&",2),bitwiseOR:v("|",3),bitwiseXOR:v("^",4),bitwiseAND:v("&",5),equality:v("==/!=/===/!==",6),lt:v("</>/<=/>=",7),gt:v("</>/<=/>=",7),relational:v("</>/<=/>=",7),bitShift:v("<</>>/>>>",8),bitShiftL:v("<</>>/>>>",8),bitShiftR:v("<</>>/>>>",8),plusMin:x("+/-",{beforeExpr:T,binop:9,prefix:j,startsExpr:f}),modulo:x("%",{binop:10,startsExpr:f}),star:x("*",{binop:10}),slash:v("/",10),exponent:x("**",{beforeExpr:T,binop:11,rightAssociative:!0}),_in:A("in",{beforeExpr:T,binop:7}),_instanceof:A("instanceof",{beforeExpr:T,binop:7}),_break:A("break"),_case:A("case",{beforeExpr:T}),_catch:A("catch"),_continue:A("continue"),_debugger:A("debugger"),_default:A("default",{beforeExpr:T}),_else:A("else",{beforeExpr:T}),_finally:A("finally"),_function:A("function",{startsExpr:f}),_if:A("if"),_return:A("return",{beforeExpr:T}),_switch:A("switch"),_throw:A("throw",{beforeExpr:T,prefix:j,startsExpr:f}),_try:A("try"),_var:A("var"),_const:A("const"),_with:A("with"),_new:A("new",{beforeExpr:T,startsExpr:f}),_this:A("this",{startsExpr:f}),_super:A("super",{startsExpr:f}),_class:A("class",{startsExpr:f}),_extends:A("extends",{beforeExpr:T}),_export:A("export"),_import:A("import",{startsExpr:f}),_null:A("null",{startsExpr:f}),_true:A("true",{startsExpr:f}),_false:A("false",{startsExpr:f}),_typeof:A("typeof",{beforeExpr:T,prefix:j,startsExpr:f}),_void:A("void",{beforeExpr:T,prefix:j,startsExpr:f}),_delete:A("delete",{beforeExpr:T,prefix:j,startsExpr:f}),_do:A("do",{isLoop:Rt,beforeExpr:T}),_for:A("for",{isLoop:Rt}),_while:A("while",{isLoop:Rt}),_as:b("as",{startsExpr:f}),_assert:b("assert",{startsExpr:f}),_async:b("async",{startsExpr:f}),_await:b("await",{startsExpr:f}),_from:b("from",{startsExpr:f}),_get:b("get",{startsExpr:f}),_let:b("let",{startsExpr:f}),_meta:b("meta",{startsExpr:f}),_of:b("of",{startsExpr:f}),_sent:b("sent",{startsExpr:f}),_set:b("set",{startsExpr:f}),_static:b("static",{startsExpr:f}),_using:b("using",{startsExpr:f}),_yield:b("yield",{startsExpr:f}),_asserts:b("asserts",{startsExpr:f}),_checks:b("checks",{startsExpr:f}),_exports:b("exports",{startsExpr:f}),_global:b("global",{startsExpr:f}),_implements:b("implements",{startsExpr:f}),_intrinsic:b("intrinsic",{startsExpr:f}),_infer:b("infer",{startsExpr:f}),_is:b("is",{startsExpr:f}),_mixins:b("mixins",{startsExpr:f}),_proto:b("proto",{startsExpr:f}),_require:b("require",{startsExpr:f}),_satisfies:b("satisfies",{startsExpr:f}),_keyof:b("keyof",{startsExpr:f}),_readonly:b("readonly",{startsExpr:f}),_unique:b("unique",{startsExpr:f}),_abstract:b("abstract",{startsExpr:f}),_declare:b("declare",{startsExpr:f}),_enum:b("enum",{startsExpr:f}),_module:b("module",{startsExpr:f}),_namespace:b("namespace",{startsExpr:f}),_interface:b("interface",{startsExpr:f}),_type:b("type",{startsExpr:f}),_opaque:b("opaque",{startsExpr:f}),name:x("name",{startsExpr:f}),string:x("string",{startsExpr:f}),num:x("num",{startsExpr:f}),bigint:x("bigint",{startsExpr:f}),decimal:x("decimal",{startsExpr:f}),regexp:x("regexp",{startsExpr:f}),privateName:x("#name",{startsExpr:f}),eof:x("eof"),jsxName:x("jsxName"),jsxText:x("jsxText",{beforeExpr:!0}),jsxTagStart:x("jsxTagStart",{startsExpr:!0}),jsxTagEnd:x("jsxTagEnd"),placeholder:x("%%",{startsExpr:!0})};function S(a){return a>=93&&a<=130}function fs(a){return a<=92}function D(a){return a>=58&&a<=130}function Be(a){return a>=58&&a<=134}function ms(a){return se[a]}function qt(a){return ie[a]}function ys(a){return a>=29&&a<=33}function ge(a){return a>=127&&a<=129}function xs(a){return a>=90&&a<=92}function ae(a){return a>=58&&a<=92}function Ps(a){return a>=39&&a<=59}function gs(a){return a===34}function Ts(a){return re[a]}function bs(a){return a>=119&&a<=121}function As(a){return a>=122&&a<=128}function $(a){return te[a]}function bt(a){return ee[a]}function Ss(a){return a===57}function wt(a){return a>=24&&a<=25}function O(a){return F[a]}F[8].updateContext=a=>{a.pop()},F[5].updateContext=F[7].updateContext=F[23].updateContext=a=>{a.push(C.brace)},F[22].updateContext=a=>{a[a.length-1]===C.template?a.pop():a.push(C.template)},F[140].updateContext=a=>{a.push(C.j_expr,C.j_oTag)};function It(a,s){if(a==null)return{};var t={},e=Object.keys(a),i,r;for(r=0;r<e.length;r++)i=e[r],!(s.indexOf(i)>=0)&&(t[i]=a[i]);return t}class q{constructor(s,t,e){this.line=void 0,this.column=void 0,this.index=void 0,this.line=s,this.column=t,this.index=e}}class Nt{constructor(s,t){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=s,this.end=t}}function L(a,s){const{line:t,column:e,index:i}=a;return new q(t,e+s,i+s)}var Kt={SyntaxError:"BABEL_PARSER_SYNTAX_ERROR",SourceTypeModuleError:"BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED"};const Cs=(a,s=a.length-1)=>({get(){return a.reduce((t,e)=>t[e],this)},set(t){a.reduce((e,i,r)=>r===s?e[i]=t:e[i],this)}}),Es=(a,s,t)=>Object.keys(t).map(e=>[e,t[e]]).filter(([,e])=>!!e).map(([e,i])=>[e,typeof i=="function"?{value:i,enumerable:!1}:typeof i.reflect=="string"?Object.assign({},i,Cs(i.reflect.split("."))):i]).reduce((e,[i,r])=>Object.defineProperty(e,i,Object.assign({configurable:!0},r)),Object.assign(new a,s));var ws={ImportMetaOutsideModule:{message:`import.meta may appear only with 'sourceType: "module"'`,code:Kt.SourceTypeModuleError},ImportOutsideModule:{message:`'import' and 'export' may appear only with 'sourceType: "module"'`,code:Kt.SourceTypeModuleError}};const Te={ArrayPattern:"array destructuring pattern",AssignmentExpression:"assignment expression",AssignmentPattern:"assignment expression",ArrowFunctionExpression:"arrow function expression",ConditionalExpression:"conditional expression",CatchClause:"catch clause",ForOfStatement:"for-of statement",ForInStatement:"for-in statement",ForStatement:"for-loop",FormalParameters:"function parameter list",Identifier:"identifier",ImportSpecifier:"import specifier",ImportDefaultSpecifier:"import default specifier",ImportNamespaceSpecifier:"import namespace specifier",ObjectPattern:"object destructuring pattern",ParenthesizedExpression:"parenthesized expression",RestElement:"rest element",UpdateExpression:{true:"prefix operation",false:"postfix operation"},VariableDeclarator:"variable declaration",YieldExpression:"yield expression"},Wt=({type:a,prefix:s})=>a==="UpdateExpression"?Te.UpdateExpression[String(s)]:Te[a];var Is={AccessorIsGenerator:({kind:a})=>`A ${a}ter cannot be a generator.`,ArgumentsInClass:"'arguments' is only allowed in functions and class methods.",AsyncFunctionInSingleStatementContext:"Async functions can only be declared at the top level or inside a block.",AwaitBindingIdentifier:"Can not use 'await' as identifier inside an async function.",AwaitBindingIdentifierInStaticBlock:"Can not use 'await' as identifier inside a static block.",AwaitExpressionFormalParameter:"'await' is not allowed in async function parameters.",AwaitNotInAsyncContext:"'await' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncFunction:"'await' is only allowed within async functions.",BadGetterArity:"A 'get' accessor must not have any formal parameters.",BadSetterArity:"A 'set' accessor must have exactly one formal parameter.",BadSetterRestParameter:"A 'set' accessor function argument must not be a rest parameter.",ConstructorClassField:"Classes may not have a field named 'constructor'.",ConstructorClassPrivateField:"Classes may not have a private field named '#constructor'.",ConstructorIsAccessor:"Class constructor may not be an accessor.",ConstructorIsAsync:"Constructor can't be an async function.",ConstructorIsGenerator:"Constructor can't be a generator.",DeclarationMissingInitializer:({kind:a})=>`Missing initializer in ${a} declaration.`,DecoratorArgumentsOutsideParentheses:"Decorator arguments must be moved inside parentheses: use '@(decorator(args))' instead of '@(decorator)(args)'.",DecoratorBeforeExport:"Decorators must be placed *before* the 'export' keyword. Remove the 'decoratorsBeforeExport: true' option to use the 'export @decorator class {}' syntax.",DecoratorsBeforeAfterExport:"Decorators can be placed *either* before or after the 'export' keyword, but not in both locations at the same time.",DecoratorConstructor:"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?",DecoratorExportClass:"Decorators must be placed *after* the 'export' keyword. Remove the 'decoratorsBeforeExport: false' option to use the '@decorator export class {}' syntax.",DecoratorSemicolon:"Decorators must not be followed by a semicolon.",DecoratorStaticBlock:"Decorators can't be used with a static block.",DeletePrivateField:"Deleting a private field is not allowed.",DestructureNamedImport:"ES2015 named imports do not destructure. Use another statement for destructuring after the import.",DuplicateConstructor:"Duplicate constructor in the same class.",DuplicateDefaultExport:"Only one default export allowed per module.",DuplicateExport:({exportName:a})=>`\`${a}\` has already been exported. Exported identifiers must be unique.`,DuplicateProto:"Redefinition of __proto__ property.",DuplicateRegExpFlags:"Duplicate regular expression flag.",ElementAfterRest:"Rest element must be last element.",EscapedCharNotAnIdentifier:"Invalid Unicode escape.",ExportBindingIsString:({localName:a,exportName:s})=>`A string literal cannot be used as an exported binding without \`from\`.
- Did you mean \`export { '${a}' as '${s}' } from 'some-module'\`?`,ExportDefaultFromAsIdentifier:"'from' is not allowed as an identifier after 'export default'.",ForInOfLoopInitializer:({type:a})=>`'${a==="ForInStatement"?"for-in":"for-of"}' loop variable declaration may not have an initializer.`,ForInUsing:"For-in loop may not start with 'using' declaration.",ForOfAsync:"The left-hand side of a for-of loop may not be 'async'.",ForOfLet:"The left-hand side of a for-of loop may not start with 'let'.",GeneratorInSingleStatementContext:"Generators can only be declared at the top level or inside a block.",IllegalBreakContinue:({type:a})=>`Unsyntactic ${a==="BreakStatement"?"break":"continue"}.`,IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list.",IllegalReturn:"'return' outside of function.",ImportBindingIsString:({importName:a})=>`A string literal cannot be used as an imported binding.
- Did you mean \`import { "${a}" as foo }\`?`,ImportCallArgumentTrailingComma:"Trailing comma is disallowed inside import(...) arguments.",ImportCallArity:({maxArgumentCount:a})=>`\`import()\` requires exactly ${a===1?"one argument":"one or two arguments"}.`,ImportCallNotNewExpression:"Cannot use new with import(...).",ImportCallSpreadArgument:"`...` is not allowed in `import()`.",ImportJSONBindingNotDefault:"A JSON module can only be imported with `default`.",ImportReflectionHasAssertion:"`import module x` cannot have assertions.",ImportReflectionNotBinding:'Only `import module x from "./module"` is valid.',IncompatibleRegExpUVFlags:"The 'u' and 'v' regular expression flags cannot be enabled at the same time.",InvalidBigIntLiteral:"Invalid BigIntLiteral.",InvalidCodePoint:"Code point out of bounds.",InvalidCoverInitializedName:"Invalid shorthand property initializer.",InvalidDecimal:"Invalid decimal.",InvalidDigit:({radix:a})=>`Expected number in radix ${a}.`,InvalidEscapeSequence:"Bad character escape sequence.",InvalidEscapeSequenceTemplate:"Invalid escape sequence in template.",InvalidEscapedReservedWord:({reservedWord:a})=>`Escape sequence in keyword ${a}.`,InvalidIdentifier:({identifierName:a})=>`Invalid identifier ${a}.`,InvalidLhs:({ancestor:a})=>`Invalid left-hand side in ${Wt(a)}.`,InvalidLhsBinding:({ancestor:a})=>`Binding invalid left-hand side in ${Wt(a)}.`,InvalidNumber:"Invalid number.",InvalidOrMissingExponent:"Floating-point numbers require a valid exponent after the 'e'.",InvalidOrUnexpectedToken:({unexpected:a})=>`Unexpected character '${a}'.`,InvalidParenthesizedAssignment:"Invalid parenthesized assignment pattern.",InvalidPrivateFieldResolution:({identifierName:a})=>`Private name #${a} is not defined.`,InvalidPropertyBindingPattern:"Binding member expression.",InvalidRecordProperty:"Only properties and spread elements are allowed in record definitions.",InvalidRestAssignmentPattern:"Invalid rest operator's argument.",LabelRedeclaration:({labelName:a})=>`Label '${a}' is already declared.`,LetInLexicalBinding:"'let' is not allowed to be used as a name in 'let' or 'const' declarations.",LineTerminatorBeforeArrow:"No line break is allowed before '=>'.",MalformedRegExpFlags:"Invalid regular expression flag.",MissingClassName:"A class name is required.",MissingEqInAssignment:"Only '=' operator can be used for specifying default value.",MissingSemicolon:"Missing semicolon.",MissingPlugin:({missingPlugin:a})=>`This experimental syntax requires enabling the parser plugin: ${a.map(s=>JSON.stringify(s)).join(", ")}.`,MissingOneOfPlugins:({missingPlugin:a})=>`This experimental syntax requires enabling one of the following parser plugin(s): ${a.map(s=>JSON.stringify(s)).join(", ")}.`,MissingUnicodeEscape:"Expecting Unicode escape sequence \\uXXXX.",MixingCoalesceWithLogical:"Nullish coalescing operator(??) requires parens when mixing with logical operators.",ModuleAttributeDifferentFromType:"The only accepted module attribute is `type`.",ModuleAttributeInvalidValue:"Only string literals are allowed as module attribute values.",ModuleAttributesWithDuplicateKeys:({key:a})=>`Duplicate key "${a}" is not allowed in module attributes.`,ModuleExportNameHasLoneSurrogate:({surrogateCharCode:a})=>`An export name cannot include a lone surrogate, found '\\u${a.toString(16)}'.`,ModuleExportUndefined:({localName:a})=>`Export '${a}' is not defined.`,MultipleDefaultsInSwitch:"Multiple default clauses.",NewlineAfterThrow:"Illegal newline after throw.",NoCatchOrFinally:"Missing catch or finally clause.",NumberIdentifier:"Identifier directly after number.",NumericSeparatorInEscapeSequence:"Numeric separators are not allowed inside unicode escape sequences or hex escape sequences.",ObsoleteAwaitStar:"'await*' has been removed from the async functions proposal. Use Promise.all() instead.",OptionalChainingNoNew:"Constructors in/after an Optional Chain are not allowed.",OptionalChainingNoTemplate:"Tagged Template Literals are not allowed in optionalChain.",OverrideOnConstructor:"'override' modifier cannot appear on a constructor declaration.",ParamDupe:"Argument name clash.",PatternHasAccessor:"Object pattern can't contain getter or setter.",PatternHasMethod:"Object pattern can't contain methods.",PrivateInExpectedIn:({identifierName:a})=>`Private names are only allowed in property accesses (\`obj.#${a}\`) or in \`in\` expressions (\`#${a} in obj\`).`,PrivateNameRedeclaration:({identifierName:a})=>`Duplicate private name #${a}.`,RecordExpressionBarIncorrectEndSyntaxType:"Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionBarIncorrectStartSyntaxType:"Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionHashIncorrectStartSyntaxType:"Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",RecordNoProto:"'__proto__' is not allowed in Record expressions.",RestTrailingComma:"Unexpected trailing comma after rest element.",SloppyFunction:"In non-strict mode code, functions can only be declared at top level or inside a block.",SloppyFunctionAnnexB:"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement.",StaticPrototype:"Classes may not have static property named prototype.",SuperNotAllowed:"`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?",SuperPrivateField:"Private fields can't be accessed on super.",TrailingDecorator:"Decorators must be attached to a class element.",TupleExpressionBarIncorrectEndSyntaxType:"Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionBarIncorrectStartSyntaxType:"Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionHashIncorrectStartSyntaxType:"Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",UnexpectedArgumentPlaceholder:"Unexpected argument placeholder.",UnexpectedAwaitAfterPipelineBody:'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.',UnexpectedDigitAfterHash:"Unexpected digit after hash token.",UnexpectedImportExport:"'import' and 'export' may only appear at the top level.",UnexpectedKeyword:({keyword:a})=>`Unexpected keyword '${a}'.`,UnexpectedLeadingDecorator:"Leading decorators must be attached to a class declaration.",UnexpectedLexicalDeclaration:"Lexical declaration cannot appear in a single-statement context.",UnexpectedNewTarget:"`new.target` can only be used in functions or class properties.",UnexpectedNumericSeparator:"A numeric separator is only allowed between two digits.",UnexpectedPrivateField:"Unexpected private name.",UnexpectedReservedWord:({reservedWord:a})=>`Unexpected reserved word '${a}'.`,UnexpectedSuper:"'super' is only allowed in object methods and classes.",UnexpectedToken:({expected:a,unexpected:s})=>`Unexpected token${s?` '${s}'.`:""}${a?`, expected "${a}"`:""}`,UnexpectedTokenUnaryExponentiation:"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.",UnexpectedUsingDeclaration:"Using declaration cannot appear in the top level when source type is `script`.",UnsupportedBind:"Binding should be performed on object property.",UnsupportedDecoratorExport:"A decorated export must export a class declaration.",UnsupportedDefaultExport:"Only expressions, functions or classes are allowed as the `default` export.",UnsupportedImport:"`import` can only be used in `import()` or `import.meta`.",UnsupportedMetaProperty:({target:a,onlyValidPropertyName:s})=>`The only valid meta property for ${a} is ${a}.${s}.`,UnsupportedParameterDecorator:"Decorators cannot be used to decorate parameters.",UnsupportedPropertyDecorator:"Decorators cannot be used to decorate object literal properties.",UnsupportedSuper:"'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop]).",UnterminatedComment:"Unterminated comment.",UnterminatedRegExp:"Unterminated regular expression.",UnterminatedString:"Unterminated string constant.",UnterminatedTemplate:"Unterminated template.",UsingDeclarationHasBindingPattern:"Using declaration cannot have destructuring patterns.",VarRedeclaration:({identifierName:a})=>`Identifier '${a}' has already been declared.`,YieldBindingIdentifier:"Can not use 'yield' as identifier inside a generator.",YieldInParameter:"Yield expression is not allowed in formal parameters.",ZeroDigitNumericSeparator:"Numeric separator can not be used after leading 0."},Ns={StrictDelete:"Deleting local variable in strict mode.",StrictEvalArguments:({referenceName:a})=>`Assigning to '${a}' in strict mode.`,StrictEvalArgumentsBinding:({bindingName:a})=>`Binding '${a}' in strict mode.`,StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block.",StrictNumericEscape:"The only valid numeric escape in strict mode is '\\0'.",StrictOctalLiteral:"Legacy octal literals are not allowed in strict mode.",StrictWith:"'with' in strict mode."};const ks=new Set(["ArrowFunctionExpression","AssignmentExpression","ConditionalExpression","YieldExpression"]);var vs={PipeBodyIsTighter:"Unexpected yield after pipeline body; any yield expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence.",PipeTopicRequiresHackPipes:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PipeTopicUnbound:"Topic reference is unbound; it must be inside a pipe body.",PipeTopicUnconfiguredToken:({token:a})=>`Invalid topic token ${a}. In order to use ${a} as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "${a}" }.`,PipeTopicUnused:"Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once.",PipeUnparenthesizedBody:({type:a})=>`Hack-style pipe body cannot be an unparenthesized ${Wt({type:a})}; please wrap it in parentheses.`,PipelineBodyNoArrow:'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.',PipelineBodySequenceExpression:"Pipeline body may not be a comma-separated sequence expression.",PipelineHeadSequenceExpression:"Pipeline head should not be a comma-separated sequence expression.",PipelineTopicUnused:"Pipeline is in topic style but does not use topic reference.",PrimaryTopicNotAllowed:"Topic reference was used in a lexical context without topic binding.",PrimaryTopicRequiresSmartPipeline:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.'};const Ls=["toMessage"],Ds=["message"];function Ms(a){let{toMessage:s}=a,t=It(a,Ls);return function e({loc:i,details:r}){return Es(SyntaxError,Object.assign({},t,{loc:i}),{clone(n={}){const o=n.loc||{};return e({loc:new q("line"in o?o.line:this.loc.line,"column"in o?o.column:this.loc.column,"index"in o?o.index:this.loc.index),details:Object.assign({},this.details,n.details)})},details:{value:r,enumerable:!1},message:{get(){return`${s(this.details)} (${this.loc.line}:${this.loc.column})`},set(n){Object.defineProperty(this,"message",{value:n})}},pos:{reflect:"loc.index",enumerable:!0},missingPlugin:"missingPlugin"in r&&{reflect:"details.missingPlugin",enumerable:!0}})}}function _(a,s){if(Array.isArray(a))return e=>_(e,a[0]);const t={};for(const e of Object.keys(a)){const i=a[e],r=typeof i=="string"?{message:()=>i}:typeof i=="function"?{message:i}:i,{message:n}=r,o=It(r,Ds),h=typeof n=="string"?()=>n:n;t[e]=Ms(Object.assign({code:Kt.SyntaxError,reasonCode:e,toMessage:h},s?{syntaxPlugin:s}:{},o))}return t}const u=Object.assign({},_(ws),_(Is),_(Ns),_`pipelineOperator`(vs)),{defineProperty:Os}=Object,be=(a,s)=>Os(a,s,{enumerable:!1,value:a[s]});function ht(a){return a.loc.start&&be(a.loc.start,"index"),a.loc.end&&be(a.loc.end,"index"),a}var Fs=a=>class extends a{parse(){const t=ht(super.parse());return this.options.tokens&&(t.tokens=t.tokens.map(ht)),t}parseRegExpLiteral({pattern:t,flags:e}){let i=null;try{i=new RegExp(t,e)}catch{}const r=this.estreeParseLiteral(i);return r.regex={pattern:t,flags:e},r}parseBigIntLiteral(t){let e;try{e=BigInt(t)}catch{e=null}const i=this.estreeParseLiteral(e);return i.bigint=String(i.value||t),i}parseDecimalLiteral(t){const i=this.estreeParseLiteral(null);return i.decimal=String(i.value||t),i}estreeParseLiteral(t){return this.parseLiteral(t,"Literal")}parseStringLiteral(t){return this.estreeParseLiteral(t)}parseNumericLiteral(t){return this.estreeParseLiteral(t)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(t){return this.estreeParseLiteral(t)}directiveToStmt(t){const e=t.value;delete t.value,e.type="Literal",e.raw=e.extra.raw,e.value=e.extra.expressionValue;const i=t;return i.type="ExpressionStatement",i.expression=e,i.directive=e.extra.rawValue,delete e.extra,i}initFunction(t,e){super.initFunction(t,e),t.expression=!1}checkDeclaration(t){t!=null&&this.isObjectProperty(t)?this.checkDeclaration(t.value):super.checkDeclaration(t)}getObjectOrClassMethodParams(t){return t.value.params}isValidDirective(t){var e;return t.type==="ExpressionStatement"&&t.expression.type==="Literal"&&typeof t.expression.value=="string"&&!((e=t.expression.extra)!=null&&e.parenthesized)}parseBlockBody(t,e,i,r,n){super.parseBlockBody(t,e,i,r,n);const o=t.directives.map(h=>this.directiveToStmt(h));t.body=o.concat(t.body),delete t.directives}pushClassMethod(t,e,i,r,n,o){this.parseMethod(e,i,r,n,o,"ClassMethod",!0),e.typeParameters&&(e.value.typeParameters=e.typeParameters,delete e.typeParameters),t.body.push(e)}parsePrivateName(){const t=super.parsePrivateName();return this.getPluginOption("estree","classFeatures")?this.convertPrivateNameToPrivateIdentifier(t):t}convertPrivateNameToPrivateIdentifier(t){const e=super.getPrivateNameSV(t);return t=t,delete t.id,t.name=e,t.type="PrivateIdentifier",t}isPrivateName(t){return this.getPluginOption("estree","classFeatures")?t.type==="PrivateIdentifier":super.isPrivateName(t)}getPrivateNameSV(t){return this.getPluginOption("estree","classFeatures")?t.name:super.getPrivateNameSV(t)}parseLiteral(t,e){const i=super.parseLiteral(t,e);return i.raw=i.extra.raw,delete i.extra,i}parseFunctionBody(t,e,i=!1){super.parseFunctionBody(t,e,i),t.expression=t.body.type!=="BlockStatement"}parseMethod(t,e,i,r,n,o,h=!1){let l=this.startNode();return l.kind=t.kind,l=super.parseMethod(l,e,i,r,n,o,h),l.type="FunctionExpression",delete l.kind,t.value=l,o==="ClassPrivateMethod"&&(t.computed=!1),this.finishNode(t,"MethodDefinition")}parseClassProperty(...t){const e=super.parseClassProperty(...t);return this.getPluginOption("estree","classFeatures")&&(e.type="PropertyDefinition"),e}parseClassPrivateProperty(...t){const e=super.parseClassPrivateProperty(...t);return this.getPluginOption("estree","classFeatures")&&(e.type="PropertyDefinition",e.computed=!1),e}parseObjectMethod(t,e,i,r,n){const o=super.parseObjectMethod(t,e,i,r,n);return o&&(o.type="Property",o.kind==="method"&&(o.kind="init"),o.shorthand=!1),o}parseObjectProperty(t,e,i,r){const n=super.parseObjectProperty(t,e,i,r);return n&&(n.kind="init",n.type="Property"),n}isValidLVal(t,e,i){return t==="Property"?"value":super.isValidLVal(t,e,i)}isAssignable(t,e){return t!=null&&this.isObjectProperty(t)?this.isAssignable(t.value,e):super.isAssignable(t,e)}toAssignable(t,e=!1){if(t!=null&&this.isObjectProperty(t)){const{key:i,value:r}=t;this.isPrivateName(i)&&this.classScope.usePrivateName(this.getPrivateNameSV(i),i.loc.start),this.toAssignable(r,e)}else super.toAssignable(t,e)}toAssignableObjectExpressionProp(t,e,i){t.kind==="get"||t.kind==="set"?this.raise(u.PatternHasAccessor,{at:t.key}):t.method?this.raise(u.PatternHasMethod,{at:t.key}):super.toAssignableObjectExpressionProp(t,e,i)}finishCallExpression(t,e){const i=super.finishCallExpression(t,e);if(i.callee.type==="Import"){if(i.type="ImportExpression",i.source=i.arguments[0],this.hasPlugin("importAssertions")){var r;i.attributes=(r=i.arguments[1])!=null?r:null}delete i.arguments,delete i.callee}return i}toReferencedArguments(t){t.type!=="ImportExpression"&&super.toReferencedArguments(t)}parseExport(t,e){const i=this.state.lastTokStartLoc,r=super.parseExport(t,e);switch(r.type){case"ExportAllDeclaration":r.exported=null;break;case"ExportNamedDeclaration":r.specifiers.length===1&&r.specifiers[0].type==="ExportNamespaceSpecifier"&&(r.type="ExportAllDeclaration",r.exported=r.specifiers[0].exported,delete r.specifiers);case"ExportDefaultDeclaration":{var n;const{declaration:o}=r;(o==null?void 0:o.type)==="ClassDeclaration"&&((n=o.decorators)==null?void 0:n.length)>0&&o.start===r.start&&this.resetStartLocation(r,i)}break}return r}parseSubscript(t,e,i,r){const n=super.parseSubscript(t,e,i,r);if(r.optionalChainMember){if((n.type==="OptionalMemberExpression"||n.type==="OptionalCallExpression")&&(n.type=n.type.substring(8)),r.stop){const o=this.startNodeAtNode(n);return o.expression=n,this.finishNode(o,"ChainExpression")}}else(n.type==="MemberExpression"||n.type==="CallExpression")&&(n.optional=!1);return n}hasPropertyAsPrivateName(t){return t.type==="ChainExpression"&&(t=t.expression),super.hasPropertyAsPrivateName(t)}isObjectProperty(t){return t.type==="Property"&&t.kind==="init"&&!t.method}isObjectMethod(t){return t.method||t.kind==="get"||t.kind==="set"}finishNodeAt(t,e,i){return ht(super.finishNodeAt(t,e,i))}resetStartLocation(t,e){super.resetStartLocation(t,e),ht(t)}resetEndLocation(t,e=this.state.lastTokEndLoc){super.resetEndLocation(t,e),ht(t)}};let ne="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",_e="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿";const Bs=new RegExp("["+ne+"]"),_s=new RegExp("["+ne+_e+"]");ne=_e=null;const Re=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],Rs=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239];function Jt(a,s){let t=65536;for(let e=0,i=s.length;e<i;e+=2){if(t+=s[e],t>a)return!1;if(t+=s[e+1],t>=a)return!0}return!1}function B(a){return a<65?a===36:a<=90?!0:a<97?a===95:a<=122?!0:a<=65535?a>=170&&Bs.test(String.fromCharCode(a)):Jt(a,Re)}function et(a){return a<48?a===36:a<58?!0:a<65?!1:a<=90?!0:a<97?a===95:a<=122?!0:a<=65535?a>=170&&_s.test(String.fromCharCode(a)):Jt(a,Re)||Jt(a,Rs)}const oe={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},Us=new Set(oe.keyword),js=new Set(oe.strict),zs=new Set(oe.strictBind);function Ue(a,s){return s&&a==="await"||a==="enum"}function je(a,s){return Ue(a,s)||js.has(a)}function ze(a){return zs.has(a)}function Ve(a,s){return je(a,s)||ze(a)}function Vs(a){return Us.has(a)}function Hs(a,s,t){return a===64&&s===64&&B(t)}const $s=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);function qs(a){return $s.has(a)}const Q=0,Z=1,R=2,he=4,He=8,kt=16,$e=32,J=64,vt=128,st=256,Pt=Z|R|vt|st,M=1,G=2,qe=4,X=8,At=16,Ke=64,Lt=128,Xt=256,Gt=512,le=1024,Yt=2048,ft=4096,Ft=8192,We=M|G|X|Lt|Ft,it=M|0|X|Ft,Ks=M|0|X|0,Dt=M|0|qe|0,Je=M|0|At|0,Ws=0|G|0|Lt,Js=0|G|0|0,Xe=M|G|X|Xt|Ft,Ae=0|le,H=0|Ke,Xs=M|0|0|Ke,Gs=Xe|Gt,Ys=0|le,Se=0|G|0|ft,Qs=Yt,Mt=4,ce=2,ue=1,Ut=ce|ue,Zs=ce|Mt,ti=ue|Mt,ei=ce,si=ue,jt=0;class pe{constructor(s){this.var=new Set,this.lexical=new Set,this.functions=new Set,this.flags=s}}class de{constructor(s,t){this.parser=void 0,this.scopeStack=[],this.inModule=void 0,this.undefinedExports=new Map,this.parser=s,this.inModule=t}get inTopLevel(){return(this.currentScope().flags&Z)>0}get inFunction(){return(this.currentVarScopeFlags()&R)>0}get allowSuper(){return(this.currentThisScopeFlags()&kt)>0}get allowDirectSuper(){return(this.currentThisScopeFlags()&$e)>0}get inClass(){return(this.currentThisScopeFlags()&J)>0}get inClassAndNotInNonArrowFunction(){const s=this.currentThisScopeFlags();return(s&J)>0&&(s&R)===0}get inStaticBlock(){for(let s=this.scopeStack.length-1;;s--){const{flags:t}=this.scopeStack[s];if(t&vt)return!0;if(t&(Pt|J))return!1}}get inNonArrowFunction(){return(this.currentThisScopeFlags()&R)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(s){return new pe(s)}enter(s){this.scopeStack.push(this.createScope(s))}exit(){return this.scopeStack.pop().flags}treatFunctionsAsVarInScope(s){return!!(s.flags&(R|vt)||!this.parser.inModule&&s.flags&Z)}declareName(s,t,e){let i=this.currentScope();if(t&X||t&At)this.checkRedeclarationInScope(i,s,t,e),t&At?i.functions.add(s):i.lexical.add(s),t&X&&this.maybeExportDefined(i,s);else if(t&qe)for(let r=this.scopeStack.length-1;r>=0&&(i=this.scopeStack[r],this.checkRedeclarationInScope(i,s,t,e),i.var.add(s),this.maybeExportDefined(i,s),!(i.flags&Pt));--r);this.parser.inModule&&i.flags&Z&&this.undefinedExports.delete(s)}maybeExportDefined(s,t){this.parser.inModule&&s.flags&Z&&this.undefinedExports.delete(t)}checkRedeclarationInScope(s,t,e,i){this.isRedeclaredInScope(s,t,e)&&this.parser.raise(u.VarRedeclaration,{at:i,identifierName:t})}isRedeclaredInScope(s,t,e){return e&M?e&X?s.lexical.has(t)||s.functions.has(t)||s.var.has(t):e&At?s.lexical.has(t)||!this.treatFunctionsAsVarInScope(s)&&s.var.has(t):s.lexical.has(t)&&!(s.flags&He&&s.lexical.values().next().value===t)||!this.treatFunctionsAsVarInScope(s)&&s.functions.has(t):!1}checkLocalExport(s){const{name:t}=s,e=this.scopeStack[0];!e.lexical.has(t)&&!e.var.has(t)&&!e.functions.has(t)&&this.undefinedExports.set(t,s.loc.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let s=this.scopeStack.length-1;;s--){const{flags:t}=this.scopeStack[s];if(t&Pt)return t}}currentThisScopeFlags(){for(let s=this.scopeStack.length-1;;s--){const{flags:t}=this.scopeStack[s];if(t&(Pt|J)&&!(t&he))return t}}}class ii extends pe{constructor(...s){super(...s),this.declareFunctions=new Set}}class ri extends de{createScope(s){return new ii(s)}declareName(s,t,e){const i=this.currentScope();if(t&Yt){this.checkRedeclarationInScope(i,s,t,e),this.maybeExportDefined(i,s),i.declareFunctions.add(s);return}super.declareName(s,t,e)}isRedeclaredInScope(s,t,e){return super.isRedeclaredInScope(s,t,e)?!0:e&Yt?!s.declareFunctions.has(t)&&(s.lexical.has(t)||s.functions.has(t)):!1}checkLocalExport(s){this.scopeStack[0].declareFunctions.has(s.name)||super.checkLocalExport(s)}}class ai{constructor(){this.sawUnambiguousESM=!1,this.ambiguousScriptDifferentAst=!1}hasPlugin(s){if(typeof s=="string")return this.plugins.has(s);{const[t,e]=s;if(!this.hasPlugin(t))return!1;const i=this.plugins.get(t);for(const r of Object.keys(e))if((i==null?void 0:i[r])!==e[r])return!1;return!0}}getPluginOption(s,t){var e;return(e=this.plugins.get(s))==null?void 0:e[t]}}function Ge(a,s){a.trailingComments===void 0?a.trailingComments=s:a.trailingComments.unshift(...s)}function ni(a,s){a.leadingComments===void 0?a.leadingComments=s:a.leadingComments.unshift(...s)}function yt(a,s){a.innerComments===void 0?a.innerComments=s:a.innerComments.unshift(...s)}function lt(a,s,t){let e=null,i=s.length;for(;e===null&&i>0;)e=s[--i];e===null||e.start>t.start?yt(a,t.comments):Ge(e,t.comments)}class oi extends ai{addComment(s){this.filename&&(s.loc.filename=this.filename),this.state.comments.push(s)}processComment(s){const{commentStack:t}=this.state,e=t.length;if(e===0)return;let i=e-1;const r=t[i];r.start===s.end&&(r.leadingNode=s,i--);const{start:n}=s;for(;i>=0;i--){const o=t[i],h=o.end;if(h>n)o.containingNode=s,this.finalizeComment(o),t.splice(i,1);else{h===n&&(o.trailingNode=s);break}}}finalizeComment(s){const{comments:t}=s;if(s.leadingNode!==null||s.trailingNode!==null)s.leadingNode!==null&&Ge(s.leadingNode,t),s.trailingNode!==null&&ni(s.trailingNode,t);else{const{containingNode:e,start:i}=s;if(this.input.charCodeAt(i-1)===44)switch(e.type){case"ObjectExpression":case"ObjectPattern":case"RecordExpression":lt(e,e.properties,s);break;case"CallExpression":case"OptionalCallExpression":lt(e,e.arguments,s);break;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":lt(e,e.params,s);break;case"ArrayExpression":case"ArrayPattern":case"TupleExpression":lt(e,e.elements,s);break;case"ExportNamedDeclaration":case"ImportDeclaration":lt(e,e.specifiers,s);break;default:yt(e,t)}else yt(e,t)}}finalizeRemainingComments(){const{commentStack:s}=this.state;for(let t=s.length-1;t>=0;t--)this.finalizeComment(s[t]);this.state.commentStack=[]}resetPreviousNodeTrailingComments(s){const{commentStack:t}=this.state,{length:e}=t;if(e===0)return;const i=t[e-1];i.leadingNode===s&&(i.leadingNode=null)}takeSurroundingComments(s,t,e){const{commentStack:i}=this.state,r=i.length;if(r===0)return;let n=r-1;for(;n>=0;n--){const o=i[n],h=o.end;if(o.start===e)o.leadingNode=s;else if(h===t)o.trailingNode=s;else if(h<t)break}}}const fe=/\r\n?|[\n\u2028\u2029]/,gt=new RegExp(fe.source,"g");function mt(a){switch(a){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}const zt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,St=/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/g,Ce=new RegExp("(?=("+St.source+"))\\1"+/(?=[\n\r\u2028\u2029]|\/\*(?!.*?\*\/)|$)/.source,"y");function hi(a){switch(a){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}class me{constructor(){this.strict=void 0,this.curLine=void 0,this.lineStart=void 0,this.startLoc=void 0,this.endLoc=void 0,this.errors=[],this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.maybeInArrowParameters=!1,this.inType=!1,this.noAnonFunctionType=!1,this.hasFlowComment=!1,this.isAmbientContext=!1,this.inAbstractClass=!1,this.inDisallowConditionalTypesContext=!1,this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.soloAwait=!1,this.inFSharpPipelineDirectBody=!1,this.labels=[],this.comments=[],this.commentStack=[],this.pos=0,this.type=137,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.lastTokStart=0,this.context=[C.brace],this.canStartJSXElement=!0,this.containsEsc=!1,this.firstInvalidTemplateEscapePos=null,this.strictErrors=new Map,this.tokensLength=0}init({strictMode:s,sourceType:t,startLine:e,startColumn:i}){this.strict=s===!1?!1:s===!0?!0:t==="module",this.curLine=e,this.lineStart=-i,this.startLoc=this.endLoc=new q(e,i,0)}curPosition(){return new q(this.curLine,this.pos-this.lineStart,this.pos)}clone(s){const t=new me,e=Object.keys(this);for(let i=0,r=e.length;i<r;i++){const n=e[i];let o=this[n];!s&&Array.isArray(o)&&(o=o.slice()),t[n]=o}return t}}var li=function(s){return s>=48&&s<=57};const Ee={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},Tt={bin:a=>a===48||a===49,oct:a=>a>=48&&a<=55,dec:a=>a>=48&&a<=57,hex:a=>a>=48&&a<=57||a>=65&&a<=70||a>=97&&a<=102};function we(a,s,t,e,i,r){const n=t,o=e,h=i;let l="",c=null,p=t;const{length:d}=s;for(;;){if(t>=d){r.unterminated(n,o,h),l+=s.slice(p,t);break}const m=s.charCodeAt(t);if(ci(a,m,s,t)){l+=s.slice(p,t);break}if(m===92){l+=s.slice(p,t);const g=ui(s,t,e,i,a==="template",r);g.ch===null&&!c?c={pos:t,lineStart:e,curLine:i}:l+=g.ch,{pos:t,lineStart:e,curLine:i}=g,p=t}else m===8232||m===8233?(++t,++i,e=t):m===10||m===13?a==="template"?(l+=s.slice(p,t)+`
`,++t,m===13&&s.charCodeAt(t)===10&&++t,++i,p=e=t):r.unterminated(n,o,h):++t}return{pos:t,str:l,firstInvalidLoc:c,lineStart:e,curLine:i,containsInvalid:!!c}}function ci(a,s,t,e){return a==="template"?s===96||s===36&&t.charCodeAt(e+1)===123:s===(a==="double"?34:39)}function ui(a,s,t,e,i,r){const n=!i;s++;const o=l=>({pos:s,ch:l,lineStart:t,curLine:e}),h=a.charCodeAt(s++);switch(h){case 110:return o(`
`);case 114:return o("\r");case 120:{let l;return{code:l,pos:s}=Qt(a,s,t,e,2,!1,n,r),o(l===null?null:String.fromCharCode(l))}case 117:{let l;return{code:l,pos:s}=Qe(a,s,t,e,n,r),o(l===null?null:String.fromCodePoint(l))}case 116:return o("	");case 98:return o("\b");case 118:return o("\v");case 102:return o("\f");case 13:a.charCodeAt(s)===10&&++s;case 10:t=s,++e;case 8232:case 8233:return o("");case 56:case 57:if(i)return o(null);r.strictNumericEscape(s-1,t,e);default:if(h>=48&&h<=55){const l=s-1;let p=a.slice(l,s+2).match(/^[0-7]+/)[0],d=parseInt(p,8);d>255&&(p=p.slice(0,-1),d=parseInt(p,8)),s+=p.length-1;const m=a.charCodeAt(s);if(p!=="0"||m===56||m===57){if(i)return o(null);r.strictNumericEscape(l,t,e)}return o(String.fromCharCode(d))}return o(String.fromCharCode(h))}}function Qt(a,s,t,e,i,r,n,o){const h=s;let l;return{n:l,pos:s}=Ye(a,s,t,e,16,i,r,!1,o,!n),l===null&&(n?o.invalidEscapeSequence(h,t,e):s=h-1),{code:l,pos:s}}function Ye(a,s,t,e,i,r,n,o,h,l){const c=s,p=i===16?Ee.hex:Ee.decBinOct,d=i===16?Tt.hex:i===10?Tt.dec:i===8?Tt.oct:Tt.bin;let m=!1,g=0;for(let I=0,E=r??1/0;I<E;++I){const w=a.charCodeAt(s);let N;if(w===95&&o!=="bail"){const xt=a.charCodeAt(s-1),nt=a.charCodeAt(s+1);if(o){if(Number.isNaN(nt)||!d(nt)||p.has(xt)||p.has(nt)){if(l)return{n:null,pos:s};h.unexpectedNumericSeparator(s,t,e)}}else{if(l)return{n:null,pos:s};h.numericSeparatorInEscapeSequence(s,t,e)}++s;continue}if(w>=97?N=w-97+10:w>=65?N=w-65+10:li(w)?N=w-48:N=1/0,N>=i){if(N<=9&&l)return{n:null,pos:s};if(N<=9&&h.invalidDigit(s,t,e,i))N=0;else if(n)N=0,m=!0;else break}++s,g=g*i+N}return s===c||r!=null&&s-c!==r||m?{n:null,pos:s}:{n:g,pos:s}}function Qe(a,s,t,e,i,r){const n=a.charCodeAt(s);let o;if(n===123){if(++s,{code:o,pos:s}=Qt(a,s,t,e,a.indexOf("}",s)-s,!0,i,r),++s,o!==null&&o>1114111)if(i)r.invalidCodePoint(s,t,e);else return{code:null,pos:s}}else({code:o,pos:s}=Qt(a,s,t,e,4,!1,i,r));return{code:o,pos:s}}const pi=["at"],di=["at"];function ct(a,s,t){return new q(t,a-s,a)}const fi=new Set([103,109,115,105,121,117,100,118]);class V{constructor(s){this.type=s.type,this.value=s.value,this.start=s.start,this.end=s.end,this.loc=new Nt(s.startLoc,s.endLoc)}}class mi extends oi{constructor(s,t){super(),this.isLookahead=void 0,this.tokens=[],this.errorHandlers_readInt={invalidDigit:(e,i,r,n)=>this.options.errorRecovery?(this.raise(u.InvalidDigit,{at:ct(e,i,r),radix:n}),!0):!1,numericSeparatorInEscapeSequence:this.errorBuilder(u.NumericSeparatorInEscapeSequence),unexpectedNumericSeparator:this.errorBuilder(u.UnexpectedNumericSeparator)},this.errorHandlers_readCodePoint=Object.assign({},this.errorHandlers_readInt,{invalidEscapeSequence:this.errorBuilder(u.InvalidEscapeSequence),invalidCodePoint:this.errorBuilder(u.InvalidCodePoint)}),this.errorHandlers_readStringContents_string=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:(e,i,r)=>{this.recordStrictModeErrors(u.StrictNumericEscape,{at:ct(e,i,r)})},unterminated:(e,i,r)=>{throw this.raise(u.UnterminatedString,{at:ct(e-1,i,r)})}}),this.errorHandlers_readStringContents_template=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:this.errorBuilder(u.StrictNumericEscape),unterminated:(e,i,r)=>{throw this.raise(u.UnterminatedTemplate,{at:ct(e,i,r)})}}),this.state=new me,this.state.init(s),this.input=t,this.length=t.length,this.isLookahead=!1}pushToken(s){this.tokens.length=this.state.tokensLength,this.tokens.push(s),++this.state.tokensLength}next(){this.checkKeywordEscapes(),this.options.tokens&&this.pushToken(new V(this.state)),this.state.lastTokStart=this.state.start,this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(s){return this.match(s)?(this.next(),!0):!1}match(s){return this.state.type===s}createLookaheadState(s){return{pos:s.pos,value:null,type:s.type,start:s.start,end:s.end,context:[this.curContext()],inType:s.inType,startLoc:s.startLoc,lastTokEndLoc:s.lastTokEndLoc,curLine:s.curLine,lineStart:s.lineStart,curPosition:s.curPosition}}lookahead(){const s=this.state;this.state=this.createLookaheadState(s),this.isLookahead=!0,this.nextToken(),this.isLookahead=!1;const t=this.state;return this.state=s,t}nextTokenStart(){return this.nextTokenStartSince(this.state.pos)}nextTokenStartSince(s){return zt.lastIndex=s,zt.test(this.input)?zt.lastIndex:s}lookaheadCharCode(){return this.input.charCodeAt(this.nextTokenStart())}nextTokenInLineStart(){return this.nextTokenInLineStartSince(this.state.pos)}nextTokenInLineStartSince(s){return St.lastIndex=s,St.test(this.input)?St.lastIndex:s}lookaheadInLineCharCode(){return this.input.charCodeAt(this.nextTokenInLineStart())}codePointAtPos(s){let t=this.input.charCodeAt(s);if((t&64512)===55296&&++s<this.input.length){const e=this.input.charCodeAt(s);(e&64512)===56320&&(t=65536+((t&1023)<<10)+(e&1023))}return t}setStrict(s){this.state.strict=s,s&&(this.state.strictErrors.forEach(([t,e])=>this.raise(t,{at:e})),this.state.strictErrors.clear())}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){if(this.skipSpace(),this.state.start=this.state.pos,this.isLookahead||(this.state.startLoc=this.state.curPosition()),this.state.pos>=this.length){this.finishToken(137);return}this.getTokenFromCode(this.codePointAtPos(this.state.pos))}skipBlockComment(s){let t;this.isLookahead||(t=this.state.curPosition());const e=this.state.pos,i=this.input.indexOf(s,e+2);if(i===-1)throw this.raise(u.UnterminatedComment,{at:this.state.curPosition()});for(this.state.pos=i+s.length,gt.lastIndex=e+2;gt.test(this.input)&&gt.lastIndex<=i;)++this.state.curLine,this.state.lineStart=gt.lastIndex;if(this.isLookahead)return;const r={type:"CommentBlock",value:this.input.slice(e+2,i),start:e,end:i+s.length,loc:new Nt(t,this.state.curPosition())};return this.options.tokens&&this.pushToken(r),r}skipLineComment(s){const t=this.state.pos;let e;this.isLookahead||(e=this.state.curPosition());let i=this.input.charCodeAt(this.state.pos+=s);if(this.state.pos<this.length)for(;!mt(i)&&++this.state.pos<this.length;)i=this.input.charCodeAt(this.state.pos);if(this.isLookahead)return;const r=this.state.pos,o={type:"CommentLine",value:this.input.slice(t+s,r),start:t,end:r,loc:new Nt(e,this.state.curPosition())};return this.options.tokens&&this.pushToken(o),o}skipSpace(){const s=this.state.pos,t=[];t:for(;this.state.pos<this.length;){const e=this.input.charCodeAt(this.state.pos);switch(e){case 32:case 160:case 9:++this.state.pos;break;case 13:this.input.charCodeAt(this.state.pos+1)===10&&++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:{const i=this.skipBlockComment("*/");i!==void 0&&(this.addComment(i),this.options.attachComment&&t.push(i));break}case 47:{const i=this.skipLineComment(2);i!==void 0&&(this.addComment(i),this.options.attachComment&&t.push(i));break}default:break t}break;default:if(hi(e))++this.state.pos;else if(e===45&&!this.inModule&&this.options.annexB){const i=this.state.pos;if(this.input.charCodeAt(i+1)===45&&this.input.charCodeAt(i+2)===62&&(s===0||this.state.lineStart>s)){const r=this.skipLineComment(3);r!==void 0&&(this.addComment(r),this.options.attachComment&&t.push(r))}else break t}else if(e===60&&!this.inModule&&this.options.annexB){const i=this.state.pos;if(this.input.charCodeAt(i+1)===33&&this.input.charCodeAt(i+2)===45&&this.input.charCodeAt(i+3)===45){const r=this.skipLineComment(4);r!==void 0&&(this.addComment(r),this.options.attachComment&&t.push(r))}else break t}else break t}}if(t.length>0){const e=this.state.pos,i={start:s,end:e,comments:t,leadingNode:null,trailingNode:null,containingNode:null};this.state.commentStack.push(i)}}finishToken(s,t){this.state.end=this.state.pos,this.state.endLoc=this.state.curPosition();const e=this.state.type;this.state.type=s,this.state.value=t,this.isLookahead||this.updateContext(e)}replaceToken(s){this.state.type=s,this.updateContext()}readToken_numberSign(){if(this.state.pos===0&&this.readToken_interpreter())return;const s=this.state.pos+1,t=this.codePointAtPos(s);if(t>=48&&t<=57)throw this.raise(u.UnexpectedDigitAfterHash,{at:this.state.curPosition()});if(t===123||t===91&&this.hasPlugin("recordAndTuple")){if(this.expectPlugin("recordAndTuple"),this.getPluginOption("recordAndTuple","syntaxType")==="bar")throw this.raise(t===123?u.RecordExpressionHashIncorrectStartSyntaxType:u.TupleExpressionHashIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,t===123?this.finishToken(7):this.finishToken(1)}else B(t)?(++this.state.pos,this.finishToken(136,this.readWord1(t))):t===92?(++this.state.pos,this.finishToken(136,this.readWord1())):this.finishOp(27,1)}readToken_dot(){const s=this.input.charCodeAt(this.state.pos+1);if(s>=48&&s<=57){this.readNumber(!0);return}s===46&&this.input.charCodeAt(this.state.pos+2)===46?(this.state.pos+=3,this.finishToken(21)):(++this.state.pos,this.finishToken(16))}readToken_slash(){this.input.charCodeAt(this.state.pos+1)===61?this.finishOp(31,2):this.finishOp(56,1)}readToken_interpreter(){if(this.state.pos!==0||this.length<2)return!1;let s=this.input.charCodeAt(this.state.pos+1);if(s!==33)return!1;const t=this.state.pos;for(this.state.pos+=1;!mt(s)&&++this.state.pos<this.length;)s=this.input.charCodeAt(this.state.pos);const e=this.input.slice(t+2,this.state.pos);return this.finishToken(28,e),!0}readToken_mult_modulo(s){let t=s===42?55:54,e=1,i=this.input.charCodeAt(this.state.pos+1);s===42&&i===42&&(e++,i=this.input.charCodeAt(this.state.pos+2),t=57),i===61&&!this.state.inType&&(e++,t=s===37?33:30),this.finishOp(t,e)}readToken_pipe_amp(s){const t=this.input.charCodeAt(this.state.pos+1);if(t===s){this.input.charCodeAt(this.state.pos+2)===61?this.finishOp(30,3):this.finishOp(s===124?41:42,2);return}if(s===124){if(t===62){this.finishOp(39,2);return}if(this.hasPlugin("recordAndTuple")&&t===125){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(u.RecordExpressionBarIncorrectEndSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(9);return}if(this.hasPlugin("recordAndTuple")&&t===93){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(u.TupleExpressionBarIncorrectEndSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(4);return}}if(t===61){this.finishOp(30,2);return}this.finishOp(s===124?43:45,1)}readToken_caret(){const s=this.input.charCodeAt(this.state.pos+1);s===61&&!this.state.inType?this.finishOp(32,2):s===94&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"^^"}])?(this.finishOp(37,2),this.input.codePointAt(this.state.pos)===94&&this.unexpected()):this.finishOp(44,1)}readToken_atSign(){this.input.charCodeAt(this.state.pos+1)===64&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"@@"}])?this.finishOp(38,2):this.finishOp(26,1)}readToken_plus_min(s){const t=this.input.charCodeAt(this.state.pos+1);if(t===s){this.finishOp(34,2);return}t===61?this.finishOp(30,2):this.finishOp(53,1)}readToken_lt(){const{pos:s}=this.state,t=this.input.charCodeAt(s+1);if(t===60){if(this.input.charCodeAt(s+2)===61){this.finishOp(30,3);return}this.finishOp(51,2);return}if(t===61){this.finishOp(49,2);return}this.finishOp(47,1)}readToken_gt(){const{pos:s}=this.state,t=this.input.charCodeAt(s+1);if(t===62){const e=this.input.charCodeAt(s+2)===62?3:2;if(this.input.charCodeAt(s+e)===61){this.finishOp(30,e+1);return}this.finishOp(52,e);return}if(t===61){this.finishOp(49,2);return}this.finishOp(48,1)}readToken_eq_excl(s){const t=this.input.charCodeAt(this.state.pos+1);if(t===61){this.finishOp(46,this.input.charCodeAt(this.state.pos+2)===61?3:2);return}if(s===61&&t===62){this.state.pos+=2,this.finishToken(19);return}this.finishOp(s===61?29:35,1)}readToken_question(){const s=this.input.charCodeAt(this.state.pos+1),t=this.input.charCodeAt(this.state.pos+2);s===63?t===61?this.finishOp(30,3):this.finishOp(40,2):s===46&&!(t>=48&&t<=57)?(this.state.pos+=2,this.finishToken(18)):(++this.state.pos,this.finishToken(17))}getTokenFromCode(s){switch(s){case 46:this.readToken_dot();return;case 40:++this.state.pos,this.finishToken(10);return;case 41:++this.state.pos,this.finishToken(11);return;case 59:++this.state.pos,this.finishToken(13);return;case 44:++this.state.pos,this.finishToken(12);return;case 91:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(u.TupleExpressionBarIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(2)}else++this.state.pos,this.finishToken(0);return;case 93:++this.state.pos,this.finishToken(3);return;case 123:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(u.RecordExpressionBarIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(6)}else++this.state.pos,this.finishToken(5);return;case 125:++this.state.pos,this.finishToken(8);return;case 58:this.hasPlugin("functionBind")&&this.input.charCodeAt(this.state.pos+1)===58?this.finishOp(15,2):(++this.state.pos,this.finishToken(14));return;case 63:this.readToken_question();return;case 96:this.readTemplateToken();return;case 48:{const t=this.input.charCodeAt(this.state.pos+1);if(t===120||t===88){this.readRadixNumber(16);return}if(t===111||t===79){this.readRadixNumber(8);return}if(t===98||t===66){this.readRadixNumber(2);return}}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:this.readNumber(!1);return;case 34:case 39:this.readString(s);return;case 47:this.readToken_slash();return;case 37:case 42:this.readToken_mult_modulo(s);return;case 124:case 38:this.readToken_pipe_amp(s);return;case 94:this.readToken_caret();return;case 43:case 45:this.readToken_plus_min(s);return;case 60:this.readToken_lt();return;case 62:this.readToken_gt();return;case 61:case 33:this.readToken_eq_excl(s);return;case 126:this.finishOp(36,1);return;case 64:this.readToken_atSign();return;case 35:this.readToken_numberSign();return;case 92:this.readWord();return;default:if(B(s)){this.readWord(s);return}}throw this.raise(u.InvalidOrUnexpectedToken,{at:this.state.curPosition(),unexpected:String.fromCodePoint(s)})}finishOp(s,t){const e=this.input.slice(this.state.pos,this.state.pos+t);this.state.pos+=t,this.finishToken(s,e)}readRegexp(){const s=this.state.startLoc,t=this.state.start+1;let e,i,{pos:r}=this.state;for(;;++r){if(r>=this.length)throw this.raise(u.UnterminatedRegExp,{at:L(s,1)});const l=this.input.charCodeAt(r);if(mt(l))throw this.raise(u.UnterminatedRegExp,{at:L(s,1)});if(e)e=!1;else{if(l===91)i=!0;else if(l===93&&i)i=!1;else if(l===47&&!i)break;e=l===92}}const n=this.input.slice(t,r);++r;let o="";const h=()=>L(s,r+2-t);for(;r<this.length;){const l=this.codePointAtPos(r),c=String.fromCharCode(l);if(fi.has(l))l===118?(this.expectPlugin("regexpUnicodeSets",h()),o.includes("u")&&this.raise(u.IncompatibleRegExpUVFlags,{at:h()})):l===117&&o.includes("v")&&this.raise(u.IncompatibleRegExpUVFlags,{at:h()}),o.includes(c)&&this.raise(u.DuplicateRegExpFlags,{at:h()});else if(et(l)||l===92)this.raise(u.MalformedRegExpFlags,{at:h()});else break;++r,o+=c}this.state.pos=r,this.finishToken(135,{pattern:n,flags:o})}readInt(s,t,e=!1,i=!0){const{n:r,pos:n}=Ye(this.input,this.state.pos,this.state.lineStart,this.state.curLine,s,t,e,i,this.errorHandlers_readInt,!1);return this.state.pos=n,r}readRadixNumber(s){const t=this.state.curPosition();let e=!1;this.state.pos+=2;const i=this.readInt(s);i==null&&this.raise(u.InvalidDigit,{at:L(t,2),radix:s});const r=this.input.charCodeAt(this.state.pos);if(r===110)++this.state.pos,e=!0;else if(r===109)throw this.raise(u.InvalidDecimal,{at:t});if(B(this.codePointAtPos(this.state.pos)))throw this.raise(u.NumberIdentifier,{at:this.state.curPosition()});if(e){const n=this.input.slice(t.index,this.state.pos).replace(/[_n]/g,"");this.finishToken(133,n);return}this.finishToken(132,i)}readNumber(s){const t=this.state.pos,e=this.state.curPosition();let i=!1,r=!1,n=!1,o=!1,h=!1;!s&&this.readInt(10)===null&&this.raise(u.InvalidNumber,{at:this.state.curPosition()});const l=this.state.pos-t>=2&&this.input.charCodeAt(t)===48;if(l){const m=this.input.slice(t,this.state.pos);if(this.recordStrictModeErrors(u.StrictOctalLiteral,{at:e}),!this.state.strict){const g=m.indexOf("_");g>0&&this.raise(u.ZeroDigitNumericSeparator,{at:L(e,g)})}h=l&&!/[89]/.test(m)}let c=this.input.charCodeAt(this.state.pos);if(c===46&&!h&&(++this.state.pos,this.readInt(10),i=!0,c=this.input.charCodeAt(this.state.pos)),(c===69||c===101)&&!h&&(c=this.input.charCodeAt(++this.state.pos),(c===43||c===45)&&++this.state.pos,this.readInt(10)===null&&this.raise(u.InvalidOrMissingExponent,{at:e}),i=!0,o=!0,c=this.input.charCodeAt(this.state.pos)),c===110&&((i||l)&&this.raise(u.InvalidBigIntLiteral,{at:e}),++this.state.pos,r=!0),c===109&&(this.expectPlugin("decimal",this.state.curPosition()),(o||l)&&this.raise(u.InvalidDecimal,{at:e}),++this.state.pos,n=!0),B(this.codePointAtPos(this.state.pos)))throw this.raise(u.NumberIdentifier,{at:this.state.curPosition()});const p=this.input.slice(t,this.state.pos).replace(/[_mn]/g,"");if(r){this.finishToken(133,p);return}if(n){this.finishToken(134,p);return}const d=h?parseInt(p,8):parseFloat(p);this.finishToken(132,d)}readCodePoint(s){const{code:t,pos:e}=Qe(this.input,this.state.pos,this.state.lineStart,this.state.curLine,s,this.errorHandlers_readCodePoint);return this.state.pos=e,t}readString(s){const{str:t,pos:e,curLine:i,lineStart:r}=we(s===34?"double":"single",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_string);this.state.pos=e+1,this.state.lineStart=r,this.state.curLine=i,this.finishToken(131,t)}readTemplateContinuation(){this.match(8)||this.unexpected(null,8),this.state.pos--,this.readTemplateToken()}readTemplateToken(){const s=this.input[this.state.pos],{str:t,firstInvalidLoc:e,pos:i,curLine:r,lineStart:n}=we("template",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_template);this.state.pos=i+1,this.state.lineStart=n,this.state.curLine=r,e&&(this.state.firstInvalidTemplateEscapePos=new q(e.curLine,e.pos-e.lineStart,e.pos)),this.input.codePointAt(i)===96?this.finishToken(24,e?null:s+t+"`"):(this.state.pos++,this.finishToken(25,e?null:s+t+"${"))}recordStrictModeErrors(s,{at:t}){const e=t.index;this.state.strict&&!this.state.strictErrors.has(e)?this.raise(s,{at:t}):this.state.strictErrors.set(e,[s,t])}readWord1(s){this.state.containsEsc=!1;let t="";const e=this.state.pos;let i=this.state.pos;for(s!==void 0&&(this.state.pos+=s<=65535?1:2);this.state.pos<this.length;){const r=this.codePointAtPos(this.state.pos);if(et(r))this.state.pos+=r<=65535?1:2;else if(r===92){this.state.containsEsc=!0,t+=this.input.slice(i,this.state.pos);const n=this.state.curPosition(),o=this.state.pos===e?B:et;if(this.input.charCodeAt(++this.state.pos)!==117){this.raise(u.MissingUnicodeEscape,{at:this.state.curPosition()}),i=this.state.pos-1;continue}++this.state.pos;const h=this.readCodePoint(!0);h!==null&&(o(h)||this.raise(u.EscapedCharNotAnIdentifier,{at:n}),t+=String.fromCodePoint(h)),i=this.state.pos}else break}return t+this.input.slice(i,this.state.pos)}readWord(s){const t=this.readWord1(s),e=Zt.get(t);e!==void 0?this.finishToken(e,$(e)):this.finishToken(130,t)}checkKeywordEscapes(){const{type:s}=this.state;ae(s)&&this.state.containsEsc&&this.raise(u.InvalidEscapedReservedWord,{at:this.state.startLoc,reservedWord:$(s)})}raise(s,t){const{at:e}=t,i=It(t,pi),r=e instanceof q?e:e.loc.start,n=s({loc:r,details:i});if(!this.options.errorRecovery)throw n;return this.isLookahead||this.state.errors.push(n),n}raiseOverwrite(s,t){const{at:e}=t,i=It(t,di),r=e instanceof q?e:e.loc.start,n=r.index,o=this.state.errors;for(let h=o.length-1;h>=0;h--){const l=o[h];if(l.loc.index===n)return o[h]=s({loc:r,details:i});if(l.loc.index<n)break}return this.raise(s,t)}updateContext(s){}unexpected(s,t){throw this.raise(u.UnexpectedToken,{expected:t?$(t):null,at:s??this.state.startLoc})}expectPlugin(s,t){if(this.hasPlugin(s))return!0;throw this.raise(u.MissingPlugin,{at:t??this.state.startLoc,missingPlugin:[s]})}expectOnePlugin(s){if(!s.some(t=>this.hasPlugin(t)))throw this.raise(u.MissingOneOfPlugins,{at:this.state.startLoc,missingPlugin:s})}errorBuilder(s){return(t,e,i)=>{this.raise(s,{at:ct(t,e,i)})}}}class yi{constructor(){this.privateNames=new Set,this.loneAccessors=new Map,this.undefinedPrivateNames=new Map}}class xi{constructor(s){this.parser=void 0,this.stack=[],this.undefinedPrivateNames=new Map,this.parser=s}current(){return this.stack[this.stack.length-1]}enter(){this.stack.push(new yi)}exit(){const s=this.stack.pop(),t=this.current();for(const[e,i]of Array.from(s.undefinedPrivateNames))t?t.undefinedPrivateNames.has(e)||t.undefinedPrivateNames.set(e,i):this.parser.raise(u.InvalidPrivateFieldResolution,{at:i,identifierName:e})}declarePrivateName(s,t,e){const{privateNames:i,loneAccessors:r,undefinedPrivateNames:n}=this.current();let o=i.has(s);if(t&Ut){const h=o&&r.get(s);if(h){const l=h&Mt,c=t&Mt,p=h&Ut,d=t&Ut;o=p===d||l!==c,o||r.delete(s)}else o||r.set(s,t)}o&&this.parser.raise(u.PrivateNameRedeclaration,{at:e,identifierName:s}),i.add(s),n.delete(s)}usePrivateName(s,t){let e;for(e of this.stack)if(e.privateNames.has(s))return;e?e.undefinedPrivateNames.set(s,t):this.parser.raise(u.InvalidPrivateFieldResolution,{at:t,identifierName:s})}}const Pi=0,Ze=1,ye=2,ts=3;class Bt{constructor(s=Pi){this.type=void 0,this.type=s}canBeArrowParameterDeclaration(){return this.type===ye||this.type===Ze}isCertainlyParameterDeclaration(){return this.type===ts}}class es extends Bt{constructor(s){super(s),this.declarationErrors=new Map}recordDeclarationError(s,{at:t}){const e=t.index;this.declarationErrors.set(e,[s,t])}clearDeclarationError(s){this.declarationErrors.delete(s)}iterateErrors(s){this.declarationErrors.forEach(s)}}class gi{constructor(s){this.parser=void 0,this.stack=[new Bt],this.parser=s}enter(s){this.stack.push(s)}exit(){this.stack.pop()}recordParameterInitializerError(s,{at:t}){const e={at:t.loc.start},{stack:i}=this;let r=i.length-1,n=i[r];for(;!n.isCertainlyParameterDeclaration();){if(n.canBeArrowParameterDeclaration())n.recordDeclarationError(s,e);else return;n=i[--r]}this.parser.raise(s,e)}recordArrowParameterBindingError(s,{at:t}){const{stack:e}=this,i=e[e.length-1],r={at:t.loc.start};if(i.isCertainlyParameterDeclaration())this.parser.raise(s,r);else if(i.canBeArrowParameterDeclaration())i.recordDeclarationError(s,r);else return}recordAsyncArrowParametersError({at:s}){const{stack:t}=this;let e=t.length-1,i=t[e];for(;i.canBeArrowParameterDeclaration();)i.type===ye&&i.recordDeclarationError(u.AwaitBindingIdentifier,{at:s}),i=t[--e]}validateAsPattern(){const{stack:s}=this,t=s[s.length-1];t.canBeArrowParameterDeclaration()&&t.iterateErrors(([e,i])=>{this.parser.raise(e,{at:i});let r=s.length-2,n=s[r];for(;n.canBeArrowParameterDeclaration();)n.clearDeclarationError(i.index),n=s[--r]})}}function Ti(){return new Bt(ts)}function bi(){return new es(Ze)}function Ai(){return new es(ye)}function ss(){return new Bt}const rt=0,is=1,_t=2,rs=4,Y=8;class Si{constructor(){this.stacks=[]}enter(s){this.stacks.push(s)}exit(){this.stacks.pop()}currentFlags(){return this.stacks[this.stacks.length-1]}get hasAwait(){return(this.currentFlags()&_t)>0}get hasYield(){return(this.currentFlags()&is)>0}get hasReturn(){return(this.currentFlags()&rs)>0}get hasIn(){return(this.currentFlags()&Y)>0}}function Ct(a,s){return(a?_t:0)|(s?is:0)}class Ci extends mi{addExtra(s,t,e,i=!0){if(!s)return;const r=s.extra=s.extra||{};i?r[t]=e:Object.defineProperty(r,t,{enumerable:i,value:e})}isContextual(s){return this.state.type===s&&!this.state.containsEsc}isUnparsedContextual(s,t){const e=s+t.length;if(this.input.slice(s,e)===t){const i=this.input.charCodeAt(e);return!(et(i)||(i&64512)===55296)}return!1}isLookaheadContextual(s){const t=this.nextTokenStart();return this.isUnparsedContextual(t,s)}eatContextual(s){return this.isContextual(s)?(this.next(),!0):!1}expectContextual(s,t){if(!this.eatContextual(s)){if(t!=null)throw this.raise(t,{at:this.state.startLoc});this.unexpected(null,s)}}canInsertSemicolon(){return this.match(137)||this.match(8)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return fe.test(this.input.slice(this.state.lastTokEndLoc.index,this.state.start))}hasFollowingLineBreak(){return Ce.lastIndex=this.state.end,Ce.test(this.input)}isLineTerminator(){return this.eat(13)||this.canInsertSemicolon()}semicolon(s=!0){(s?this.isLineTerminator():this.eat(13))||this.raise(u.MissingSemicolon,{at:this.state.lastTokEndLoc})}expect(s,t){this.eat(s)||this.unexpected(t,s)}tryParse(s,t=this.state.clone()){const e={node:null};try{const i=s((r=null)=>{throw e.node=r,e});if(this.state.errors.length>t.errors.length){const r=this.state;return this.state=t,this.state.tokensLength=r.tokensLength,{node:i,error:r.errors[t.errors.length],thrown:!1,aborted:!1,failState:r}}return{node:i,error:null,thrown:!1,aborted:!1,failState:null}}catch(i){const r=this.state;if(this.state=t,i instanceof SyntaxError)return{node:null,error:i,thrown:!0,aborted:!1,failState:r};if(i===e)return{node:e.node,error:null,thrown:!1,aborted:!0,failState:r};throw i}}checkExpressionErrors(s,t){if(!s)return!1;const{shorthandAssignLoc:e,doubleProtoLoc:i,privateKeyLoc:r,optionalParametersLoc:n}=s,o=!!e||!!i||!!n||!!r;if(!t)return o;e!=null&&this.raise(u.InvalidCoverInitializedName,{at:e}),i!=null&&this.raise(u.DuplicateProto,{at:i}),r!=null&&this.raise(u.UnexpectedPrivateField,{at:r}),n!=null&&this.unexpected(n)}isLiteralPropertyName(){return Be(this.state.type)}isPrivateName(s){return s.type==="PrivateName"}getPrivateNameSV(s){return s.id.name}hasPropertyAsPrivateName(s){return(s.type==="MemberExpression"||s.type==="OptionalMemberExpression")&&this.isPrivateName(s.property)}isObjectProperty(s){return s.type==="ObjectProperty"}isObjectMethod(s){return s.type==="ObjectMethod"}initializeScopes(s=this.options.sourceType==="module"){const t=this.state.labels;this.state.labels=[];const e=this.exportedIdentifiers;this.exportedIdentifiers=new Set;const i=this.inModule;this.inModule=s;const r=this.scope,n=this.getScopeHandler();this.scope=new n(this,s);const o=this.prodParam;this.prodParam=new Si;const h=this.classScope;this.classScope=new xi(this);const l=this.expressionScope;return this.expressionScope=new gi(this),()=>{this.state.labels=t,this.exportedIdentifiers=e,this.inModule=i,this.scope=r,this.prodParam=o,this.classScope=h,this.expressionScope=l}}enterInitialScopes(){let s=rt;this.inModule&&(s|=_t),this.scope.enter(Z),this.prodParam.enter(s)}checkDestructuringPrivate(s){const{privateKeyLoc:t}=s;t!==null&&this.expectPlugin("destructuringPrivate",t)}}class Et{constructor(){this.shorthandAssignLoc=null,this.doubleProtoLoc=null,this.privateKeyLoc=null,this.optionalParametersLoc=null}}class Ot{constructor(s,t,e){this.type="",this.start=t,this.end=0,this.loc=new Nt(e),s!=null&&s.options.ranges&&(this.range=[t,0]),s!=null&&s.filename&&(this.loc.filename=s.filename)}}const xe=Ot.prototype;xe.__clone=function(){const a=new Ot(void 0,this.start,this.loc.start),s=Object.keys(this);for(let t=0,e=s.length;t<e;t++){const i=s[t];i!=="leadingComments"&&i!=="trailingComments"&&i!=="innerComments"&&(a[i]=this[i])}return a};function Ei(a){return U(a)}function U(a){const{type:s,start:t,end:e,loc:i,range:r,extra:n,name:o}=a,h=Object.create(xe);return h.type=s,h.start=t,h.end=e,h.loc=i,h.range=r,h.extra=n,h.name=o,s==="Placeholder"&&(h.expectedNode=a.expectedNode),h}function wi(a){const{type:s,start:t,end:e,loc:i,range:r,extra:n}=a;if(s==="Placeholder")return Ei(a);const o=Object.create(xe);return o.type=s,o.start=t,o.end=e,o.loc=i,o.range=r,a.raw!==void 0?o.raw=a.raw:o.extra=n,o.value=a.value,o}class Ii extends Ci{startNode(){return new Ot(this,this.state.start,this.state.startLoc)}startNodeAt(s){return new Ot(this,s.index,s)}startNodeAtNode(s){return this.startNodeAt(s.loc.start)}finishNode(s,t){return this.finishNodeAt(s,t,this.state.lastTokEndLoc)}finishNodeAt(s,t,e){return s.type=t,s.end=e.index,s.loc.end=e,this.options.ranges&&(s.range[1]=e.index),this.options.attachComment&&this.processComment(s),s}resetStartLocation(s,t){s.start=t.index,s.loc.start=t,this.options.ranges&&(s.range[0]=t.index)}resetEndLocation(s,t=this.state.lastTokEndLoc){s.end=t.index,s.loc.end=t,this.options.ranges&&(s.range[1]=t.index)}resetStartLocationFromNode(s,t){this.resetStartLocation(s,t.loc.start)}}const Ni=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),P=_`flow`({AmbiguousConditionalArrow:"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate.",AmbiguousDeclareModuleKind:"Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module.",AssignReservedType:({reservedType:a})=>`Cannot overwrite reserved type ${a}.`,DeclareClassElement:"The `declare` modifier can only appear on class fields.",DeclareClassFieldInitializer:"Initializers are not allowed in fields with the `declare` modifier.",DuplicateDeclareModuleExports:"Duplicate `declare module.exports` statement.",EnumBooleanMemberNotInitialized:({memberName:a,enumName:s})=>`Boolean enum members need to be initialized. Use either \`${a} = true,\` or \`${a} = false,\` in enum \`${s}\`.`,EnumDuplicateMemberName:({memberName:a,enumName:s})=>`Enum member names need to be unique, but the name \`${a}\` has already been used before in enum \`${s}\`.`,EnumInconsistentMemberValues:({enumName:a})=>`Enum \`${a}\` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.`,EnumInvalidExplicitType:({invalidEnumType:a,enumName:s})=>`Enum type \`${a}\` is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${s}\`.`,EnumInvalidExplicitTypeUnknownSupplied:({enumName:a})=>`Supplied enum type is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${a}\`.`,EnumInvalidMemberInitializerPrimaryType:({enumName:a,memberName:s,explicitType:t})=>`Enum \`${a}\` has type \`${t}\`, so the initializer of \`${s}\` needs to be a ${t} literal.`,EnumInvalidMemberInitializerSymbolType:({enumName:a,memberName:s})=>`Symbol enum members cannot be initialized. Use \`${s},\` in enum \`${a}\`.`,EnumInvalidMemberInitializerUnknownType:({enumName:a,memberName:s})=>`The enum member initializer for \`${s}\` needs to be a literal (either a boolean, number, or string) in enum \`${a}\`.`,EnumInvalidMemberName:({enumName:a,memberName:s,suggestion:t})=>`Enum member names cannot start with lowercase 'a' through 'z'. Instead of using \`${s}\`, consider using \`${t}\`, in enum \`${a}\`.`,EnumNumberMemberNotInitialized:({enumName:a,memberName:s})=>`Number enum members need to be initialized, e.g. \`${s} = 1\` in enum \`${a}\`.`,EnumStringMemberInconsistentlyInitailized:({enumName:a})=>`String enum members need to consistently either all use initializers, or use no initializers, in enum \`${a}\`.`,GetterMayNotHaveThisParam:"A getter cannot have a `this` parameter.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` or `typeof` keyword.",ImportTypeShorthandOnlyInPureImport:"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements.",InexactInsideExact:"Explicit inexact syntax cannot appear inside an explicit exact object type.",InexactInsideNonObject:"Explicit inexact syntax cannot appear in class or interface definitions.",InexactVariance:"Explicit inexact syntax cannot have variance.",InvalidNonTypeImportInDeclareModule:"Imports within a `declare module` body must always be `import type` or `import typeof`.",MissingTypeParamDefault:"Type parameter declaration needs a default, since a preceding type parameter declaration has a default.",NestedDeclareModule:"`declare module` cannot be used inside another `declare module`.",NestedFlowComment:"Cannot have a flow comment inside another flow comment.",PatternIsOptional:Object.assign({message:"A binding pattern parameter cannot be optional in an implementation signature."},{reasonCode:"OptionalBindingPattern"}),SetterMayNotHaveThisParam:"A setter cannot have a `this` parameter.",SpreadVariance:"Spread properties cannot have variance.",ThisParamAnnotationRequired:"A type annotation is required for the `this` parameter.",ThisParamBannedInConstructor:"Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions.",ThisParamMayNotBeOptional:"The `this` parameter cannot be optional.",ThisParamMustBeFirst:"The `this` parameter must be the first function parameter.",ThisParamNoDefault:"The `this` parameter may not have a default value.",TypeBeforeInitializer:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeCastInPattern:"The type cast expression is expected to be wrapped with parenthesis.",UnexpectedExplicitInexactInObject:"Explicit inexact syntax must appear at the end of an inexact object.",UnexpectedReservedType:({reservedType:a})=>`Unexpected reserved type ${a}.`,UnexpectedReservedUnderscore:"`_` is only allowed as a type argument to call or new.",UnexpectedSpaceBetweenModuloChecks:"Spaces between `%` and `checks` are not allowed here.",UnexpectedSpreadType:"Spread operator cannot appear in class or interface definitions.",UnexpectedSubtractionOperand:'Unexpected token, expected "number" or "bigint".',UnexpectedTokenAfterTypeParameter:"Expected an arrow function after this type parameter declaration.",UnexpectedTypeParameterBeforeAsyncArrowFunction:"Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`.",UnsupportedDeclareExportKind:({unsupportedExportKind:a,suggestion:s})=>`\`declare export ${a}\` is not supported. Use \`${s}\` instead.`,UnsupportedStatementInDeclareModule:"Only declares and type imports are allowed inside declare module.",UnterminatedFlowComment:"Unterminated flow-comment."});function ki(a){return a.type==="DeclareExportAllDeclaration"||a.type==="DeclareExportDeclaration"&&(!a.declaration||a.declaration.type!=="TypeAlias"&&a.declaration.type!=="InterfaceDeclaration")}function Vt(a){return a.importKind==="type"||a.importKind==="typeof"}function Ie(a){return D(a)&&a!==97}const vi={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"};function Li(a,s){const t=[],e=[];for(let i=0;i<a.length;i++)(s(a[i],i,a)?t:e).push(a[i]);return[t,e]}const Di=/\*?\s*@((?:no)?flow)\b/;var Mi=a=>class extends a{constructor(...t){super(...t),this.flowPragma=void 0}getScopeHandler(){return ri}shouldParseTypes(){return this.getPluginOption("flow","all")||this.flowPragma==="flow"}shouldParseEnums(){return!!this.getPluginOption("flow","enums")}finishToken(t,e){t!==131&&t!==13&&t!==28&&this.flowPragma===void 0&&(this.flowPragma=null),super.finishToken(t,e)}addComment(t){if(this.flowPragma===void 0){const e=Di.exec(t.value);if(e)if(e[1]==="flow")this.flowPragma="flow";else if(e[1]==="noflow")this.flowPragma="noflow";else throw new Error("Unexpected flow pragma")}super.addComment(t)}flowParseTypeInitialiser(t){const e=this.state.inType;this.state.inType=!0,this.expect(t||14);const i=this.flowParseType();return this.state.inType=e,i}flowParsePredicate(){const t=this.startNode(),e=this.state.startLoc;return this.next(),this.expectContextual(108),this.state.lastTokStart>e.index+1&&this.raise(P.UnexpectedSpaceBetweenModuloChecks,{at:e}),this.eat(10)?(t.value=super.parseExpression(),this.expect(11),this.finishNode(t,"DeclaredPredicate")):this.finishNode(t,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){const t=this.state.inType;this.state.inType=!0,this.expect(14);let e=null,i=null;return this.match(54)?(this.state.inType=t,i=this.flowParsePredicate()):(e=this.flowParseType(),this.state.inType=t,this.match(54)&&(i=this.flowParsePredicate())),[e,i]}flowParseDeclareClass(t){return this.next(),this.flowParseInterfaceish(t,!0),this.finishNode(t,"DeclareClass")}flowParseDeclareFunction(t){this.next();const e=t.id=this.parseIdentifier(),i=this.startNode(),r=this.startNode();this.match(47)?i.typeParameters=this.flowParseTypeParameterDeclaration():i.typeParameters=null,this.expect(10);const n=this.flowParseFunctionTypeParams();return i.params=n.params,i.rest=n.rest,i.this=n._this,this.expect(11),[i.returnType,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),r.typeAnnotation=this.finishNode(i,"FunctionTypeAnnotation"),e.typeAnnotation=this.finishNode(r,"TypeAnnotation"),this.resetEndLocation(e),this.semicolon(),this.scope.declareName(t.id.name,Qs,t.id.loc.start),this.finishNode(t,"DeclareFunction")}flowParseDeclare(t,e){if(this.match(80))return this.flowParseDeclareClass(t);if(this.match(68))return this.flowParseDeclareFunction(t);if(this.match(74))return this.flowParseDeclareVariable(t);if(this.eatContextual(125))return this.match(16)?this.flowParseDeclareModuleExports(t):(e&&this.raise(P.NestedDeclareModule,{at:this.state.lastTokStartLoc}),this.flowParseDeclareModule(t));if(this.isContextual(128))return this.flowParseDeclareTypeAlias(t);if(this.isContextual(129))return this.flowParseDeclareOpaqueType(t);if(this.isContextual(127))return this.flowParseDeclareInterface(t);if(this.match(82))return this.flowParseDeclareExportDeclaration(t,e);this.unexpected()}flowParseDeclareVariable(t){return this.next(),t.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(t.id.name,Dt,t.id.loc.start),this.semicolon(),this.finishNode(t,"DeclareVariable")}flowParseDeclareModule(t){this.scope.enter(Q),this.match(131)?t.id=super.parseExprAtom():t.id=this.parseIdentifier();const e=t.body=this.startNode(),i=e.body=[];for(this.expect(5);!this.match(8);){let o=this.startNode();this.match(83)?(this.next(),!this.isContextual(128)&&!this.match(87)&&this.raise(P.InvalidNonTypeImportInDeclareModule,{at:this.state.lastTokStartLoc}),super.parseImport(o)):(this.expectContextual(123,P.UnsupportedStatementInDeclareModule),o=this.flowParseDeclare(o,!0)),i.push(o)}this.scope.exit(),this.expect(8),this.finishNode(e,"BlockStatement");let r=null,n=!1;return i.forEach(o=>{ki(o)?(r==="CommonJS"&&this.raise(P.AmbiguousDeclareModuleKind,{at:o}),r="ES"):o.type==="DeclareModuleExports"&&(n&&this.raise(P.DuplicateDeclareModuleExports,{at:o}),r==="ES"&&this.raise(P.AmbiguousDeclareModuleKind,{at:o}),r="CommonJS",n=!0)}),t.kind=r||"CommonJS",this.finishNode(t,"DeclareModule")}flowParseDeclareExportDeclaration(t,e){if(this.expect(82),this.eat(65))return this.match(68)||this.match(80)?t.declaration=this.flowParseDeclare(this.startNode()):(t.declaration=this.flowParseType(),this.semicolon()),t.default=!0,this.finishNode(t,"DeclareExportDeclaration");if(this.match(75)||this.isLet()||(this.isContextual(128)||this.isContextual(127))&&!e){const i=this.state.value;throw this.raise(P.UnsupportedDeclareExportKind,{at:this.state.startLoc,unsupportedExportKind:i,suggestion:vi[i]})}if(this.match(74)||this.match(68)||this.match(80)||this.isContextual(129))return t.declaration=this.flowParseDeclare(this.startNode()),t.default=!1,this.finishNode(t,"DeclareExportDeclaration");if(this.match(55)||this.match(5)||this.isContextual(127)||this.isContextual(128)||this.isContextual(129))return t=this.parseExport(t,null),t.type==="ExportNamedDeclaration"&&(t.type="ExportDeclaration",t.default=!1,delete t.exportKind),t.type="Declare"+t.type,t;this.unexpected()}flowParseDeclareModuleExports(t){return this.next(),this.expectContextual(109),t.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(t,"DeclareModuleExports")}flowParseDeclareTypeAlias(t){this.next();const e=this.flowParseTypeAlias(t);return e.type="DeclareTypeAlias",e}flowParseDeclareOpaqueType(t){this.next();const e=this.flowParseOpaqueType(t,!0);return e.type="DeclareOpaqueType",e}flowParseDeclareInterface(t){return this.next(),this.flowParseInterfaceish(t,!1),this.finishNode(t,"DeclareInterface")}flowParseInterfaceish(t,e){if(t.id=this.flowParseRestrictedIdentifier(!e,!0),this.scope.declareName(t.id.name,e?Je:it,t.id.loc.start),this.match(47)?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.extends=[],this.eat(81))do t.extends.push(this.flowParseInterfaceExtends());while(!e&&this.eat(12));if(e){if(t.implements=[],t.mixins=[],this.eatContextual(115))do t.mixins.push(this.flowParseInterfaceExtends());while(this.eat(12));if(this.eatContextual(111))do t.implements.push(this.flowParseInterfaceExtends());while(this.eat(12))}t.body=this.flowParseObjectType({allowStatic:e,allowExact:!1,allowSpread:!1,allowProto:e,allowInexact:!1})}flowParseInterfaceExtends(){const t=this.startNode();return t.id=this.flowParseQualifiedTypeIdentifier(),this.match(47)?t.typeParameters=this.flowParseTypeParameterInstantiation():t.typeParameters=null,this.finishNode(t,"InterfaceExtends")}flowParseInterface(t){return this.flowParseInterfaceish(t,!1),this.finishNode(t,"InterfaceDeclaration")}checkNotUnderscore(t){t==="_"&&this.raise(P.UnexpectedReservedUnderscore,{at:this.state.startLoc})}checkReservedType(t,e,i){Ni.has(t)&&this.raise(i?P.AssignReservedType:P.UnexpectedReservedType,{at:e,reservedType:t})}flowParseRestrictedIdentifier(t,e){return this.checkReservedType(this.state.value,this.state.startLoc,e),this.parseIdentifier(t)}flowParseTypeAlias(t){return t.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(t.id.name,it,t.id.loc.start),this.match(47)?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.right=this.flowParseTypeInitialiser(29),this.semicolon(),this.finishNode(t,"TypeAlias")}flowParseOpaqueType(t,e){return this.expectContextual(128),t.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(t.id.name,it,t.id.loc.start),this.match(47)?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.supertype=null,this.match(14)&&(t.supertype=this.flowParseTypeInitialiser(14)),t.impltype=null,e||(t.impltype=this.flowParseTypeInitialiser(29)),this.semicolon(),this.finishNode(t,"OpaqueType")}flowParseTypeParameter(t=!1){const e=this.state.startLoc,i=this.startNode(),r=this.flowParseVariance(),n=this.flowParseTypeAnnotatableIdentifier();return i.name=n.name,i.variance=r,i.bound=n.typeAnnotation,this.match(29)?(this.eat(29),i.default=this.flowParseType()):t&&this.raise(P.MissingTypeParamDefault,{at:e}),this.finishNode(i,"TypeParameter")}flowParseTypeParameterDeclaration(){const t=this.state.inType,e=this.startNode();e.params=[],this.state.inType=!0,this.match(47)||this.match(140)?this.next():this.unexpected();let i=!1;do{const r=this.flowParseTypeParameter(i);e.params.push(r),r.default&&(i=!0),this.match(48)||this.expect(12)}while(!this.match(48));return this.expect(48),this.state.inType=t,this.finishNode(e,"TypeParameterDeclaration")}flowParseTypeParameterInstantiation(){const t=this.startNode(),e=this.state.inType;t.params=[],this.state.inType=!0,this.expect(47);const i=this.state.noAnonFunctionType;for(this.state.noAnonFunctionType=!1;!this.match(48);)t.params.push(this.flowParseType()),this.match(48)||this.expect(12);return this.state.noAnonFunctionType=i,this.expect(48),this.state.inType=e,this.finishNode(t,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){const t=this.startNode(),e=this.state.inType;for(t.params=[],this.state.inType=!0,this.expect(47);!this.match(48);)t.params.push(this.flowParseTypeOrImplicitInstantiation()),this.match(48)||this.expect(12);return this.expect(48),this.state.inType=e,this.finishNode(t,"TypeParameterInstantiation")}flowParseInterfaceType(){const t=this.startNode();if(this.expectContextual(127),t.extends=[],this.eat(81))do t.extends.push(this.flowParseInterfaceExtends());while(this.eat(12));return t.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(t,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(132)||this.match(131)?super.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(t,e,i){return t.static=e,this.lookahead().type===14?(t.id=this.flowParseObjectPropertyKey(),t.key=this.flowParseTypeInitialiser()):(t.id=null,t.key=this.flowParseType()),this.expect(3),t.value=this.flowParseTypeInitialiser(),t.variance=i,this.finishNode(t,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(t,e){return t.static=e,t.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(47)||this.match(10)?(t.method=!0,t.optional=!1,t.value=this.flowParseObjectTypeMethodish(this.startNodeAt(t.loc.start))):(t.method=!1,this.eat(17)&&(t.optional=!0),t.value=this.flowParseTypeInitialiser()),this.finishNode(t,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(t){for(t.params=[],t.rest=null,t.typeParameters=null,t.this=null,this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),this.expect(10),this.match(78)&&(t.this=this.flowParseFunctionTypeParam(!0),t.this.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)t.params.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(t.rest=this.flowParseFunctionTypeParam(!1)),this.expect(11),t.returnType=this.flowParseTypeInitialiser(),this.finishNode(t,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(t,e){const i=this.startNode();return t.static=e,t.value=this.flowParseObjectTypeMethodish(i),this.finishNode(t,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:t,allowExact:e,allowSpread:i,allowProto:r,allowInexact:n}){const o=this.state.inType;this.state.inType=!0;const h=this.startNode();h.callProperties=[],h.properties=[],h.indexers=[],h.internalSlots=[];let l,c,p=!1;for(e&&this.match(6)?(this.expect(6),l=9,c=!0):(this.expect(5),l=8,c=!1),h.exact=c;!this.match(l);){let m=!1,g=null,I=null;const E=this.startNode();if(r&&this.isContextual(116)){const N=this.lookahead();N.type!==14&&N.type!==17&&(this.next(),g=this.state.startLoc,t=!1)}if(t&&this.isContextual(104)){const N=this.lookahead();N.type!==14&&N.type!==17&&(this.next(),m=!0)}const w=this.flowParseVariance();if(this.eat(0))g!=null&&this.unexpected(g),this.eat(0)?(w&&this.unexpected(w.loc.start),h.internalSlots.push(this.flowParseObjectTypeInternalSlot(E,m))):h.indexers.push(this.flowParseObjectTypeIndexer(E,m,w));else if(this.match(10)||this.match(47))g!=null&&this.unexpected(g),w&&this.unexpected(w.loc.start),h.callProperties.push(this.flowParseObjectTypeCallProperty(E,m));else{let N="init";if(this.isContextual(98)||this.isContextual(103)){const nt=this.lookahead();Be(nt.type)&&(N=this.state.value,this.next())}const xt=this.flowParseObjectTypeProperty(E,m,g,w,N,i,n??!c);xt===null?(p=!0,I=this.state.lastTokStartLoc):h.properties.push(xt)}this.flowObjectTypeSemicolon(),I&&!this.match(8)&&!this.match(9)&&this.raise(P.UnexpectedExplicitInexactInObject,{at:I})}this.expect(l),i&&(h.inexact=p);const d=this.finishNode(h,"ObjectTypeAnnotation");return this.state.inType=o,d}flowParseObjectTypeProperty(t,e,i,r,n,o,h){if(this.eat(21))return this.match(12)||this.match(13)||this.match(8)||this.match(9)?(o?h||this.raise(P.InexactInsideExact,{at:this.state.lastTokStartLoc}):this.raise(P.InexactInsideNonObject,{at:this.state.lastTokStartLoc}),r&&this.raise(P.InexactVariance,{at:r}),null):(o||this.raise(P.UnexpectedSpreadType,{at:this.state.lastTokStartLoc}),i!=null&&this.unexpected(i),r&&this.raise(P.SpreadVariance,{at:r}),t.argument=this.flowParseType(),this.finishNode(t,"ObjectTypeSpreadProperty"));{t.key=this.flowParseObjectPropertyKey(),t.static=e,t.proto=i!=null,t.kind=n;let l=!1;return this.match(47)||this.match(10)?(t.method=!0,i!=null&&this.unexpected(i),r&&this.unexpected(r.loc.start),t.value=this.flowParseObjectTypeMethodish(this.startNodeAt(t.loc.start)),(n==="get"||n==="set")&&this.flowCheckGetterSetterParams(t),!o&&t.key.name==="constructor"&&t.value.this&&this.raise(P.ThisParamBannedInConstructor,{at:t.value.this})):(n!=="init"&&this.unexpected(),t.method=!1,this.eat(17)&&(l=!0),t.value=this.flowParseTypeInitialiser(),t.variance=r),t.optional=l,this.finishNode(t,"ObjectTypeProperty")}}flowCheckGetterSetterParams(t){const e=t.kind==="get"?0:1,i=t.value.params.length+(t.value.rest?1:0);t.value.this&&this.raise(t.kind==="get"?P.GetterMayNotHaveThisParam:P.SetterMayNotHaveThisParam,{at:t.value.this}),i!==e&&this.raise(t.kind==="get"?u.BadGetterArity:u.BadSetterArity,{at:t}),t.kind==="set"&&t.value.rest&&this.raise(u.BadSetterRestParameter,{at:t})}flowObjectTypeSemicolon(){!this.eat(13)&&!this.eat(12)&&!this.match(8)&&!this.match(9)&&this.unexpected()}flowParseQualifiedTypeIdentifier(t,e){var i;(i=t)!=null||(t=this.state.startLoc);let r=e||this.flowParseRestrictedIdentifier(!0);for(;this.eat(16);){const n=this.startNodeAt(t);n.qualification=r,n.id=this.flowParseRestrictedIdentifier(!0),r=this.finishNode(n,"QualifiedTypeIdentifier")}return r}flowParseGenericType(t,e){const i=this.startNodeAt(t);return i.typeParameters=null,i.id=this.flowParseQualifiedTypeIdentifier(t,e),this.match(47)&&(i.typeParameters=this.flowParseTypeParameterInstantiation()),this.finishNode(i,"GenericTypeAnnotation")}flowParseTypeofType(){const t=this.startNode();return this.expect(87),t.argument=this.flowParsePrimaryType(),this.finishNode(t,"TypeofTypeAnnotation")}flowParseTupleType(){const t=this.startNode();for(t.types=[],this.expect(0);this.state.pos<this.length&&!this.match(3)&&(t.types.push(this.flowParseType()),!this.match(3));)this.expect(12);return this.expect(3),this.finishNode(t,"TupleTypeAnnotation")}flowParseFunctionTypeParam(t){let e=null,i=!1,r=null;const n=this.startNode(),o=this.lookahead(),h=this.state.type===78;return o.type===14||o.type===17?(h&&!t&&this.raise(P.ThisParamMustBeFirst,{at:n}),e=this.parseIdentifier(h),this.eat(17)&&(i=!0,h&&this.raise(P.ThisParamMayNotBeOptional,{at:n})),r=this.flowParseTypeInitialiser()):r=this.flowParseType(),n.name=e,n.optional=i,n.typeAnnotation=r,this.finishNode(n,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(t){const e=this.startNodeAt(t.loc.start);return e.name=null,e.optional=!1,e.typeAnnotation=t,this.finishNode(e,"FunctionTypeParam")}flowParseFunctionTypeParams(t=[]){let e=null,i=null;for(this.match(78)&&(i=this.flowParseFunctionTypeParam(!0),i.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)t.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(e=this.flowParseFunctionTypeParam(!1)),{params:t,rest:e,_this:i}}flowIdentToTypeAnnotation(t,e,i){switch(i.name){case"any":return this.finishNode(e,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(e,"BooleanTypeAnnotation");case"mixed":return this.finishNode(e,"MixedTypeAnnotation");case"empty":return this.finishNode(e,"EmptyTypeAnnotation");case"number":return this.finishNode(e,"NumberTypeAnnotation");case"string":return this.finishNode(e,"StringTypeAnnotation");case"symbol":return this.finishNode(e,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(i.name),this.flowParseGenericType(t,i)}}flowParsePrimaryType(){const t=this.state.startLoc,e=this.startNode();let i,r,n=!1;const o=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,r=this.flowParseTupleType(),this.state.noAnonFunctionType=o,r;case 47:return e.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),i=this.flowParseFunctionTypeParams(),e.params=i.params,e.rest=i.rest,e.this=i._this,this.expect(11),this.expect(19),e.returnType=this.flowParseType(),this.finishNode(e,"FunctionTypeAnnotation");case 10:if(this.next(),!this.match(11)&&!this.match(21))if(S(this.state.type)||this.match(78)){const h=this.lookahead().type;n=h!==17&&h!==14}else n=!0;if(n){if(this.state.noAnonFunctionType=!1,r=this.flowParseType(),this.state.noAnonFunctionType=o,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&this.lookahead().type===19))return this.expect(11),r;this.eat(12)}return r?i=this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(r)]):i=this.flowParseFunctionTypeParams(),e.params=i.params,e.rest=i.rest,e.this=i._this,this.expect(11),this.expect(19),e.returnType=this.flowParseType(),e.typeParameters=null,this.finishNode(e,"FunctionTypeAnnotation");case 131:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 85:case 86:return e.value=this.match(85),this.next(),this.finishNode(e,"BooleanLiteralTypeAnnotation");case 53:if(this.state.value==="-"){if(this.next(),this.match(132))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",e);if(this.match(133))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",e);throw this.raise(P.UnexpectedSubtractionOperand,{at:this.state.startLoc})}this.unexpected();return;case 132:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 133:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 88:return this.next(),this.finishNode(e,"VoidTypeAnnotation");case 84:return this.next(),this.finishNode(e,"NullLiteralTypeAnnotation");case 78:return this.next(),this.finishNode(e,"ThisTypeAnnotation");case 55:return this.next(),this.finishNode(e,"ExistsTypeAnnotation");case 87:return this.flowParseTypeofType();default:if(ae(this.state.type)){const h=$(this.state.type);return this.next(),super.createIdentifier(e,h)}else if(S(this.state.type))return this.isContextual(127)?this.flowParseInterfaceType():this.flowIdentToTypeAnnotation(t,e,this.parseIdentifier())}this.unexpected()}flowParsePostfixType(){const t=this.state.startLoc;let e=this.flowParsePrimaryType(),i=!1;for(;(this.match(0)||this.match(18))&&!this.canInsertSemicolon();){const r=this.startNodeAt(t),n=this.eat(18);i=i||n,this.expect(0),!n&&this.match(3)?(r.elementType=e,this.next(),e=this.finishNode(r,"ArrayTypeAnnotation")):(r.objectType=e,r.indexType=this.flowParseType(),this.expect(3),i?(r.optional=n,e=this.finishNode(r,"OptionalIndexedAccessType")):e=this.finishNode(r,"IndexedAccessType"))}return e}flowParsePrefixType(){const t=this.startNode();return this.eat(17)?(t.typeAnnotation=this.flowParsePrefixType(),this.finishNode(t,"NullableTypeAnnotation")):this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){const t=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){const e=this.startNodeAt(t.loc.start);return e.params=[this.reinterpretTypeAsFunctionTypeParam(t)],e.rest=null,e.this=null,e.returnType=this.flowParseType(),e.typeParameters=null,this.finishNode(e,"FunctionTypeAnnotation")}return t}flowParseIntersectionType(){const t=this.startNode();this.eat(45);const e=this.flowParseAnonFunctionWithoutParens();for(t.types=[e];this.eat(45);)t.types.push(this.flowParseAnonFunctionWithoutParens());return t.types.length===1?e:this.finishNode(t,"IntersectionTypeAnnotation")}flowParseUnionType(){const t=this.startNode();this.eat(43);const e=this.flowParseIntersectionType();for(t.types=[e];this.eat(43);)t.types.push(this.flowParseIntersectionType());return t.types.length===1?e:this.finishNode(t,"UnionTypeAnnotation")}flowParseType(){const t=this.state.inType;this.state.inType=!0;const e=this.flowParseUnionType();return this.state.inType=t,e}flowParseTypeOrImplicitInstantiation(){if(this.state.type===130&&this.state.value==="_"){const t=this.state.startLoc,e=this.parseIdentifier();return this.flowParseGenericType(t,e)}else return this.flowParseType()}flowParseTypeAnnotation(){const t=this.startNode();return t.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(t,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(t){const e=t?this.parseIdentifier():this.flowParseRestrictedIdentifier();return this.match(14)&&(e.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(e)),e}typeCastToParameter(t){return t.expression.typeAnnotation=t.typeAnnotation,this.resetEndLocation(t.expression,t.typeAnnotation.loc.end),t.expression}flowParseVariance(){let t=null;return this.match(53)?(t=this.startNode(),this.state.value==="+"?t.kind="plus":t.kind="minus",this.next(),this.finishNode(t,"Variance")):t}parseFunctionBody(t,e,i=!1){if(e){this.forwardNoArrowParamsConversionAt(t,()=>super.parseFunctionBody(t,!0,i));return}super.parseFunctionBody(t,!1,i)}parseFunctionBodyAndFinish(t,e,i=!1){if(this.match(14)){const r=this.startNode();[r.typeAnnotation,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),t.returnType=r.typeAnnotation?this.finishNode(r,"TypeAnnotation"):null}return super.parseFunctionBodyAndFinish(t,e,i)}parseStatementLike(t){if(this.state.strict&&this.isContextual(127)){const i=this.lookahead();if(D(i.type)){const r=this.startNode();return this.next(),this.flowParseInterface(r)}}else if(this.shouldParseEnums()&&this.isContextual(124)){const i=this.startNode();return this.next(),this.flowParseEnumDeclaration(i)}const e=super.parseStatementLike(t);return this.flowPragma===void 0&&!this.isValidDirective(e)&&(this.flowPragma=null),e}parseExpressionStatement(t,e,i){if(e.type==="Identifier"){if(e.name==="declare"){if(this.match(80)||S(this.state.type)||this.match(68)||this.match(74)||this.match(82))return this.flowParseDeclare(t)}else if(S(this.state.type)){if(e.name==="interface")return this.flowParseInterface(t);if(e.name==="type")return this.flowParseTypeAlias(t);if(e.name==="opaque")return this.flowParseOpaqueType(t,!1)}}return super.parseExpressionStatement(t,e,i)}shouldParseExportDeclaration(){const{type:t}=this.state;return ge(t)||this.shouldParseEnums()&&t===124?!this.state.containsEsc:super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){const{type:t}=this.state;return ge(t)||this.shouldParseEnums()&&t===124?this.state.containsEsc:super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.shouldParseEnums()&&this.isContextual(124)){const t=this.startNode();return this.next(),this.flowParseEnumDeclaration(t)}return super.parseExportDefaultExpression()}parseConditional(t,e,i){if(!this.match(17))return t;if(this.state.maybeInArrowParameters){const d=this.lookaheadCharCode();if(d===44||d===61||d===58||d===41)return this.setOptionalParametersError(i),t}this.expect(17);const r=this.state.clone(),n=this.state.noArrowAt,o=this.startNodeAt(e);let{consequent:h,failed:l}=this.tryParseConditionalConsequent(),[c,p]=this.getArrowLikeExpressions(h);if(l||p.length>0){const d=[...n];if(p.length>0){this.state=r,this.state.noArrowAt=d;for(let m=0;m<p.length;m++)d.push(p[m].start);({consequent:h,failed:l}=this.tryParseConditionalConsequent()),[c,p]=this.getArrowLikeExpressions(h)}l&&c.length>1&&this.raise(P.AmbiguousConditionalArrow,{at:r.startLoc}),l&&c.length===1&&(this.state=r,d.push(c[0].start),this.state.noArrowAt=d,{consequent:h,failed:l}=this.tryParseConditionalConsequent())}return this.getArrowLikeExpressions(h,!0),this.state.noArrowAt=n,this.expect(14),o.test=t,o.consequent=h,o.alternate=this.forwardNoArrowParamsConversionAt(o,()=>this.parseMaybeAssign(void 0,void 0)),this.finishNode(o,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);const t=this.parseMaybeAssignAllowIn(),e=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:t,failed:e}}getArrowLikeExpressions(t,e){const i=[t],r=[];for(;i.length!==0;){const n=i.pop();n.type==="ArrowFunctionExpression"?(n.typeParameters||!n.returnType?this.finishArrowValidation(n):r.push(n),i.push(n.body)):n.type==="ConditionalExpression"&&(i.push(n.consequent),i.push(n.alternate))}return e?(r.forEach(n=>this.finishArrowValidation(n)),[r,[]]):Li(r,n=>n.params.every(o=>this.isAssignable(o,!0)))}finishArrowValidation(t){var e;this.toAssignableList(t.params,(e=t.extra)==null?void 0:e.trailingCommaLoc,!1),this.scope.enter(R|he),super.checkParams(t,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(t,e){let i;return this.state.noArrowParamsConversionAt.indexOf(t.start)!==-1?(this.state.noArrowParamsConversionAt.push(this.state.start),i=e(),this.state.noArrowParamsConversionAt.pop()):i=e(),i}parseParenItem(t,e){if(t=super.parseParenItem(t,e),this.eat(17)&&(t.optional=!0,this.resetEndLocation(t)),this.match(14)){const i=this.startNodeAt(e);return i.expression=t,i.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(i,"TypeCastExpression")}return t}assertModuleNodeAllowed(t){t.type==="ImportDeclaration"&&(t.importKind==="type"||t.importKind==="typeof")||t.type==="ExportNamedDeclaration"&&t.exportKind==="type"||t.type==="ExportAllDeclaration"&&t.exportKind==="type"||super.assertModuleNodeAllowed(t)}parseExport(t,e){const i=super.parseExport(t,e);return(i.type==="ExportNamedDeclaration"||i.type==="ExportAllDeclaration")&&(i.exportKind=i.exportKind||"value"),i}parseExportDeclaration(t){if(this.isContextual(128)){t.exportKind="type";const e=this.startNode();return this.next(),this.match(5)?(t.specifiers=this.parseExportSpecifiers(!0),super.parseExportFrom(t),null):this.flowParseTypeAlias(e)}else if(this.isContextual(129)){t.exportKind="type";const e=this.startNode();return this.next(),this.flowParseOpaqueType(e,!1)}else if(this.isContextual(127)){t.exportKind="type";const e=this.startNode();return this.next(),this.flowParseInterface(e)}else if(this.shouldParseEnums()&&this.isContextual(124)){t.exportKind="value";const e=this.startNode();return this.next(),this.flowParseEnumDeclaration(e)}else return super.parseExportDeclaration(t)}eatExportStar(t){return super.eatExportStar(t)?!0:this.isContextual(128)&&this.lookahead().type===55?(t.exportKind="type",this.next(),this.next(),!0):!1}maybeParseExportNamespaceSpecifier(t){const{startLoc:e}=this.state,i=super.maybeParseExportNamespaceSpecifier(t);return i&&t.exportKind==="type"&&this.unexpected(e),i}parseClassId(t,e,i){super.parseClassId(t,e,i),this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration())}parseClassMember(t,e,i){const{startLoc:r}=this.state;if(this.isContextual(123)){if(super.parseClassMemberFromModifier(t,e))return;e.declare=!0}super.parseClassMember(t,e,i),e.declare&&(e.type!=="ClassProperty"&&e.type!=="ClassPrivateProperty"&&e.type!=="PropertyDefinition"?this.raise(P.DeclareClassElement,{at:r}):e.value&&this.raise(P.DeclareClassFieldInitializer,{at:e.value}))}isIterator(t){return t==="iterator"||t==="asyncIterator"}readIterator(){const t=super.readWord1(),e="@@"+t;(!this.isIterator(t)||!this.state.inType)&&this.raise(u.InvalidIdentifier,{at:this.state.curPosition(),identifierName:e}),this.finishToken(130,e)}getTokenFromCode(t){const e=this.input.charCodeAt(this.state.pos+1);t===123&&e===124?this.finishOp(6,2):this.state.inType&&(t===62||t===60)?this.finishOp(t===62?48:47,1):this.state.inType&&t===63?e===46?this.finishOp(18,2):this.finishOp(17,1):Hs(t,e,this.input.charCodeAt(this.state.pos+2))?(this.state.pos+=2,this.readIterator()):super.getTokenFromCode(t)}isAssignable(t,e){return t.type==="TypeCastExpression"?this.isAssignable(t.expression,e):super.isAssignable(t,e)}toAssignable(t,e=!1){!e&&t.type==="AssignmentExpression"&&t.left.type==="TypeCastExpression"&&(t.left=this.typeCastToParameter(t.left)),super.toAssignable(t,e)}toAssignableList(t,e,i){for(let r=0;r<t.length;r++){const n=t[r];(n==null?void 0:n.type)==="TypeCastExpression"&&(t[r]=this.typeCastToParameter(n))}super.toAssignableList(t,e,i)}toReferencedList(t,e){for(let r=0;r<t.length;r++){var i;const n=t[r];n&&n.type==="TypeCastExpression"&&!((i=n.extra)!=null&&i.parenthesized)&&(t.length>1||!e)&&this.raise(P.TypeCastInPattern,{at:n.typeAnnotation})}return t}parseArrayLike(t,e,i,r){const n=super.parseArrayLike(t,e,i,r);return e&&!this.state.maybeInArrowParameters&&this.toReferencedList(n.elements),n}isValidLVal(t,e,i){return t==="TypeCastExpression"||super.isValidLVal(t,e,i)}parseClassProperty(t){return this.match(14)&&(t.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassProperty(t)}parseClassPrivateProperty(t){return this.match(14)&&(t.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassPrivateProperty(t)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(t){return!this.match(14)&&super.isNonstaticConstructor(t)}pushClassMethod(t,e,i,r,n,o){if(e.variance&&this.unexpected(e.variance.loc.start),delete e.variance,this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassMethod(t,e,i,r,n,o),e.params&&n){const h=e.params;h.length>0&&this.isThisParam(h[0])&&this.raise(P.ThisParamBannedInConstructor,{at:e})}else if(e.type==="MethodDefinition"&&n&&e.value.params){const h=e.value.params;h.length>0&&this.isThisParam(h[0])&&this.raise(P.ThisParamBannedInConstructor,{at:e})}}pushClassPrivateMethod(t,e,i,r){e.variance&&this.unexpected(e.variance.loc.start),delete e.variance,this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassPrivateMethod(t,e,i,r)}parseClassSuper(t){if(super.parseClassSuper(t),t.superClass&&this.match(47)&&(t.superTypeParameters=this.flowParseTypeParameterInstantiation()),this.isContextual(111)){this.next();const e=t.implements=[];do{const i=this.startNode();i.id=this.flowParseRestrictedIdentifier(!0),this.match(47)?i.typeParameters=this.flowParseTypeParameterInstantiation():i.typeParameters=null,e.push(this.finishNode(i,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(t){super.checkGetterSetterParams(t);const e=this.getObjectOrClassMethodParams(t);if(e.length>0){const i=e[0];this.isThisParam(i)&&t.kind==="get"?this.raise(P.GetterMayNotHaveThisParam,{at:i}):this.isThisParam(i)&&this.raise(P.SetterMayNotHaveThisParam,{at:i})}}parsePropertyNamePrefixOperator(t){t.variance=this.flowParseVariance()}parseObjPropValue(t,e,i,r,n,o,h){t.variance&&this.unexpected(t.variance.loc.start),delete t.variance;let l;this.match(47)&&!o&&(l=this.flowParseTypeParameterDeclaration(),this.match(10)||this.unexpected());const c=super.parseObjPropValue(t,e,i,r,n,o,h);return l&&((c.value||c).typeParameters=l),c}parseAssignableListItemTypes(t){return this.eat(17)&&(t.type!=="Identifier"&&this.raise(P.PatternIsOptional,{at:t}),this.isThisParam(t)&&this.raise(P.ThisParamMayNotBeOptional,{at:t}),t.optional=!0),this.match(14)?t.typeAnnotation=this.flowParseTypeAnnotation():this.isThisParam(t)&&this.raise(P.ThisParamAnnotationRequired,{at:t}),this.match(29)&&this.isThisParam(t)&&this.raise(P.ThisParamNoDefault,{at:t}),this.resetEndLocation(t),t}parseMaybeDefault(t,e){const i=super.parseMaybeDefault(t,e);return i.type==="AssignmentPattern"&&i.typeAnnotation&&i.right.start<i.typeAnnotation.start&&this.raise(P.TypeBeforeInitializer,{at:i.typeAnnotation}),i}shouldParseDefaultImport(t){return Vt(t)?Ie(this.state.type):super.shouldParseDefaultImport(t)}checkImportReflection(t){super.checkImportReflection(t),t.module&&t.importKind!=="value"&&this.raise(P.ImportReflectionHasImportType,{at:t.specifiers[0].loc.start})}parseImportSpecifierLocal(t,e,i){e.local=Vt(t)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),t.specifiers.push(this.finishImportSpecifier(e,i))}maybeParseDefaultImportSpecifier(t){t.importKind="value";let e=null;if(this.match(87)?e="typeof":this.isContextual(128)&&(e="type"),e){const i=this.lookahead(),{type:r}=i;e==="type"&&r===55&&this.unexpected(null,i.type),(Ie(r)||r===5||r===55)&&(this.next(),t.importKind=e)}return super.maybeParseDefaultImportSpecifier(t)}parseImportSpecifier(t,e,i,r,n){const o=t.imported;let h=null;o.type==="Identifier"&&(o.name==="type"?h="type":o.name==="typeof"&&(h="typeof"));let l=!1;if(this.isContextual(93)&&!this.isLookaheadContextual("as")){const p=this.parseIdentifier(!0);h!==null&&!D(this.state.type)?(t.imported=p,t.importKind=h,t.local=U(p)):(t.imported=o,t.importKind=null,t.local=this.parseIdentifier())}else{if(h!==null&&D(this.state.type))t.imported=this.parseIdentifier(!0),t.importKind=h;else{if(e)throw this.raise(u.ImportBindingIsString,{at:t,importName:o.value});t.imported=o,t.importKind=null}this.eatContextual(93)?t.local=this.parseIdentifier():(l=!0,t.local=U(t.imported))}const c=Vt(t);return i&&c&&this.raise(P.ImportTypeShorthandOnlyInPureImport,{at:t}),(i||c)&&this.checkReservedType(t.local.name,t.local.loc.start,!0),l&&!i&&!c&&this.checkReservedWord(t.local.name,t.loc.start,!0,!0),this.finishImportSpecifier(t,"ImportSpecifier")}parseBindingAtom(){switch(this.state.type){case 78:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseFunctionParams(t,e){const i=t.kind;i!=="get"&&i!=="set"&&this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),super.parseFunctionParams(t,e)}parseVarId(t,e){super.parseVarId(t,e),this.match(14)&&(t.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(t.id))}parseAsyncArrowFromCallExpression(t,e){if(this.match(14)){const i=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,t.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=i}return super.parseAsyncArrowFromCallExpression(t,e)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(t,e){var i;let r=null,n;if(this.hasPlugin("jsx")&&(this.match(140)||this.match(47))){if(r=this.state.clone(),n=this.tryParse(()=>super.parseMaybeAssign(t,e),r),!n.error)return n.node;const{context:l}=this.state,c=l[l.length-1];(c===C.j_oTag||c===C.j_expr)&&l.pop()}if((i=n)!=null&&i.error||this.match(47)){var o,h;r=r||this.state.clone();let l;const c=this.tryParse(d=>{var m;l=this.flowParseTypeParameterDeclaration();const g=this.forwardNoArrowParamsConversionAt(l,()=>{const E=super.parseMaybeAssign(t,e);return this.resetStartLocationFromNode(E,l),E});(m=g.extra)!=null&&m.parenthesized&&d();const I=this.maybeUnwrapTypeCastExpression(g);return I.type!=="ArrowFunctionExpression"&&d(),I.typeParameters=l,this.resetStartLocationFromNode(I,l),g},r);let p=null;if(c.node&&this.maybeUnwrapTypeCastExpression(c.node).type==="ArrowFunctionExpression"){if(!c.error&&!c.aborted)return c.node.async&&this.raise(P.UnexpectedTypeParameterBeforeAsyncArrowFunction,{at:l}),c.node;p=c.node}if((o=n)!=null&&o.node)return this.state=n.failState,n.node;if(p)return this.state=c.failState,p;throw(h=n)!=null&&h.thrown?n.error:c.thrown?c.error:this.raise(P.UnexpectedTokenAfterTypeParameter,{at:l})}return super.parseMaybeAssign(t,e)}parseArrow(t){if(this.match(14)){const e=this.tryParse(()=>{const i=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;const r=this.startNode();return[r.typeAnnotation,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=i,this.canInsertSemicolon()&&this.unexpected(),this.match(19)||this.unexpected(),r});if(e.thrown)return null;e.error&&(this.state=e.failState),t.returnType=e.node.typeAnnotation?this.finishNode(e.node,"TypeAnnotation"):null}return super.parseArrow(t)}shouldParseArrow(t){return this.match(14)||super.shouldParseArrow(t)}setArrowFunctionParameters(t,e){this.state.noArrowParamsConversionAt.indexOf(t.start)!==-1?t.params=e:super.setArrowFunctionParameters(t,e)}checkParams(t,e,i,r=!0){if(!(i&&this.state.noArrowParamsConversionAt.indexOf(t.start)!==-1)){for(let n=0;n<t.params.length;n++)this.isThisParam(t.params[n])&&n>0&&this.raise(P.ThisParamMustBeFirst,{at:t.params[n]});super.checkParams(t,e,i,r)}}parseParenAndDistinguishExpression(t){return super.parseParenAndDistinguishExpression(t&&this.state.noArrowAt.indexOf(this.state.start)===-1)}parseSubscripts(t,e,i){if(t.type==="Identifier"&&t.name==="async"&&this.state.noArrowAt.indexOf(e.index)!==-1){this.next();const r=this.startNodeAt(e);r.callee=t,r.arguments=super.parseCallExpressionArguments(11,!1),t=this.finishNode(r,"CallExpression")}else if(t.type==="Identifier"&&t.name==="async"&&this.match(47)){const r=this.state.clone(),n=this.tryParse(h=>this.parseAsyncArrowWithTypeParameters(e)||h(),r);if(!n.error&&!n.aborted)return n.node;const o=this.tryParse(()=>super.parseSubscripts(t,e,i),r);if(o.node&&!o.error)return o.node;if(n.node)return this.state=n.failState,n.node;if(o.node)return this.state=o.failState,o.node;throw n.error||o.error}return super.parseSubscripts(t,e,i)}parseSubscript(t,e,i,r){if(this.match(18)&&this.isLookaheadToken_lt()){if(r.optionalChainMember=!0,i)return r.stop=!0,t;this.next();const n=this.startNodeAt(e);return n.callee=t,n.typeArguments=this.flowParseTypeParameterInstantiation(),this.expect(10),n.arguments=this.parseCallExpressionArguments(11,!1),n.optional=!0,this.finishCallExpression(n,!0)}else if(!i&&this.shouldParseTypes()&&this.match(47)){const n=this.startNodeAt(e);n.callee=t;const o=this.tryParse(()=>(n.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),n.arguments=super.parseCallExpressionArguments(11,!1),r.optionalChainMember&&(n.optional=!1),this.finishCallExpression(n,r.optionalChainMember)));if(o.node)return o.error&&(this.state=o.failState),o.node}return super.parseSubscript(t,e,i,r)}parseNewCallee(t){super.parseNewCallee(t);let e=null;this.shouldParseTypes()&&this.match(47)&&(e=this.tryParse(()=>this.flowParseTypeParameterInstantiationCallOrNew()).node),t.typeArguments=e}parseAsyncArrowWithTypeParameters(t){const e=this.startNodeAt(t);if(this.parseFunctionParams(e,!1),!!this.parseArrow(e))return super.parseArrowExpression(e,void 0,!0)}readToken_mult_modulo(t){const e=this.input.charCodeAt(this.state.pos+1);if(t===42&&e===47&&this.state.hasFlowComment){this.state.hasFlowComment=!1,this.state.pos+=2,this.nextToken();return}super.readToken_mult_modulo(t)}readToken_pipe_amp(t){const e=this.input.charCodeAt(this.state.pos+1);if(t===124&&e===125){this.finishOp(9,2);return}super.readToken_pipe_amp(t)}parseTopLevel(t,e){const i=super.parseTopLevel(t,e);return this.state.hasFlowComment&&this.raise(P.UnterminatedFlowComment,{at:this.state.curPosition()}),i}skipBlockComment(){if(this.hasPlugin("flowComments")&&this.skipFlowComment()){if(this.state.hasFlowComment)throw this.raise(P.NestedFlowComment,{at:this.state.startLoc});this.hasFlowCommentCompletion();const t=this.skipFlowComment();t&&(this.state.pos+=t,this.state.hasFlowComment=!0);return}return super.skipBlockComment(this.state.hasFlowComment?"*-/":"*/")}skipFlowComment(){const{pos:t}=this.state;let e=2;for(;[32,9].includes(this.input.charCodeAt(t+e));)e++;const i=this.input.charCodeAt(e+t),r=this.input.charCodeAt(e+t+1);return i===58&&r===58?e+2:this.input.slice(e+t,e+t+12)==="flow-include"?e+12:i===58&&r!==58?e:!1}hasFlowCommentCompletion(){if(this.input.indexOf("*/",this.state.pos)===-1)throw this.raise(u.UnterminatedComment,{at:this.state.curPosition()})}flowEnumErrorBooleanMemberNotInitialized(t,{enumName:e,memberName:i}){this.raise(P.EnumBooleanMemberNotInitialized,{at:t,memberName:i,enumName:e})}flowEnumErrorInvalidMemberInitializer(t,e){return this.raise(e.explicitType?e.explicitType==="symbol"?P.EnumInvalidMemberInitializerSymbolType:P.EnumInvalidMemberInitializerPrimaryType:P.EnumInvalidMemberInitializerUnknownType,Object.assign({at:t},e))}flowEnumErrorNumberMemberNotInitialized(t,{enumName:e,memberName:i}){this.raise(P.EnumNumberMemberNotInitialized,{at:t,enumName:e,memberName:i})}flowEnumErrorStringMemberInconsistentlyInitailized(t,{enumName:e}){this.raise(P.EnumStringMemberInconsistentlyInitailized,{at:t,enumName:e})}flowEnumMemberInit(){const t=this.state.startLoc,e=()=>this.match(12)||this.match(8);switch(this.state.type){case 132:{const i=this.parseNumericLiteral(this.state.value);return e()?{type:"number",loc:i.loc.start,value:i}:{type:"invalid",loc:t}}case 131:{const i=this.parseStringLiteral(this.state.value);return e()?{type:"string",loc:i.loc.start,value:i}:{type:"invalid",loc:t}}case 85:case 86:{const i=this.parseBooleanLiteral(this.match(85));return e()?{type:"boolean",loc:i.loc.start,value:i}:{type:"invalid",loc:t}}default:return{type:"invalid",loc:t}}}flowEnumMemberRaw(){const t=this.state.startLoc,e=this.parseIdentifier(!0),i=this.eat(29)?this.flowEnumMemberInit():{type:"none",loc:t};return{id:e,init:i}}flowEnumCheckExplicitTypeMismatch(t,e,i){const{explicitType:r}=e;r!==null&&r!==i&&this.flowEnumErrorInvalidMemberInitializer(t,e)}flowEnumMembers({enumName:t,explicitType:e}){const i=new Set,r={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]};let n=!1;for(;!this.match(8);){if(this.eat(21)){n=!0;break}const o=this.startNode(),{id:h,init:l}=this.flowEnumMemberRaw(),c=h.name;if(c==="")continue;/^[a-z]/.test(c)&&this.raise(P.EnumInvalidMemberName,{at:h,memberName:c,suggestion:c[0].toUpperCase()+c.slice(1),enumName:t}),i.has(c)&&this.raise(P.EnumDuplicateMemberName,{at:h,memberName:c,enumName:t}),i.add(c);const p={enumName:t,explicitType:e,memberName:c};switch(o.id=h,l.type){case"boolean":{this.flowEnumCheckExplicitTypeMismatch(l.loc,p,"boolean"),o.init=l.value,r.booleanMembers.push(this.finishNode(o,"EnumBooleanMember"));break}case"number":{this.flowEnumCheckExplicitTypeMismatch(l.loc,p,"number"),o.init=l.value,r.numberMembers.push(this.finishNode(o,"EnumNumberMember"));break}case"string":{this.flowEnumCheckExplicitTypeMismatch(l.loc,p,"string"),o.init=l.value,r.stringMembers.push(this.finishNode(o,"EnumStringMember"));break}case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(l.loc,p);case"none":switch(e){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(l.loc,p);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(l.loc,p);break;default:r.defaultedMembers.push(this.finishNode(o,"EnumDefaultedMember"))}}this.match(8)||this.expect(12)}return{members:r,hasUnknownMembers:n}}flowEnumStringMembers(t,e,{enumName:i}){if(t.length===0)return e;if(e.length===0)return t;if(e.length>t.length){for(const r of t)this.flowEnumErrorStringMemberInconsistentlyInitailized(r,{enumName:i});return e}else{for(const r of e)this.flowEnumErrorStringMemberInconsistentlyInitailized(r,{enumName:i});return t}}flowEnumParseExplicitType({enumName:t}){if(!this.eatContextual(101))return null;if(!S(this.state.type))throw this.raise(P.EnumInvalidExplicitTypeUnknownSupplied,{at:this.state.startLoc,enumName:t});const{value:e}=this.state;return this.next(),e!=="boolean"&&e!=="number"&&e!=="string"&&e!=="symbol"&&this.raise(P.EnumInvalidExplicitType,{at:this.state.startLoc,enumName:t,invalidEnumType:e}),e}flowEnumBody(t,e){const i=e.name,r=e.loc.start,n=this.flowEnumParseExplicitType({enumName:i});this.expect(5);const{members:o,hasUnknownMembers:h}=this.flowEnumMembers({enumName:i,explicitType:n});switch(t.hasUnknownMembers=h,n){case"boolean":return t.explicitType=!0,t.members=o.booleanMembers,this.expect(8),this.finishNode(t,"EnumBooleanBody");case"number":return t.explicitType=!0,t.members=o.numberMembers,this.expect(8),this.finishNode(t,"EnumNumberBody");case"string":return t.explicitType=!0,t.members=this.flowEnumStringMembers(o.stringMembers,o.defaultedMembers,{enumName:i}),this.expect(8),this.finishNode(t,"EnumStringBody");case"symbol":return t.members=o.defaultedMembers,this.expect(8),this.finishNode(t,"EnumSymbolBody");default:{const l=()=>(t.members=[],this.expect(8),this.finishNode(t,"EnumStringBody"));t.explicitType=!1;const c=o.booleanMembers.length,p=o.numberMembers.length,d=o.stringMembers.length,m=o.defaultedMembers.length;if(!c&&!p&&!d&&!m)return l();if(!c&&!p)return t.members=this.flowEnumStringMembers(o.stringMembers,o.defaultedMembers,{enumName:i}),this.expect(8),this.finishNode(t,"EnumStringBody");if(!p&&!d&&c>=m){for(const g of o.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(g.loc.start,{enumName:i,memberName:g.id.name});return t.members=o.booleanMembers,this.expect(8),this.finishNode(t,"EnumBooleanBody")}else if(!c&&!d&&p>=m){for(const g of o.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(g.loc.start,{enumName:i,memberName:g.id.name});return t.members=o.numberMembers,this.expect(8),this.finishNode(t,"EnumNumberBody")}else return this.raise(P.EnumInconsistentMemberValues,{at:r,enumName:i}),l()}}}flowParseEnumDeclaration(t){const e=this.parseIdentifier();return t.id=e,t.body=this.flowEnumBody(this.startNode(),e),this.finishNode(t,"EnumDeclaration")}isLookaheadToken_lt(){const t=this.nextTokenStart();if(this.input.charCodeAt(t)===60){const e=this.input.charCodeAt(t+1);return e!==60&&e!==61}return!1}maybeUnwrapTypeCastExpression(t){return t.type==="TypeCastExpression"?t.expression:t}};const Oi={__proto__:null,quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},K=_`jsx`({AttributeIsEmpty:"JSX attributes must only be assigned a non-empty expression.",MissingClosingTagElement:({openingTagName:a})=>`Expected corresponding JSX closing tag for <${a}>.`,MissingClosingTagFragment:"Expected corresponding JSX closing tag for <>.",UnexpectedSequenceExpression:"Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?",UnexpectedToken:({unexpected:a,HTMLEntity:s})=>`Unexpected token \`${a}\`. Did you mean \`${s}\` or \`{'${a}'}\`?`,UnsupportedJsxValue:"JSX value should be either an expression or a quoted JSX text.",UnterminatedJsxContent:"Unterminated JSX contents.",UnwrappedAdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"});function z(a){return a?a.type==="JSXOpeningFragment"||a.type==="JSXClosingFragment":!1}function tt(a){if(a.type==="JSXIdentifier")return a.name;if(a.type==="JSXNamespacedName")return a.namespace.name+":"+a.name.name;if(a.type==="JSXMemberExpression")return tt(a.object)+"."+tt(a.property);throw new Error("Node had unexpected type: "+a.type)}var Fi=a=>class extends a{jsxReadToken(){let t="",e=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(K.UnterminatedJsxContent,{at:this.state.startLoc});const i=this.input.charCodeAt(this.state.pos);switch(i){case 60:case 123:if(this.state.pos===this.state.start){i===60&&this.state.canStartJSXElement?(++this.state.pos,this.finishToken(140)):super.getTokenFromCode(i);return}t+=this.input.slice(e,this.state.pos),this.finishToken(139,t);return;case 38:t+=this.input.slice(e,this.state.pos),t+=this.jsxReadEntity(),e=this.state.pos;break;case 62:case 125:default:mt(i)?(t+=this.input.slice(e,this.state.pos),t+=this.jsxReadNewLine(!0),e=this.state.pos):++this.state.pos}}}jsxReadNewLine(t){const e=this.input.charCodeAt(this.state.pos);let i;return++this.state.pos,e===13&&this.input.charCodeAt(this.state.pos)===10?(++this.state.pos,i=t?`
`:`\r
`):i=String.fromCharCode(e),++this.state.curLine,this.state.lineStart=this.state.pos,i}jsxReadString(t){let e="",i=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(u.UnterminatedString,{at:this.state.startLoc});const r=this.input.charCodeAt(this.state.pos);if(r===t)break;r===38?(e+=this.input.slice(i,this.state.pos),e+=this.jsxReadEntity(),i=this.state.pos):mt(r)?(e+=this.input.slice(i,this.state.pos),e+=this.jsxReadNewLine(!1),i=this.state.pos):++this.state.pos}e+=this.input.slice(i,this.state.pos++),this.finishToken(131,e)}jsxReadEntity(){const t=++this.state.pos;if(this.codePointAtPos(this.state.pos)===35){++this.state.pos;let e=10;this.codePointAtPos(this.state.pos)===120&&(e=16,++this.state.pos);const i=this.readInt(e,void 0,!1,"bail");if(i!==null&&this.codePointAtPos(this.state.pos)===59)return++this.state.pos,String.fromCodePoint(i)}else{let e=0,i=!1;for(;e++<10&&this.state.pos<this.length&&!(i=this.codePointAtPos(this.state.pos)==59);)++this.state.pos;if(i){const r=this.input.slice(t,this.state.pos),n=Oi[r];if(++this.state.pos,n)return n}}return this.state.pos=t,"&"}jsxReadWord(){let t;const e=this.state.pos;do t=this.input.charCodeAt(++this.state.pos);while(et(t)||t===45);this.finishToken(138,this.input.slice(e,this.state.pos))}jsxParseIdentifier(){const t=this.startNode();return this.match(138)?t.name=this.state.value:ae(this.state.type)?t.name=$(this.state.type):this.unexpected(),this.next(),this.finishNode(t,"JSXIdentifier")}jsxParseNamespacedName(){const t=this.state.startLoc,e=this.jsxParseIdentifier();if(!this.eat(14))return e;const i=this.startNodeAt(t);return i.namespace=e,i.name=this.jsxParseIdentifier(),this.finishNode(i,"JSXNamespacedName")}jsxParseElementName(){const t=this.state.startLoc;let e=this.jsxParseNamespacedName();if(e.type==="JSXNamespacedName")return e;for(;this.eat(16);){const i=this.startNodeAt(t);i.object=e,i.property=this.jsxParseIdentifier(),e=this.finishNode(i,"JSXMemberExpression")}return e}jsxParseAttributeValue(){let t;switch(this.state.type){case 5:return t=this.startNode(),this.setContext(C.brace),this.next(),t=this.jsxParseExpressionContainer(t,C.j_oTag),t.expression.type==="JSXEmptyExpression"&&this.raise(K.AttributeIsEmpty,{at:t}),t;case 140:case 131:return this.parseExprAtom();default:throw this.raise(K.UnsupportedJsxValue,{at:this.state.startLoc})}}jsxParseEmptyExpression(){const t=this.startNodeAt(this.state.lastTokEndLoc);return this.finishNodeAt(t,"JSXEmptyExpression",this.state.startLoc)}jsxParseSpreadChild(t){return this.next(),t.expression=this.parseExpression(),this.setContext(C.j_expr),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(t,"JSXSpreadChild")}jsxParseExpressionContainer(t,e){if(this.match(8))t.expression=this.jsxParseEmptyExpression();else{const i=this.parseExpression();t.expression=i}return this.setContext(e),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(t,"JSXExpressionContainer")}jsxParseAttribute(){const t=this.startNode();return this.match(5)?(this.setContext(C.brace),this.next(),this.expect(21),t.argument=this.parseMaybeAssignAllowIn(),this.setContext(C.j_oTag),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(t,"JSXSpreadAttribute")):(t.name=this.jsxParseNamespacedName(),t.value=this.eat(29)?this.jsxParseAttributeValue():null,this.finishNode(t,"JSXAttribute"))}jsxParseOpeningElementAt(t){const e=this.startNodeAt(t);return this.eat(141)?this.finishNode(e,"JSXOpeningFragment"):(e.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(e))}jsxParseOpeningElementAfterName(t){const e=[];for(;!this.match(56)&&!this.match(141);)e.push(this.jsxParseAttribute());return t.attributes=e,t.selfClosing=this.eat(56),this.expect(141),this.finishNode(t,"JSXOpeningElement")}jsxParseClosingElementAt(t){const e=this.startNodeAt(t);return this.eat(141)?this.finishNode(e,"JSXClosingFragment"):(e.name=this.jsxParseElementName(),this.expect(141),this.finishNode(e,"JSXClosingElement"))}jsxParseElementAt(t){const e=this.startNodeAt(t),i=[],r=this.jsxParseOpeningElementAt(t);let n=null;if(!r.selfClosing){t:for(;;)switch(this.state.type){case 140:if(t=this.state.startLoc,this.next(),this.eat(56)){n=this.jsxParseClosingElementAt(t);break t}i.push(this.jsxParseElementAt(t));break;case 139:i.push(this.parseExprAtom());break;case 5:{const o=this.startNode();this.setContext(C.brace),this.next(),this.match(21)?i.push(this.jsxParseSpreadChild(o)):i.push(this.jsxParseExpressionContainer(o,C.j_expr));break}default:this.unexpected()}z(r)&&!z(n)&&n!==null?this.raise(K.MissingClosingTagFragment,{at:n}):!z(r)&&z(n)?this.raise(K.MissingClosingTagElement,{at:n,openingTagName:tt(r.name)}):!z(r)&&!z(n)&&tt(n.name)!==tt(r.name)&&this.raise(K.MissingClosingTagElement,{at:n,openingTagName:tt(r.name)})}if(z(r)?(e.openingFragment=r,e.closingFragment=n):(e.openingElement=r,e.closingElement=n),e.children=i,this.match(47))throw this.raise(K.UnwrappedAdjacentJSXElements,{at:this.state.startLoc});return z(r)?this.finishNode(e,"JSXFragment"):this.finishNode(e,"JSXElement")}jsxParseElement(){const t=this.state.startLoc;return this.next(),this.jsxParseElementAt(t)}setContext(t){const{context:e}=this.state;e[e.length-1]=t}parseExprAtom(t){return this.match(139)?this.parseLiteral(this.state.value,"JSXText"):this.match(140)?this.jsxParseElement():this.match(47)&&this.input.charCodeAt(this.state.pos)!==33?(this.replaceToken(140),this.jsxParseElement()):super.parseExprAtom(t)}skipSpace(){this.curContext().preserveSpace||super.skipSpace()}getTokenFromCode(t){const e=this.curContext();if(e===C.j_expr){this.jsxReadToken();return}if(e===C.j_oTag||e===C.j_cTag){if(B(t)){this.jsxReadWord();return}if(t===62){++this.state.pos,this.finishToken(141);return}if((t===34||t===39)&&e===C.j_oTag){this.jsxReadString(t);return}}if(t===60&&this.state.canStartJSXElement&&this.input.charCodeAt(this.state.pos+1)!==33){++this.state.pos,this.finishToken(140);return}super.getTokenFromCode(t)}updateContext(t){const{context:e,type:i}=this.state;if(i===56&&t===140)e.splice(-2,2,C.j_cTag),this.state.canStartJSXElement=!1;else if(i===140)e.push(C.j_oTag);else if(i===141){const r=e[e.length-1];r===C.j_oTag&&t===56||r===C.j_cTag?(e.pop(),this.state.canStartJSXElement=e[e.length-1]===C.j_expr):(this.setContext(C.j_expr),this.state.canStartJSXElement=!0)}else this.state.canStartJSXElement=ms(i)}};class Bi extends pe{constructor(...s){super(...s),this.types=new Set,this.enums=new Set,this.constEnums=new Set,this.classes=new Set,this.exportOnlyBindings=new Set}}class _i extends de{constructor(...s){super(...s),this.importsStack=[]}createScope(s){return this.importsStack.push(new Set),new Bi(s)}enter(s){s==st&&this.importsStack.push(new Set),super.enter(s)}exit(){const s=super.exit();return s==st&&this.importsStack.pop(),s}hasImport(s,t){const e=this.importsStack.length;if(this.importsStack[e-1].has(s))return!0;if(!t&&e>1){for(let i=0;i<e-1;i++)if(this.importsStack[i].has(s))return!0}return!1}declareName(s,t,e){if(t&ft){this.hasImport(s,!0)&&this.parser.raise(u.VarRedeclaration,{at:e,identifierName:s}),this.importsStack[this.importsStack.length-1].add(s);return}const i=this.currentScope();if(t&le){this.maybeExportDefined(i,s),i.exportOnlyBindings.add(s);return}super.declareName(s,t,e),t&G&&(t&M||(this.checkRedeclarationInScope(i,s,t,e),this.maybeExportDefined(i,s)),i.types.add(s)),t&Xt&&i.enums.add(s),t&Gt&&i.constEnums.add(s),t&Lt&&i.classes.add(s)}isRedeclaredInScope(s,t,e){if(s.enums.has(t)){if(e&Xt){const i=!!(e&Gt),r=s.constEnums.has(t);return i!==r}return!0}return e&Lt&&s.classes.has(t)?s.lexical.has(t)?!!(e&M):!1:e&G&&s.types.has(t)?!0:super.isRedeclaredInScope(s,t,e)}checkLocalExport(s){const{name:t}=s;if(this.hasImport(t))return;const e=this.scopeStack.length;for(let i=e-1;i>=0;i--){const r=this.scopeStack[i];if(r.types.has(t)||r.exportOnlyBindings.has(t))return}super.checkLocalExport(s)}}const Ri=(a,s)=>Object.hasOwnProperty.call(a,s)&&a[s],as=a=>a.type==="ParenthesizedExpression"?as(a.expression):a;class Ui extends Ii{toAssignable(s,t=!1){var e,i;let r;switch((s.type==="ParenthesizedExpression"||(e=s.extra)!=null&&e.parenthesized)&&(r=as(s),t?r.type==="Identifier"?this.expressionScope.recordArrowParameterBindingError(u.InvalidParenthesizedAssignment,{at:s}):r.type!=="MemberExpression"&&this.raise(u.InvalidParenthesizedAssignment,{at:s}):this.raise(u.InvalidParenthesizedAssignment,{at:s})),s.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":s.type="ObjectPattern";for(let o=0,h=s.properties.length,l=h-1;o<h;o++){var n;const c=s.properties[o],p=o===l;this.toAssignableObjectExpressionProp(c,p,t),p&&c.type==="RestElement"&&(n=s.extra)!=null&&n.trailingCommaLoc&&this.raise(u.RestTrailingComma,{at:s.extra.trailingCommaLoc})}break;case"ObjectProperty":{const{key:o,value:h}=s;this.isPrivateName(o)&&this.classScope.usePrivateName(this.getPrivateNameSV(o),o.loc.start),this.toAssignable(h,t);break}case"SpreadElement":throw new Error("Internal @babel/parser error (this is a bug, please report it). SpreadElement should be converted by .toAssignable's caller.");case"ArrayExpression":s.type="ArrayPattern",this.toAssignableList(s.elements,(i=s.extra)==null?void 0:i.trailingCommaLoc,t);break;case"AssignmentExpression":s.operator!=="="&&this.raise(u.MissingEqInAssignment,{at:s.left.loc.end}),s.type="AssignmentPattern",delete s.operator,this.toAssignable(s.left,t);break;case"ParenthesizedExpression":this.toAssignable(r,t);break}}toAssignableObjectExpressionProp(s,t,e){if(s.type==="ObjectMethod")this.raise(s.kind==="get"||s.kind==="set"?u.PatternHasAccessor:u.PatternHasMethod,{at:s.key});else if(s.type==="SpreadElement"){s.type="RestElement";const i=s.argument;this.checkToRestConversion(i,!1),this.toAssignable(i,e),t||this.raise(u.RestTrailingComma,{at:s})}else this.toAssignable(s,e)}toAssignableList(s,t,e){const i=s.length-1;for(let r=0;r<=i;r++){const n=s[r];if(n){if(n.type==="SpreadElement"){n.type="RestElement";const o=n.argument;this.checkToRestConversion(o,!0),this.toAssignable(o,e)}else this.toAssignable(n,e);n.type==="RestElement"&&(r<i?this.raise(u.RestTrailingComma,{at:n}):t&&this.raise(u.RestTrailingComma,{at:t}))}}}isAssignable(s,t){switch(s.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":return!0;case"ObjectExpression":{const e=s.properties.length-1;return s.properties.every((i,r)=>i.type!=="ObjectMethod"&&(r===e||i.type!=="SpreadElement")&&this.isAssignable(i))}case"ObjectProperty":return this.isAssignable(s.value);case"SpreadElement":return this.isAssignable(s.argument);case"ArrayExpression":return s.elements.every(e=>e===null||this.isAssignable(e));case"AssignmentExpression":return s.operator==="=";case"ParenthesizedExpression":return this.isAssignable(s.expression);case"MemberExpression":case"OptionalMemberExpression":return!t;default:return!1}}toReferencedList(s,t){return s}toReferencedListDeep(s,t){this.toReferencedList(s,t);for(const e of s)(e==null?void 0:e.type)==="ArrayExpression"&&this.toReferencedListDeep(e.elements)}parseSpread(s){const t=this.startNode();return this.next(),t.argument=this.parseMaybeAssignAllowIn(s,void 0),this.finishNode(t,"SpreadElement")}parseRestBinding(){const s=this.startNode();return this.next(),s.argument=this.parseBindingAtom(),this.finishNode(s,"RestElement")}parseBindingAtom(){switch(this.state.type){case 0:{const s=this.startNode();return this.next(),s.elements=this.parseBindingList(3,93,1),this.finishNode(s,"ArrayPattern")}case 5:return this.parseObjectLike(8,!0)}return this.parseIdentifier()}parseBindingList(s,t,e){const i=e&1,r=[];let n=!0;for(;!this.eat(s);)if(n?n=!1:this.expect(12),i&&this.match(12))r.push(null);else{if(this.eat(s))break;if(this.match(21)){if(r.push(this.parseAssignableListItemTypes(this.parseRestBinding(),e)),!this.checkCommaAfterRest(t)){this.expect(s);break}}else{const o=[];for(this.match(26)&&this.hasPlugin("decorators")&&this.raise(u.UnsupportedParameterDecorator,{at:this.state.startLoc});this.match(26);)o.push(this.parseDecorator());r.push(this.parseAssignableListItem(e,o))}}return r}parseBindingRestProperty(s){return this.next(),s.argument=this.parseIdentifier(),this.checkCommaAfterRest(125),this.finishNode(s,"RestElement")}parseBindingProperty(){const s=this.startNode(),{type:t,startLoc:e}=this.state;return t===21?this.parseBindingRestProperty(s):(t===136?(this.expectPlugin("destructuringPrivate",e),this.classScope.usePrivateName(this.state.value,e),s.key=this.parsePrivateName()):this.parsePropertyName(s),s.method=!1,this.parseObjPropValue(s,e,!1,!1,!0,!1))}parseAssignableListItem(s,t){const e=this.parseMaybeDefault();this.parseAssignableListItemTypes(e,s);const i=this.parseMaybeDefault(e.loc.start,e);return t.length&&(e.decorators=t),i}parseAssignableListItemTypes(s,t){return s}parseMaybeDefault(s,t){var e,i;if((e=s)!=null||(s=this.state.startLoc),t=(i=t)!=null?i:this.parseBindingAtom(),!this.eat(29))return t;const r=this.startNodeAt(s);return r.left=t,r.right=this.parseMaybeAssignAllowIn(),this.finishNode(r,"AssignmentPattern")}isValidLVal(s,t,e){return Ri({AssignmentPattern:"left",RestElement:"argument",ObjectProperty:"value",ParenthesizedExpression:"expression",ArrayPattern:"elements",ObjectPattern:"properties"},s)}checkLVal(s,{in:t,binding:e=H,checkClashes:i=!1,strictModeChanged:r=!1,hasParenthesizedAncestor:n=!1}){var o;const h=s.type;if(this.isObjectMethod(s))return;if(h==="MemberExpression"){e!==H&&this.raise(u.InvalidPropertyBindingPattern,{at:s});return}if(h==="Identifier"){this.checkIdentifier(s,e,r);const{name:m}=s;i&&(i.has(m)?this.raise(u.ParamDupe,{at:s}):i.add(m));return}const l=this.isValidLVal(h,!(n||(o=s.extra)!=null&&o.parenthesized)&&t.type==="AssignmentExpression",e);if(l===!0)return;if(l===!1){const m=e===H?u.InvalidLhs:u.InvalidLhsBinding;this.raise(m,{at:s,ancestor:t});return}const[c,p]=Array.isArray(l)?l:[l,h==="ParenthesizedExpression"],d=h==="ArrayPattern"||h==="ObjectPattern"||h==="ParenthesizedExpression"?{type:h}:t;for(const m of[].concat(s[c]))m&&this.checkLVal(m,{in:d,binding:e,checkClashes:i,strictModeChanged:r,hasParenthesizedAncestor:p})}checkIdentifier(s,t,e=!1){this.state.strict&&(e?Ve(s.name,this.inModule):ze(s.name))&&(t===H?this.raise(u.StrictEvalArguments,{at:s,referenceName:s.name}):this.raise(u.StrictEvalArgumentsBinding,{at:s,bindingName:s.name})),t&Ft&&s.name==="let"&&this.raise(u.LetInLexicalBinding,{at:s}),t&H||this.declareNameFromIdentifier(s,t)}declareNameFromIdentifier(s,t){this.scope.declareName(s.name,t,s.loc.start)}checkToRestConversion(s,t){switch(s.type){case"ParenthesizedExpression":this.checkToRestConversion(s.expression,t);break;case"Identifier":case"MemberExpression":break;case"ArrayExpression":case"ObjectExpression":if(t)break;default:this.raise(u.InvalidRestAssignmentPattern,{at:s})}}checkCommaAfterRest(s){return this.match(12)?(this.raise(this.lookaheadCharCode()===s?u.RestTrailingComma:u.ElementAfterRest,{at:this.state.startLoc}),!0):!1}}const ji=(a,s)=>Object.hasOwnProperty.call(a,s)&&a[s];function zi(a){if(a==null)throw new Error(`Unexpected ${a} value.`);return a}function Ne(a){if(!a)throw new Error("Assert fail")}const y=_`typescript`({AbstractMethodHasImplementation:({methodName:a})=>`Method '${a}' cannot have an implementation because it is marked abstract.`,AbstractPropertyHasInitializer:({propertyName:a})=>`Property '${a}' cannot have an initializer because it is marked abstract.`,AccesorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccesorCannotHaveTypeParameters:"An accessor cannot have type parameters.",AccessorCannotBeOptional:"An 'accessor' property cannot be declared optional.",ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference:"A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:({kind:a})=>`'declare' is not allowed in ${a}ters.`,DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:({modifier:a})=>"Accessibility modifier already seen.",DuplicateModifier:({modifier:a})=>`Duplicate modifier: '${a}'.`,EmptyHeritageClauseType:({token:a})=>`'${a}' list cannot be empty.`,EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` modifier",IncompatibleModifiers:({modifiers:a})=>`'${a[0]}' modifier cannot be used with '${a[1]}' modifier.`,IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:({modifier:a})=>`Index signatures cannot have an accessibility modifier ('${a}').`,IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InitializerNotAllowedInAmbientContext:"Initializers are not allowed in ambient contexts.",InvalidModifierOnTypeMember:({modifier:a})=>`'${a}' modifier cannot appear on a type member.`,InvalidModifierOnTypeParameter:({modifier:a})=>`'${a}' modifier cannot appear on a type parameter.`,InvalidModifierOnTypeParameterPositions:({modifier:a})=>`'${a}' modifier can only appear on a type parameter of a class, interface or type alias.`,InvalidModifiersOrder:({orderedModifiers:a})=>`'${a[0]}' modifier must precede '${a[1]}' modifier.`,InvalidPropertyAccessAfterInstantiationExpression:"Invalid property access after an instantiation expression. You can either wrap the instantiation expression in parentheses, or delete the type arguments.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",MixedLabeledAndUnlabeledElements:"Tuple members must all have names or all not have names.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifer:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:({modifier:a})=>`Private elements cannot have an accessibility modifier ('${a}').`,ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccesorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccesorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccesorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",SingleTypeParameterWithoutTrailingComma:({typeParameterName:a})=>`Single type parameter ${a} should have a trailing comma. Example usage: <${a},>.`,StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TupleOptionalAfterType:"A labeled tuple optional element must be declared using a question mark after the name and before the colon (`name?: type`), rather than after the type (`name: type?`).",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:({type:a})=>`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${a}.`});function Vi(a){switch(a){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}function ke(a){return a==="private"||a==="public"||a==="protected"}function Hi(a){return a==="in"||a==="out"}var $i=a=>class extends a{constructor(...t){super(...t),this.tsParseInOutModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out"],disallowedModifiers:["const","public","private","protected","readonly","declare","abstract","override"],errorTemplate:y.InvalidModifierOnTypeParameter}),this.tsParseConstModifier=this.tsParseModifiers.bind(this,{allowedModifiers:["const"],disallowedModifiers:["in","out"],errorTemplate:y.InvalidModifierOnTypeParameterPositions}),this.tsParseInOutConstModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out","const"],disallowedModifiers:["public","private","protected","readonly","declare","abstract","override"],errorTemplate:y.InvalidModifierOnTypeParameter})}getScopeHandler(){return _i}tsIsIdentifier(){return S(this.state.type)}tsTokenCanFollowModifier(){return(this.match(0)||this.match(5)||this.match(55)||this.match(21)||this.match(136)||this.isLiteralPropertyName())&&!this.hasPrecedingLineBreak()}tsNextTokenCanFollowModifier(){return this.next(),this.tsTokenCanFollowModifier()}tsParseModifier(t,e){if(!S(this.state.type)&&this.state.type!==58&&this.state.type!==75)return;const i=this.state.value;if(t.indexOf(i)!==-1){if(e&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return i}}tsParseModifiers({allowedModifiers:t,disallowedModifiers:e,stopOnStartOfClassStaticBlock:i,errorTemplate:r=y.InvalidModifierOnTypeMember},n){const o=(l,c,p,d)=>{c===p&&n[d]&&this.raise(y.InvalidModifiersOrder,{at:l,orderedModifiers:[p,d]})},h=(l,c,p,d)=>{(n[p]&&c===d||n[d]&&c===p)&&this.raise(y.IncompatibleModifiers,{at:l,modifiers:[p,d]})};for(;;){const{startLoc:l}=this.state,c=this.tsParseModifier(t.concat(e??[]),i);if(!c)break;ke(c)?n.accessibility?this.raise(y.DuplicateAccessibilityModifier,{at:l,modifier:c}):(o(l,c,c,"override"),o(l,c,c,"static"),o(l,c,c,"readonly"),n.accessibility=c):Hi(c)?(n[c]&&this.raise(y.DuplicateModifier,{at:l,modifier:c}),n[c]=!0,o(l,c,"in","out")):(Object.hasOwnProperty.call(n,c)?this.raise(y.DuplicateModifier,{at:l,modifier:c}):(o(l,c,"static","readonly"),o(l,c,"static","override"),o(l,c,"override","readonly"),o(l,c,"abstract","override"),h(l,c,"declare","override"),h(l,c,"static","abstract")),n[c]=!0),e!=null&&e.includes(c)&&this.raise(r,{at:l,modifier:c})}}tsIsListTerminator(t){switch(t){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(48)}}tsParseList(t,e){const i=[];for(;!this.tsIsListTerminator(t);)i.push(e());return i}tsParseDelimitedList(t,e,i){return zi(this.tsParseDelimitedListWorker(t,e,!0,i))}tsParseDelimitedListWorker(t,e,i,r){const n=[];let o=-1;for(;!this.tsIsListTerminator(t);){o=-1;const h=e();if(h==null)return;if(n.push(h),this.eat(12)){o=this.state.lastTokStart;continue}if(this.tsIsListTerminator(t))break;i&&this.expect(12);return}return r&&(r.value=o),n}tsParseBracketedList(t,e,i,r,n){r||(i?this.expect(0):this.expect(47));const o=this.tsParseDelimitedList(t,e,n);return i?this.expect(3):this.expect(48),o}tsParseImportType(){const t=this.startNode();return this.expect(83),this.expect(10),this.match(131)||this.raise(y.UnsupportedImportTypeArgument,{at:this.state.startLoc}),t.argument=super.parseExprAtom(),this.expect(11),this.eat(16)&&(t.qualifier=this.tsParseEntityName()),this.match(47)&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSImportType")}tsParseEntityName(t=!0){let e=this.parseIdentifier(t);for(;this.eat(16);){const i=this.startNodeAtNode(e);i.left=e,i.right=this.parseIdentifier(t),e=this.finishNode(i,"TSQualifiedName")}return e}tsParseTypeReference(){const t=this.startNode();return t.typeName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSTypeReference")}tsParseThisTypePredicate(t){this.next();const e=this.startNodeAtNode(t);return e.parameterName=t,e.typeAnnotation=this.tsParseTypeAnnotation(!1),e.asserts=!1,this.finishNode(e,"TSTypePredicate")}tsParseThisTypeNode(){const t=this.startNode();return this.next(),this.finishNode(t,"TSThisType")}tsParseTypeQuery(){const t=this.startNode();return this.expect(87),this.match(83)?t.exprName=this.tsParseImportType():t.exprName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSTypeQuery")}tsParseTypeParameter(t){const e=this.startNode();return t(e),e.name=this.tsParseTypeParameterName(),e.constraint=this.tsEatThenParseType(81),e.default=this.tsEatThenParseType(29),this.finishNode(e,"TSTypeParameter")}tsTryParseTypeParameters(t){if(this.match(47))return this.tsParseTypeParameters(t)}tsParseTypeParameters(t){const e=this.startNode();this.match(47)||this.match(140)?this.next():this.unexpected();const i={value:-1};return e.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this,t),!1,!0,i),e.params.length===0&&this.raise(y.EmptyTypeParameters,{at:e}),i.value!==-1&&this.addExtra(e,"trailingComma",i.value),this.finishNode(e,"TSTypeParameterDeclaration")}tsFillSignature(t,e){const i=t===19,r="parameters",n="typeAnnotation";e.typeParameters=this.tsTryParseTypeParameters(this.tsParseConstModifier),this.expect(10),e[r]=this.tsParseBindingListForSignature(),i?e[n]=this.tsParseTypeOrTypePredicateAnnotation(t):this.match(t)&&(e[n]=this.tsParseTypeOrTypePredicateAnnotation(t))}tsParseBindingListForSignature(){const t=super.parseBindingList(11,41,2);for(const e of t){const{type:i}=e;(i==="AssignmentPattern"||i==="TSParameterProperty")&&this.raise(y.UnsupportedSignatureParameterKind,{at:e,type:i})}return t}tsParseTypeMemberSemicolon(){!this.eat(12)&&!this.isLineTerminator()&&this.expect(13)}tsParseSignatureMember(t,e){return this.tsFillSignature(14,e),this.tsParseTypeMemberSemicolon(),this.finishNode(e,t)}tsIsUnambiguouslyIndexSignature(){return this.next(),S(this.state.type)?(this.next(),this.match(14)):!1}tsTryParseIndexSignature(t){if(!(this.match(0)&&this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this))))return;this.expect(0);const e=this.parseIdentifier();e.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(e),this.expect(3),t.parameters=[e];const i=this.tsTryParseTypeAnnotation();return i&&(t.typeAnnotation=i),this.tsParseTypeMemberSemicolon(),this.finishNode(t,"TSIndexSignature")}tsParsePropertyOrMethodSignature(t,e){this.eat(17)&&(t.optional=!0);const i=t;if(this.match(10)||this.match(47)){e&&this.raise(y.ReadonlyForMethodSignature,{at:t});const r=i;r.kind&&this.match(47)&&this.raise(y.AccesorCannotHaveTypeParameters,{at:this.state.curPosition()}),this.tsFillSignature(14,r),this.tsParseTypeMemberSemicolon();const n="parameters",o="typeAnnotation";if(r.kind==="get")r[n].length>0&&(this.raise(u.BadGetterArity,{at:this.state.curPosition()}),this.isThisParam(r[n][0])&&this.raise(y.AccesorCannotDeclareThisParameter,{at:this.state.curPosition()}));else if(r.kind==="set"){if(r[n].length!==1)this.raise(u.BadSetterArity,{at:this.state.curPosition()});else{const h=r[n][0];this.isThisParam(h)&&this.raise(y.AccesorCannotDeclareThisParameter,{at:this.state.curPosition()}),h.type==="Identifier"&&h.optional&&this.raise(y.SetAccesorCannotHaveOptionalParameter,{at:this.state.curPosition()}),h.type==="RestElement"&&this.raise(y.SetAccesorCannotHaveRestParameter,{at:this.state.curPosition()})}r[o]&&this.raise(y.SetAccesorCannotHaveReturnType,{at:r[o]})}else r.kind="method";return this.finishNode(r,"TSMethodSignature")}else{const r=i;e&&(r.readonly=!0);const n=this.tsTryParseTypeAnnotation();return n&&(r.typeAnnotation=n),this.tsParseTypeMemberSemicolon(),this.finishNode(r,"TSPropertySignature")}}tsParseTypeMember(){const t=this.startNode();if(this.match(10)||this.match(47))return this.tsParseSignatureMember("TSCallSignatureDeclaration",t);if(this.match(77)){const i=this.startNode();return this.next(),this.match(10)||this.match(47)?this.tsParseSignatureMember("TSConstructSignatureDeclaration",t):(t.key=this.createIdentifier(i,"new"),this.tsParsePropertyOrMethodSignature(t,!1))}this.tsParseModifiers({allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]},t);const e=this.tsTryParseIndexSignature(t);return e||(super.parsePropertyName(t),!t.computed&&t.key.type==="Identifier"&&(t.key.name==="get"||t.key.name==="set")&&this.tsTokenCanFollowModifier()&&(t.kind=t.key.name,super.parsePropertyName(t)),this.tsParsePropertyOrMethodSignature(t,!!t.readonly))}tsParseTypeLiteral(){const t=this.startNode();return t.members=this.tsParseObjectTypeMembers(),this.finishNode(t,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);const t=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),t}tsIsStartOfMappedType(){return this.next(),this.eat(53)?this.isContextual(120):(this.isContextual(120)&&this.next(),!this.match(0)||(this.next(),!this.tsIsIdentifier())?!1:(this.next(),this.match(58)))}tsParseMappedTypeParameter(){const t=this.startNode();return t.name=this.tsParseTypeParameterName(),t.constraint=this.tsExpectThenParseType(58),this.finishNode(t,"TSTypeParameter")}tsParseMappedType(){const t=this.startNode();return this.expect(5),this.match(53)?(t.readonly=this.state.value,this.next(),this.expectContextual(120)):this.eatContextual(120)&&(t.readonly=!0),this.expect(0),t.typeParameter=this.tsParseMappedTypeParameter(),t.nameType=this.eatContextual(93)?this.tsParseType():null,this.expect(3),this.match(53)?(t.optional=this.state.value,this.next(),this.expect(17)):this.eat(17)&&(t.optional=!0),t.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(t,"TSMappedType")}tsParseTupleType(){const t=this.startNode();t.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let e=!1,i=null;return t.elementTypes.forEach(r=>{var n;const{type:o}=r;e&&o!=="TSRestType"&&o!=="TSOptionalType"&&!(o==="TSNamedTupleMember"&&r.optional)&&this.raise(y.OptionalTypeBeforeRequired,{at:r}),e||(e=o==="TSNamedTupleMember"&&r.optional||o==="TSOptionalType");let h=o;o==="TSRestType"&&(r=r.typeAnnotation,h=r.type);const l=h==="TSNamedTupleMember";(n=i)!=null||(i=l),i!==l&&this.raise(y.MixedLabeledAndUnlabeledElements,{at:r})}),this.finishNode(t,"TSTupleType")}tsParseTupleElementType(){const{startLoc:t}=this.state,e=this.eat(21);let i,r,n,o;const l=D(this.state.type)?this.lookaheadCharCode():null;if(l===58)i=!0,n=!1,r=this.parseIdentifier(!0),this.expect(14),o=this.tsParseType();else if(l===63){n=!0;const c=this.state.startLoc,p=this.state.value,d=this.tsParseNonArrayType();this.lookaheadCharCode()===58?(i=!0,r=this.createIdentifier(this.startNodeAt(c),p),this.expect(17),this.expect(14),o=this.tsParseType()):(i=!1,o=d,this.expect(17))}else o=this.tsParseType(),n=this.eat(17),i=this.eat(14);if(i){let c;r?(c=this.startNodeAtNode(r),c.optional=n,c.label=r,c.elementType=o,this.eat(17)&&(c.optional=!0,this.raise(y.TupleOptionalAfterType,{at:this.state.lastTokStartLoc}))):(c=this.startNodeAtNode(o),c.optional=n,this.raise(y.InvalidTupleMemberLabel,{at:o}),c.label=o,c.elementType=this.tsParseType()),o=this.finishNode(c,"TSNamedTupleMember")}else if(n){const c=this.startNodeAtNode(o);c.typeAnnotation=o,o=this.finishNode(c,"TSOptionalType")}if(e){const c=this.startNodeAt(t);c.typeAnnotation=o,o=this.finishNode(c,"TSRestType")}return o}tsParseParenthesizedType(){const t=this.startNode();return this.expect(10),t.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(t,"TSParenthesizedType")}tsParseFunctionOrConstructorType(t,e){const i=this.startNode();return t==="TSConstructorType"&&(i.abstract=!!e,e&&this.next(),this.next()),this.tsInAllowConditionalTypesContext(()=>this.tsFillSignature(19,i)),this.finishNode(i,t)}tsParseLiteralTypeNode(){const t=this.startNode();switch(this.state.type){case 132:case 133:case 131:case 85:case 86:t.literal=super.parseExprAtom();break;default:this.unexpected()}return this.finishNode(t,"TSLiteralType")}tsParseTemplateLiteralType(){const t=this.startNode();return t.literal=super.parseTemplate(!1),this.finishNode(t,"TSLiteralType")}parseTemplateSubstitution(){return this.state.inType?this.tsParseType():super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){const t=this.tsParseThisTypeNode();return this.isContextual(114)&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(t):t}tsParseNonArrayType(){switch(this.state.type){case 131:case 132:case 133:case 85:case 86:return this.tsParseLiteralTypeNode();case 53:if(this.state.value==="-"){const t=this.startNode(),e=this.lookahead();return e.type!==132&&e.type!==133&&this.unexpected(),t.literal=this.parseMaybeUnary(),this.finishNode(t,"TSLiteralType")}break;case 78:return this.tsParseThisTypeOrThisTypePredicate();case 87:return this.tsParseTypeQuery();case 83:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 25:case 24:return this.tsParseTemplateLiteralType();default:{const{type:t}=this.state;if(S(t)||t===88||t===84){const e=t===88?"TSVoidKeyword":t===84?"TSNullKeyword":Vi(this.state.value);if(e!==void 0&&this.lookaheadCharCode()!==46){const i=this.startNode();return this.next(),this.finishNode(i,e)}return this.tsParseTypeReference()}}}this.unexpected()}tsParseArrayTypeOrHigher(){let t=this.tsParseNonArrayType();for(;!this.hasPrecedingLineBreak()&&this.eat(0);)if(this.match(3)){const e=this.startNodeAtNode(t);e.elementType=t,this.expect(3),t=this.finishNode(e,"TSArrayType")}else{const e=this.startNodeAtNode(t);e.objectType=t,e.indexType=this.tsParseType(),this.expect(3),t=this.finishNode(e,"TSIndexedAccessType")}return t}tsParseTypeOperator(){const t=this.startNode(),e=this.state.value;return this.next(),t.operator=e,t.typeAnnotation=this.tsParseTypeOperatorOrHigher(),e==="readonly"&&this.tsCheckTypeAnnotationForReadOnly(t),this.finishNode(t,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(t){switch(t.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(y.UnexpectedReadonly,{at:t})}}tsParseInferType(){const t=this.startNode();this.expectContextual(113);const e=this.startNode();return e.name=this.tsParseTypeParameterName(),e.constraint=this.tsTryParse(()=>this.tsParseConstraintForInferType()),t.typeParameter=this.finishNode(e,"TSTypeParameter"),this.finishNode(t,"TSInferType")}tsParseConstraintForInferType(){if(this.eat(81)){const t=this.tsInDisallowConditionalTypesContext(()=>this.tsParseType());if(this.state.inDisallowConditionalTypesContext||!this.match(17))return t}}tsParseTypeOperatorOrHigher(){return bs(this.state.type)&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(113)?this.tsParseInferType():this.tsInAllowConditionalTypesContext(()=>this.tsParseArrayTypeOrHigher())}tsParseUnionOrIntersectionType(t,e,i){const r=this.startNode(),n=this.eat(i),o=[];do o.push(e());while(this.eat(i));return o.length===1&&!n?o[0]:(r.types=o,this.finishNode(r,t))}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),45)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),43)}tsIsStartOfFunctionType(){return this.match(47)?!0:this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(S(this.state.type)||this.match(78))return this.next(),!0;if(this.match(5)){const{errors:t}=this.state,e=t.length;try{return this.parseObjectLike(8,!0),t.length===e}catch{return!1}}if(this.match(0)){this.next();const{errors:t}=this.state,e=t.length;try{return super.parseBindingList(3,93,1),t.length===e}catch{return!1}}return!1}tsIsUnambiguouslyStartOfFunctionType(){return this.next(),!!(this.match(11)||this.match(21)||this.tsSkipParameterStart()&&(this.match(14)||this.match(12)||this.match(17)||this.match(29)||this.match(11)&&(this.next(),this.match(19))))}tsParseTypeOrTypePredicateAnnotation(t){return this.tsInType(()=>{const e=this.startNode();this.expect(t);const i=this.startNode(),r=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if(r&&this.match(78)){let h=this.tsParseThisTypeOrThisTypePredicate();return h.type==="TSThisType"?(i.parameterName=h,i.asserts=!0,i.typeAnnotation=null,h=this.finishNode(i,"TSTypePredicate")):(this.resetStartLocationFromNode(h,i),h.asserts=!0),e.typeAnnotation=h,this.finishNode(e,"TSTypeAnnotation")}const n=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!n)return r?(i.parameterName=this.parseIdentifier(),i.asserts=r,i.typeAnnotation=null,e.typeAnnotation=this.finishNode(i,"TSTypePredicate"),this.finishNode(e,"TSTypeAnnotation")):this.tsParseTypeAnnotation(!1,e);const o=this.tsParseTypeAnnotation(!1);return i.parameterName=n,i.typeAnnotation=o,i.asserts=r,e.typeAnnotation=this.finishNode(i,"TSTypePredicate"),this.finishNode(e,"TSTypeAnnotation")})}tsTryParseTypeOrTypePredicateAnnotation(){if(this.match(14))return this.tsParseTypeOrTypePredicateAnnotation(14)}tsTryParseTypeAnnotation(){if(this.match(14))return this.tsParseTypeAnnotation()}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){const t=this.parseIdentifier();if(this.isContextual(114)&&!this.hasPrecedingLineBreak())return this.next(),t}tsParseTypePredicateAsserts(){if(this.state.type!==107)return!1;const t=this.state.containsEsc;return this.next(),!S(this.state.type)&&!this.match(78)?!1:(t&&this.raise(u.InvalidEscapedReservedWord,{at:this.state.lastTokStartLoc,reservedWord:"asserts"}),!0)}tsParseTypeAnnotation(t=!0,e=this.startNode()){return this.tsInType(()=>{t&&this.expect(14),e.typeAnnotation=this.tsParseType()}),this.finishNode(e,"TSTypeAnnotation")}tsParseType(){Ne(this.state.inType);const t=this.tsParseNonConditionalType();if(this.state.inDisallowConditionalTypesContext||this.hasPrecedingLineBreak()||!this.eat(81))return t;const e=this.startNodeAtNode(t);return e.checkType=t,e.extendsType=this.tsInDisallowConditionalTypesContext(()=>this.tsParseNonConditionalType()),this.expect(17),e.trueType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.expect(14),e.falseType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.finishNode(e,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(122)&&this.lookahead().type===77}tsParseNonConditionalType(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(77)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.isAbstractConstructorSignature()?this.tsParseFunctionOrConstructorType("TSConstructorType",!0):this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(y.ReservedTypeAssertion,{at:this.state.startLoc});const t=this.startNode();return t.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?this.tsParseTypeReference():this.tsParseType())),this.expect(48),t.expression=this.parseMaybeUnary(),this.finishNode(t,"TSTypeAssertion")}tsParseHeritageClause(t){const e=this.state.startLoc,i=this.tsParseDelimitedList("HeritageClauseElement",()=>{const r=this.startNode();return r.expression=this.tsParseEntityName(),this.match(47)&&(r.typeParameters=this.tsParseTypeArguments()),this.finishNode(r,"TSExpressionWithTypeArguments")});return i.length||this.raise(y.EmptyHeritageClauseType,{at:e,token:t}),i}tsParseInterfaceDeclaration(t,e={}){if(this.hasFollowingLineBreak())return null;this.expectContextual(127),e.declare&&(t.declare=!0),S(this.state.type)?(t.id=this.parseIdentifier(),this.checkIdentifier(t.id,Ws)):(t.id=null,this.raise(y.MissingInterfaceName,{at:this.state.startLoc})),t.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers),this.eat(81)&&(t.extends=this.tsParseHeritageClause("extends"));const i=this.startNode();return i.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),t.body=this.finishNode(i,"TSInterfaceBody"),this.finishNode(t,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(t){return t.id=this.parseIdentifier(),this.checkIdentifier(t.id,Js),t.typeAnnotation=this.tsInType(()=>{if(t.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers),this.expect(29),this.isContextual(112)&&this.lookahead().type!==16){const e=this.startNode();return this.next(),this.finishNode(e,"TSIntrinsicKeyword")}return this.tsParseType()}),this.semicolon(),this.finishNode(t,"TSTypeAliasDeclaration")}tsInNoContext(t){const e=this.state.context;this.state.context=[e[0]];try{return t()}finally{this.state.context=e}}tsInType(t){const e=this.state.inType;this.state.inType=!0;try{return t()}finally{this.state.inType=e}}tsInDisallowConditionalTypesContext(t){const e=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!0;try{return t()}finally{this.state.inDisallowConditionalTypesContext=e}}tsInAllowConditionalTypesContext(t){const e=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!1;try{return t()}finally{this.state.inDisallowConditionalTypesContext=e}}tsEatThenParseType(t){if(this.match(t))return this.tsNextThenParseType()}tsExpectThenParseType(t){return this.tsInType(()=>(this.expect(t),this.tsParseType()))}tsNextThenParseType(){return this.tsInType(()=>(this.next(),this.tsParseType()))}tsParseEnumMember(){const t=this.startNode();return t.id=this.match(131)?super.parseStringLiteral(this.state.value):this.parseIdentifier(!0),this.eat(29)&&(t.initializer=super.parseMaybeAssignAllowIn()),this.finishNode(t,"TSEnumMember")}tsParseEnumDeclaration(t,e={}){return e.const&&(t.const=!0),e.declare&&(t.declare=!0),this.expectContextual(124),t.id=this.parseIdentifier(),this.checkIdentifier(t.id,t.const?Gs:Xe),this.expect(5),t.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(t,"TSEnumDeclaration")}tsParseModuleBlock(){const t=this.startNode();return this.scope.enter(Q),this.expect(5),super.parseBlockOrModuleBlockBody(t.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(t,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(t,e=!1){if(t.id=this.parseIdentifier(),e||this.checkIdentifier(t.id,Ys),this.eat(16)){const i=this.startNode();this.tsParseModuleOrNamespaceDeclaration(i,!0),t.body=i}else this.scope.enter(st),this.prodParam.enter(rt),t.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(t,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(t){return this.isContextual(110)?(t.global=!0,t.id=this.parseIdentifier()):this.match(131)?t.id=super.parseStringLiteral(this.state.value):this.unexpected(),this.match(5)?(this.scope.enter(st),this.prodParam.enter(rt),t.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit()):this.semicolon(),this.finishNode(t,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(t,e){t.isExport=e||!1,t.id=this.parseIdentifier(),this.checkIdentifier(t.id,ft),this.expect(29);const i=this.tsParseModuleReference();return t.importKind==="type"&&i.type!=="TSExternalModuleReference"&&this.raise(y.ImportAliasHasImportType,{at:i}),t.moduleReference=i,this.semicolon(),this.finishNode(t,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(117)&&this.lookaheadCharCode()===40}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(!1)}tsParseExternalModuleReference(){const t=this.startNode();return this.expectContextual(117),this.expect(10),this.match(131)||this.unexpected(),t.expression=super.parseExprAtom(),this.expect(11),this.finishNode(t,"TSExternalModuleReference")}tsLookAhead(t){const e=this.state.clone(),i=t();return this.state=e,i}tsTryParseAndCatch(t){const e=this.tryParse(i=>t()||i());if(!(e.aborted||!e.node))return e.error&&(this.state=e.failState),e.node}tsTryParse(t){const e=this.state.clone(),i=t();if(i!==void 0&&i!==!1)return i;this.state=e}tsTryParseDeclare(t){if(this.isLineTerminator())return;let e=this.state.type,i;return this.isContextual(99)&&(e=74,i="let"),this.tsInAmbientContext(()=>{switch(e){case 68:return t.declare=!0,super.parseFunctionStatement(t,!1,!1);case 80:return t.declare=!0,this.parseClass(t,!0,!1);case 124:return this.tsParseEnumDeclaration(t,{declare:!0});case 110:return this.tsParseAmbientExternalModuleDeclaration(t);case 75:case 74:return!this.match(75)||!this.isLookaheadContextual("enum")?(t.declare=!0,this.parseVarStatement(t,i||this.state.value,!0)):(this.expect(75),this.tsParseEnumDeclaration(t,{const:!0,declare:!0}));case 127:{const r=this.tsParseInterfaceDeclaration(t,{declare:!0});if(r)return r}default:if(S(e))return this.tsParseDeclaration(t,this.state.value,!0,null)}})}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0,null)}tsParseExpressionStatement(t,e,i){switch(e.name){case"declare":{const r=this.tsTryParseDeclare(t);return r&&(r.declare=!0),r}case"global":if(this.match(5)){this.scope.enter(st),this.prodParam.enter(rt);const r=t;return r.global=!0,r.id=e,r.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode(r,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(t,e.name,!1,i)}}tsParseDeclaration(t,e,i,r){switch(e){case"abstract":if(this.tsCheckLineTerminator(i)&&(this.match(80)||S(this.state.type)))return this.tsParseAbstractDeclaration(t,r);break;case"module":if(this.tsCheckLineTerminator(i)){if(this.match(131))return this.tsParseAmbientExternalModuleDeclaration(t);if(S(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(t)}break;case"namespace":if(this.tsCheckLineTerminator(i)&&S(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(t);break;case"type":if(this.tsCheckLineTerminator(i)&&S(this.state.type))return this.tsParseTypeAliasDeclaration(t);break}}tsCheckLineTerminator(t){return t?this.hasFollowingLineBreak()?!1:(this.next(),!0):!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(t){if(!this.match(47))return;const e=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;const i=this.tsTryParseAndCatch(()=>{const r=this.startNodeAt(t);return r.typeParameters=this.tsParseTypeParameters(this.tsParseConstModifier),super.parseFunctionParams(r),r.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),r});if(this.state.maybeInArrowParameters=e,!!i)return super.parseArrowExpression(i,null,!0)}tsParseTypeArgumentsInExpression(){if(this.reScan_lt()===47)return this.tsParseTypeArguments()}tsParseTypeArguments(){const t=this.startNode();return t.params=this.tsInType(()=>this.tsInNoContext(()=>(this.expect(47),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))))),t.params.length===0&&this.raise(y.EmptyTypeArguments,{at:t}),this.expect(48),this.finishNode(t,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return As(this.state.type)}isExportDefaultSpecifier(){return this.tsIsDeclarationStart()?!1:super.isExportDefaultSpecifier()}parseAssignableListItem(t,e){const i=this.state.startLoc,r={};this.tsParseModifiers({allowedModifiers:["public","private","protected","override","readonly"]},r);const n=r.accessibility,o=r.override,h=r.readonly;!(t&4)&&(n||h||o)&&this.raise(y.UnexpectedParameterModifier,{at:i});const l=this.parseMaybeDefault();this.parseAssignableListItemTypes(l,t);const c=this.parseMaybeDefault(l.loc.start,l);if(n||h||o){const p=this.startNodeAt(i);return e.length&&(p.decorators=e),n&&(p.accessibility=n),h&&(p.readonly=h),o&&(p.override=o),c.type!=="Identifier"&&c.type!=="AssignmentPattern"&&this.raise(y.UnsupportedParameterPropertyKind,{at:p}),p.parameter=c,this.finishNode(p,"TSParameterProperty")}return e.length&&(l.decorators=e),c}isSimpleParameter(t){return t.type==="TSParameterProperty"&&super.isSimpleParameter(t.parameter)||super.isSimpleParameter(t)}tsDisallowOptionalPattern(t){for(const e of t.params)e.type!=="Identifier"&&e.optional&&!this.state.isAmbientContext&&this.raise(y.PatternIsOptional,{at:e})}setArrowFunctionParameters(t,e,i){super.setArrowFunctionParameters(t,e,i),this.tsDisallowOptionalPattern(t)}parseFunctionBodyAndFinish(t,e,i=!1){this.match(14)&&(t.returnType=this.tsParseTypeOrTypePredicateAnnotation(14));const r=e==="FunctionDeclaration"?"TSDeclareFunction":e==="ClassMethod"||e==="ClassPrivateMethod"?"TSDeclareMethod":void 0;return r&&!this.match(5)&&this.isLineTerminator()?this.finishNode(t,r):r==="TSDeclareFunction"&&this.state.isAmbientContext&&(this.raise(y.DeclareFunctionHasImplementation,{at:t}),t.declare)?super.parseFunctionBodyAndFinish(t,r,i):(this.tsDisallowOptionalPattern(t),super.parseFunctionBodyAndFinish(t,e,i))}registerFunctionStatementId(t){!t.body&&t.id?this.checkIdentifier(t.id,Ae):super.registerFunctionStatementId(t)}tsCheckForInvalidTypeCasts(t){t.forEach(e=>{(e==null?void 0:e.type)==="TSTypeCastExpression"&&this.raise(y.UnexpectedTypeAnnotation,{at:e.typeAnnotation})})}toReferencedList(t,e){return this.tsCheckForInvalidTypeCasts(t),t}parseArrayLike(t,e,i,r){const n=super.parseArrayLike(t,e,i,r);return n.type==="ArrayExpression"&&this.tsCheckForInvalidTypeCasts(n.elements),n}parseSubscript(t,e,i,r){if(!this.hasPrecedingLineBreak()&&this.match(35)){this.state.canStartJSXElement=!1,this.next();const o=this.startNodeAt(e);return o.expression=t,this.finishNode(o,"TSNonNullExpression")}let n=!1;if(this.match(18)&&this.lookaheadCharCode()===60){if(i)return r.stop=!0,t;r.optionalChainMember=n=!0,this.next()}if(this.match(47)||this.match(51)){let o;const h=this.tsTryParseAndCatch(()=>{if(!i&&this.atPossibleAsyncArrow(t)){const d=this.tsTryParseGenericAsyncArrowFunction(e);if(d)return d}const l=this.tsParseTypeArgumentsInExpression();if(!l)return;if(n&&!this.match(10)){o=this.state.curPosition();return}if(wt(this.state.type)){const d=super.parseTaggedTemplateExpression(t,e,r);return d.typeParameters=l,d}if(!i&&this.eat(10)){const d=this.startNodeAt(e);return d.callee=t,d.arguments=this.parseCallExpressionArguments(11,!1),this.tsCheckForInvalidTypeCasts(d.arguments),d.typeParameters=l,r.optionalChainMember&&(d.optional=n),this.finishCallExpression(d,r.optionalChainMember)}const c=this.state.type;if(c===48||c===52||c!==10&&qt(c)&&!this.hasPrecedingLineBreak())return;const p=this.startNodeAt(e);return p.expression=t,p.typeParameters=l,this.finishNode(p,"TSInstantiationExpression")});if(o&&this.unexpected(o,10),h)return h.type==="TSInstantiationExpression"&&(this.match(16)||this.match(18)&&this.lookaheadCharCode()!==40)&&this.raise(y.InvalidPropertyAccessAfterInstantiationExpression,{at:this.state.startLoc}),h}return super.parseSubscript(t,e,i,r)}parseNewCallee(t){var e;super.parseNewCallee(t);const{callee:i}=t;i.type==="TSInstantiationExpression"&&!((e=i.extra)!=null&&e.parenthesized)&&(t.typeParameters=i.typeParameters,t.callee=i.expression)}parseExprOp(t,e,i){let r;if(bt(58)>i&&!this.hasPrecedingLineBreak()&&(this.isContextual(93)||(r=this.isContextual(118)))){const n=this.startNodeAt(e);return n.expression=t,n.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?(r&&this.raise(u.UnexpectedKeyword,{at:this.state.startLoc,keyword:"const"}),this.tsParseTypeReference()):this.tsParseType())),this.finishNode(n,r?"TSSatisfiesExpression":"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(n,e,i)}return super.parseExprOp(t,e,i)}checkReservedWord(t,e,i,r){this.state.isAmbientContext||super.checkReservedWord(t,e,i,r)}checkImportReflection(t){super.checkImportReflection(t),t.module&&t.importKind!=="value"&&this.raise(y.ImportReflectionHasImportType,{at:t.specifiers[0].loc.start})}checkDuplicateExports(){}parseImport(t){if(t.importKind="value",S(this.state.type)||this.match(55)||this.match(5)){let i=this.lookahead();if(this.isContextual(128)&&i.type!==12&&i.type!==97&&i.type!==29&&(t.importKind="type",this.next(),i=this.lookahead()),S(this.state.type)&&i.type===29)return this.tsParseImportEqualsDeclaration(t)}const e=super.parseImport(t);return e.importKind==="type"&&e.specifiers.length>1&&e.specifiers[0].type==="ImportDefaultSpecifier"&&this.raise(y.TypeImportCannotSpecifyDefaultAndNamed,{at:e}),e}parseExport(t,e){if(this.match(83))return this.next(),this.isContextual(128)&&this.lookaheadCharCode()!==61?(t.importKind="type",this.next()):t.importKind="value",this.tsParseImportEqualsDeclaration(t,!0);if(this.eat(29)){const i=t;return i.expression=super.parseExpression(),this.semicolon(),this.finishNode(i,"TSExportAssignment")}else if(this.eatContextual(93)){const i=t;return this.expectContextual(126),i.id=this.parseIdentifier(),this.semicolon(),this.finishNode(i,"TSNamespaceExportDeclaration")}else{if(t.exportKind="value",this.isContextual(128)){const i=this.lookaheadCharCode();(i===123||i===42)&&(this.next(),t.exportKind="type")}return super.parseExport(t,e)}}isAbstractClass(){return this.isContextual(122)&&this.lookahead().type===80}parseExportDefaultExpression(){if(this.isAbstractClass()){const t=this.startNode();return this.next(),t.abstract=!0,this.parseClass(t,!0,!0)}if(this.match(127)){const t=this.tsParseInterfaceDeclaration(this.startNode());if(t)return t}return super.parseExportDefaultExpression()}parseVarStatement(t,e,i=!1){const{isAmbientContext:r}=this.state,n=super.parseVarStatement(t,e,i||r);if(!r)return n;for(const{id:o,init:h}of n.declarations)h&&(e!=="const"||o.typeAnnotation?this.raise(y.InitializerNotAllowedInAmbientContext,{at:h}):Ki(h,this.hasPlugin("estree"))||this.raise(y.ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference,{at:h}));return n}parseStatementContent(t,e){if(this.match(75)&&this.isLookaheadContextual("enum")){const i=this.startNode();return this.expect(75),this.tsParseEnumDeclaration(i,{const:!0})}if(this.isContextual(124))return this.tsParseEnumDeclaration(this.startNode());if(this.isContextual(127)){const i=this.tsParseInterfaceDeclaration(this.startNode());if(i)return i}return super.parseStatementContent(t,e)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(t,e){return e.some(i=>ke(i)?t.accessibility===i:!!t[i])}tsIsStartOfStaticBlocks(){return this.isContextual(104)&&this.lookaheadCharCode()===123}parseClassMember(t,e,i){const r=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers({allowedModifiers:r,disallowedModifiers:["in","out"],stopOnStartOfClassStaticBlock:!0,errorTemplate:y.InvalidModifierOnTypeParameterPositions},e);const n=()=>{this.tsIsStartOfStaticBlocks()?(this.next(),this.next(),this.tsHasSomeModifiers(e,r)&&this.raise(y.StaticBlockCannotHaveModifier,{at:this.state.curPosition()}),super.parseClassStaticBlock(t,e)):this.parseClassMemberWithIsStatic(t,e,i,!!e.static)};e.declare?this.tsInAmbientContext(n):n()}parseClassMemberWithIsStatic(t,e,i,r){const n=this.tsTryParseIndexSignature(e);if(n){t.body.push(n),e.abstract&&this.raise(y.IndexSignatureHasAbstract,{at:e}),e.accessibility&&this.raise(y.IndexSignatureHasAccessibility,{at:e,modifier:e.accessibility}),e.declare&&this.raise(y.IndexSignatureHasDeclare,{at:e}),e.override&&this.raise(y.IndexSignatureHasOverride,{at:e});return}!this.state.inAbstractClass&&e.abstract&&this.raise(y.NonAbstractClassHasAbstractMethod,{at:e}),e.override&&(i.hadSuperClass||this.raise(y.OverrideNotInSubClass,{at:e})),super.parseClassMemberWithIsStatic(t,e,i,r)}parsePostMemberNameModifiers(t){this.eat(17)&&(t.optional=!0),t.readonly&&this.match(10)&&this.raise(y.ClassMethodHasReadonly,{at:t}),t.declare&&this.match(10)&&this.raise(y.ClassMethodHasDeclare,{at:t})}parseExpressionStatement(t,e,i){return(e.type==="Identifier"?this.tsParseExpressionStatement(t,e,i):void 0)||super.parseExpressionStatement(t,e,i)}shouldParseExportDeclaration(){return this.tsIsDeclarationStart()?!0:super.shouldParseExportDeclaration()}parseConditional(t,e,i){if(!this.state.maybeInArrowParameters||!this.match(17))return super.parseConditional(t,e,i);const r=this.tryParse(()=>super.parseConditional(t,e));return r.node?(r.error&&(this.state=r.failState),r.node):(r.error&&super.setOptionalParametersError(i,r.error),t)}parseParenItem(t,e){if(t=super.parseParenItem(t,e),this.eat(17)&&(t.optional=!0,this.resetEndLocation(t)),this.match(14)){const i=this.startNodeAt(e);return i.expression=t,i.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(i,"TSTypeCastExpression")}return t}parseExportDeclaration(t){if(!this.state.isAmbientContext&&this.isContextual(123))return this.tsInAmbientContext(()=>this.parseExportDeclaration(t));const e=this.state.startLoc,i=this.eatContextual(123);if(i&&(this.isContextual(123)||!this.shouldParseExportDeclaration()))throw this.raise(y.ExpectedAmbientAfterExportDeclare,{at:this.state.startLoc});const n=S(this.state.type)&&this.tsTryParseExportDeclaration()||super.parseExportDeclaration(t);return n?((n.type==="TSInterfaceDeclaration"||n.type==="TSTypeAliasDeclaration"||i)&&(t.exportKind="type"),i&&(this.resetStartLocation(n,e),n.declare=!0),n):null}parseClassId(t,e,i,r){if((!e||i)&&this.isContextual(111))return;super.parseClassId(t,e,i,t.declare?Ae:We);const n=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers);n&&(t.typeParameters=n)}parseClassPropertyAnnotation(t){t.optional||(this.eat(35)?t.definite=!0:this.eat(17)&&(t.optional=!0));const e=this.tsTryParseTypeAnnotation();e&&(t.typeAnnotation=e)}parseClassProperty(t){if(this.parseClassPropertyAnnotation(t),this.state.isAmbientContext&&!(t.readonly&&!t.typeAnnotation)&&this.match(29)&&this.raise(y.DeclareClassFieldHasInitializer,{at:this.state.startLoc}),t.abstract&&this.match(29)){const{key:e}=t;this.raise(y.AbstractPropertyHasInitializer,{at:this.state.startLoc,propertyName:e.type==="Identifier"&&!t.computed?e.name:`[${this.input.slice(e.start,e.end)}]`})}return super.parseClassProperty(t)}parseClassPrivateProperty(t){return t.abstract&&this.raise(y.PrivateElementHasAbstract,{at:t}),t.accessibility&&this.raise(y.PrivateElementHasAccessibility,{at:t,modifier:t.accessibility}),this.parseClassPropertyAnnotation(t),super.parseClassPrivateProperty(t)}parseClassAccessorProperty(t){return this.parseClassPropertyAnnotation(t),t.optional&&this.raise(y.AccessorCannotBeOptional,{at:t}),super.parseClassAccessorProperty(t)}pushClassMethod(t,e,i,r,n,o){const h=this.tsTryParseTypeParameters(this.tsParseConstModifier);h&&n&&this.raise(y.ConstructorHasTypeParameters,{at:h});const{declare:l=!1,kind:c}=e;l&&(c==="get"||c==="set")&&this.raise(y.DeclareAccessor,{at:e,kind:c}),h&&(e.typeParameters=h),super.pushClassMethod(t,e,i,r,n,o)}pushClassPrivateMethod(t,e,i,r){const n=this.tsTryParseTypeParameters(this.tsParseConstModifier);n&&(e.typeParameters=n),super.pushClassPrivateMethod(t,e,i,r)}declareClassPrivateMethodInScope(t,e){t.type!=="TSDeclareMethod"&&(t.type==="MethodDefinition"&&!t.value.body||super.declareClassPrivateMethodInScope(t,e))}parseClassSuper(t){super.parseClassSuper(t),t.superClass&&(this.match(47)||this.match(51))&&(t.superTypeParameters=this.tsParseTypeArgumentsInExpression()),this.eatContextual(111)&&(t.implements=this.tsParseHeritageClause("implements"))}parseObjPropValue(t,e,i,r,n,o,h){const l=this.tsTryParseTypeParameters(this.tsParseConstModifier);return l&&(t.typeParameters=l),super.parseObjPropValue(t,e,i,r,n,o,h)}parseFunctionParams(t,e){const i=this.tsTryParseTypeParameters(this.tsParseConstModifier);i&&(t.typeParameters=i),super.parseFunctionParams(t,e)}parseVarId(t,e){super.parseVarId(t,e),t.id.type==="Identifier"&&!this.hasPrecedingLineBreak()&&this.eat(35)&&(t.definite=!0);const i=this.tsTryParseTypeAnnotation();i&&(t.id.typeAnnotation=i,this.resetEndLocation(t.id))}parseAsyncArrowFromCallExpression(t,e){return this.match(14)&&(t.returnType=this.tsParseTypeAnnotation()),super.parseAsyncArrowFromCallExpression(t,e)}parseMaybeAssign(t,e){var i,r,n,o,h;let l,c,p;if(this.hasPlugin("jsx")&&(this.match(140)||this.match(47))){if(l=this.state.clone(),c=this.tryParse(()=>super.parseMaybeAssign(t,e),l),!c.error)return c.node;const{context:g}=this.state,I=g[g.length-1];(I===C.j_oTag||I===C.j_expr)&&g.pop()}if(!((i=c)!=null&&i.error)&&!this.match(47))return super.parseMaybeAssign(t,e);(!l||l===this.state)&&(l=this.state.clone());let d;const m=this.tryParse(g=>{var I,E;d=this.tsParseTypeParameters(this.tsParseConstModifier);const w=super.parseMaybeAssign(t,e);return(w.type!=="ArrowFunctionExpression"||(I=w.extra)!=null&&I.parenthesized)&&g(),((E=d)==null?void 0:E.params.length)!==0&&this.resetStartLocationFromNode(w,d),w.typeParameters=d,w},l);if(!m.error&&!m.aborted)return d&&this.reportReservedArrowTypeParam(d),m.node;if(!c&&(Ne(!this.hasPlugin("jsx")),p=this.tryParse(()=>super.parseMaybeAssign(t,e),l),!p.error))return p.node;if((r=c)!=null&&r.node)return this.state=c.failState,c.node;if(m.node)return this.state=m.failState,d&&this.reportReservedArrowTypeParam(d),m.node;if((n=p)!=null&&n.node)return this.state=p.failState,p.node;throw((o=c)==null?void 0:o.error)||m.error||((h=p)==null?void 0:h.error)}reportReservedArrowTypeParam(t){var e;t.params.length===1&&!t.params[0].constraint&&!((e=t.extra)!=null&&e.trailingComma)&&this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(y.ReservedArrowTypeParam,{at:t})}parseMaybeUnary(t,e){return!this.hasPlugin("jsx")&&this.match(47)?this.tsParseTypeAssertion():super.parseMaybeUnary(t,e)}parseArrow(t){if(this.match(14)){const e=this.tryParse(i=>{const r=this.tsParseTypeOrTypePredicateAnnotation(14);return(this.canInsertSemicolon()||!this.match(19))&&i(),r});if(e.aborted)return;e.thrown||(e.error&&(this.state=e.failState),t.returnType=e.node)}return super.parseArrow(t)}parseAssignableListItemTypes(t,e){if(!(e&2))return t;this.eat(17)&&(t.optional=!0);const i=this.tsTryParseTypeAnnotation();return i&&(t.typeAnnotation=i),this.resetEndLocation(t),t}isAssignable(t,e){switch(t.type){case"TSTypeCastExpression":return this.isAssignable(t.expression,e);case"TSParameterProperty":return!0;default:return super.isAssignable(t,e)}}toAssignable(t,e=!1){switch(t.type){case"ParenthesizedExpression":this.toAssignableParenthesizedExpression(t,e);break;case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":e?this.expressionScope.recordArrowParameterBindingError(y.UnexpectedTypeCastInParameter,{at:t}):this.raise(y.UnexpectedTypeCastInParameter,{at:t}),this.toAssignable(t.expression,e);break;case"AssignmentExpression":!e&&t.left.type==="TSTypeCastExpression"&&(t.left=this.typeCastToParameter(t.left));default:super.toAssignable(t,e)}}toAssignableParenthesizedExpression(t,e){switch(t.expression.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":this.toAssignable(t.expression,e);break;default:super.toAssignable(t,e)}}checkToRestConversion(t,e){switch(t.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":this.checkToRestConversion(t.expression,!1);break;default:super.checkToRestConversion(t,e)}}isValidLVal(t,e,i){return ji({TSTypeCastExpression:!0,TSParameterProperty:"parameter",TSNonNullExpression:"expression",TSAsExpression:(i!==H||!e)&&["expression",!0],TSSatisfiesExpression:(i!==H||!e)&&["expression",!0],TSTypeAssertion:(i!==H||!e)&&["expression",!0]},t)||super.isValidLVal(t,e,i)}parseBindingAtom(){return this.state.type===78?this.parseIdentifier(!0):super.parseBindingAtom()}parseMaybeDecoratorArguments(t){if(this.match(47)||this.match(51)){const e=this.tsParseTypeArgumentsInExpression();if(this.match(10)){const i=super.parseMaybeDecoratorArguments(t);return i.typeParameters=e,i}this.unexpected(null,10)}return super.parseMaybeDecoratorArguments(t)}checkCommaAfterRest(t){return this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===t?(this.next(),!1):super.checkCommaAfterRest(t)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(35)||this.match(14)||super.isClassProperty()}parseMaybeDefault(t,e){const i=super.parseMaybeDefault(t,e);return i.type==="AssignmentPattern"&&i.typeAnnotation&&i.right.start<i.typeAnnotation.start&&this.raise(y.TypeAnnotationAfterAssign,{at:i.typeAnnotation}),i}getTokenFromCode(t){if(this.state.inType){if(t===62){this.finishOp(48,1);return}if(t===60){this.finishOp(47,1);return}}super.getTokenFromCode(t)}reScan_lt_gt(){const{type:t}=this.state;t===47?(this.state.pos-=1,this.readToken_lt()):t===48&&(this.state.pos-=1,this.readToken_gt())}reScan_lt(){const{type:t}=this.state;return t===51?(this.state.pos-=2,this.finishOp(47,1),47):t}toAssignableList(t,e,i){for(let r=0;r<t.length;r++){const n=t[r];(n==null?void 0:n.type)==="TSTypeCastExpression"&&(t[r]=this.typeCastToParameter(n))}super.toAssignableList(t,e,i)}typeCastToParameter(t){return t.expression.typeAnnotation=t.typeAnnotation,this.resetEndLocation(t.expression,t.typeAnnotation.loc.end),t.expression}shouldParseArrow(t){return this.match(14)?t.every(e=>this.isAssignable(e,!0)):super.shouldParseArrow(t)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(t){if(this.match(47)||this.match(51)){const e=this.tsTryParseAndCatch(()=>this.tsParseTypeArgumentsInExpression());e&&(t.typeParameters=e)}return super.jsxParseOpeningElementAfterName(t)}getGetterSetterExpectedParamCount(t){const e=super.getGetterSetterExpectedParamCount(t),r=this.getObjectOrClassMethodParams(t)[0];return r&&this.isThisParam(r)?e+1:e}parseCatchClauseParam(){const t=super.parseCatchClauseParam(),e=this.tsTryParseTypeAnnotation();return e&&(t.typeAnnotation=e,this.resetEndLocation(t)),t}tsInAmbientContext(t){const e=this.state.isAmbientContext;this.state.isAmbientContext=!0;try{return t()}finally{this.state.isAmbientContext=e}}parseClass(t,e,i){const r=this.state.inAbstractClass;this.state.inAbstractClass=!!t.abstract;try{return super.parseClass(t,e,i)}finally{this.state.inAbstractClass=r}}tsParseAbstractDeclaration(t,e){if(this.match(80))return t.abstract=!0,this.maybeTakeDecorators(e,this.parseClass(t,!0,!1));if(this.isContextual(127)){if(!this.hasFollowingLineBreak())return t.abstract=!0,this.raise(y.NonClassMethodPropertyHasAbstractModifer,{at:t}),this.tsParseInterfaceDeclaration(t)}else this.unexpected(null,80)}parseMethod(t,e,i,r,n,o,h){const l=super.parseMethod(t,e,i,r,n,o,h);if(l.abstract&&(this.hasPlugin("estree")?!!l.value.body:!!l.body)){const{key:p}=l;this.raise(y.AbstractMethodHasImplementation,{at:l,methodName:p.type==="Identifier"&&!l.computed?p.name:`[${this.input.slice(p.start,p.end)}]`})}return l}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.parse()}getExpression(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.getExpression()}parseExportSpecifier(t,e,i,r){return!e&&r?(this.parseTypeOnlyImportExportSpecifier(t,!1,i),this.finishNode(t,"ExportSpecifier")):(t.exportKind="value",super.parseExportSpecifier(t,e,i,r))}parseImportSpecifier(t,e,i,r,n){return!e&&r?(this.parseTypeOnlyImportExportSpecifier(t,!0,i),this.finishNode(t,"ImportSpecifier")):(t.importKind="value",super.parseImportSpecifier(t,e,i,r,i?Se:ft))}parseTypeOnlyImportExportSpecifier(t,e,i){const r=e?"imported":"local",n=e?"local":"exported";let o=t[r],h,l=!1,c=!0;const p=o.loc.start;if(this.isContextual(93)){const m=this.parseIdentifier();if(this.isContextual(93)){const g=this.parseIdentifier();D(this.state.type)?(l=!0,o=m,h=e?this.parseIdentifier():this.parseModuleExportName(),c=!1):(h=g,c=!1)}else D(this.state.type)?(c=!1,h=e?this.parseIdentifier():this.parseModuleExportName()):(l=!0,o=m)}else D(this.state.type)&&(l=!0,e?(o=this.parseIdentifier(!0),this.isContextual(93)||this.checkReservedWord(o.name,o.loc.start,!0,!0)):o=this.parseModuleExportName());l&&i&&this.raise(e?y.TypeModifierIsUsedInTypeImports:y.TypeModifierIsUsedInTypeExports,{at:p}),t[r]=o,t[n]=h;const d=e?"importKind":"exportKind";t[d]=l?"type":"value",c&&this.eatContextual(93)&&(t[n]=e?this.parseIdentifier():this.parseModuleExportName()),t[n]||(t[n]=U(t[r])),e&&this.checkIdentifier(t[n],l?Se:ft)}};function qi(a){if(a.type!=="MemberExpression")return!1;const{computed:s,property:t}=a;return s&&t.type!=="StringLiteral"&&(t.type!=="TemplateLiteral"||t.expressions.length>0)?!1:os(a.object)}function Ki(a,s){var t;const{type:e}=a;if((t=a.extra)!=null&&t.parenthesized)return!1;if(s){if(e==="Literal"){const{value:i}=a;if(typeof i=="string"||typeof i=="boolean")return!0}}else if(e==="StringLiteral"||e==="BooleanLiteral")return!0;return!!(ns(a,s)||Wi(a,s)||e==="TemplateLiteral"&&a.expressions.length===0||qi(a))}function ns(a,s){return s?a.type==="Literal"&&(typeof a.value=="number"||"bigint"in a):a.type==="NumericLiteral"||a.type==="BigIntLiteral"}function Wi(a,s){if(a.type==="UnaryExpression"){const{operator:t,argument:e}=a;if(t==="-"&&ns(e,s))return!0}return!1}function os(a){return a.type==="Identifier"?!0:a.type!=="MemberExpression"||a.computed?!1:os(a.object)}const ve=_`placeholders`({ClassNameIsRequired:"A class name is required.",UnexpectedSpace:"Unexpected space in placeholder."});var Ji=a=>class extends a{parsePlaceholder(t){if(this.match(142)){const e=this.startNode();return this.next(),this.assertNoSpace(),e.name=super.parseIdentifier(!0),this.assertNoSpace(),this.expect(142),this.finishPlaceholder(e,t)}}finishPlaceholder(t,e){const i=!!(t.expectedNode&&t.type==="Placeholder");return t.expectedNode=e,i?t:this.finishNode(t,"Placeholder")}getTokenFromCode(t){t===37&&this.input.charCodeAt(this.state.pos+1)===37?this.finishOp(142,2):super.getTokenFromCode(t)}parseExprAtom(t){return this.parsePlaceholder("Expression")||super.parseExprAtom(t)}parseIdentifier(t){return this.parsePlaceholder("Identifier")||super.parseIdentifier(t)}checkReservedWord(t,e,i,r){t!==void 0&&super.checkReservedWord(t,e,i,r)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom()}isValidLVal(t,e,i){return t==="Placeholder"||super.isValidLVal(t,e,i)}toAssignable(t,e){t&&t.type==="Placeholder"&&t.expectedNode==="Expression"?t.expectedNode="Pattern":super.toAssignable(t,e)}chStartsBindingIdentifier(t,e){return!!(super.chStartsBindingIdentifier(t,e)||this.lookahead().type===142)}verifyBreakContinue(t,e){t.label&&t.label.type==="Placeholder"||super.verifyBreakContinue(t,e)}parseExpressionStatement(t,e){if(e.type!=="Placeholder"||e.extra&&e.extra.parenthesized)return super.parseExpressionStatement(t,e);if(this.match(14)){const i=t;return i.label=this.finishPlaceholder(e,"Identifier"),this.next(),i.body=super.parseStatementOrSloppyAnnexBFunctionDeclaration(),this.finishNode(i,"LabeledStatement")}return this.semicolon(),t.name=e.name,this.finishPlaceholder(t,"Statement")}parseBlock(t,e,i){return this.parsePlaceholder("BlockStatement")||super.parseBlock(t,e,i)}parseFunctionId(t){return this.parsePlaceholder("Identifier")||super.parseFunctionId(t)}parseClass(t,e,i){const r=e?"ClassDeclaration":"ClassExpression";this.next();const n=this.state.strict,o=this.parsePlaceholder("Identifier");if(o)if(this.match(81)||this.match(142)||this.match(5))t.id=o;else{if(i||!e)return t.id=null,t.body=this.finishPlaceholder(o,"ClassBody"),this.finishNode(t,r);throw this.raise(ve.ClassNameIsRequired,{at:this.state.startLoc})}else this.parseClassId(t,e,i);return super.parseClassSuper(t),t.body=this.parsePlaceholder("ClassBody")||super.parseClassBody(!!t.superClass,n),this.finishNode(t,r)}parseExport(t,e){const i=this.parsePlaceholder("Identifier");if(!i)return super.parseExport(t,e);if(!this.isContextual(97)&&!this.match(12))return t.specifiers=[],t.source=null,t.declaration=this.finishPlaceholder(i,"Declaration"),this.finishNode(t,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");const r=this.startNode();return r.exported=i,t.specifiers=[this.finishNode(r,"ExportDefaultSpecifier")],super.parseExport(t,e)}isExportDefaultSpecifier(){if(this.match(65)){const t=this.nextTokenStart();if(this.isUnparsedContextual(t,"from")&&this.input.startsWith($(142),this.nextTokenStartSince(t+4)))return!0}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(t){return t.specifiers&&t.specifiers.length>0?!0:super.maybeParseExportDefaultSpecifier(t)}checkExport(t){const{specifiers:e}=t;e!=null&&e.length&&(t.specifiers=e.filter(i=>i.exported.type==="Placeholder")),super.checkExport(t),t.specifiers=e}parseImport(t){const e=this.parsePlaceholder("Identifier");if(!e)return super.parseImport(t);if(t.specifiers=[],!this.isContextual(97)&&!this.match(12))return t.source=this.finishPlaceholder(e,"StringLiteral"),this.semicolon(),this.finishNode(t,"ImportDeclaration");const i=this.startNodeAtNode(e);return i.local=e,t.specifiers.push(this.finishNode(i,"ImportDefaultSpecifier")),this.eat(12)&&(this.maybeParseStarImportSpecifier(t)||this.parseNamedImportSpecifiers(t)),this.expectContextual(97),t.source=this.parseImportSource(),this.semicolon(),this.finishNode(t,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource()}assertNoSpace(){this.state.start>this.state.lastTokEndLoc.index&&this.raise(ve.UnexpectedSpace,{at:this.state.lastTokEndLoc})}},Xi=a=>class extends a{parseV8Intrinsic(){if(this.match(54)){const t=this.state.startLoc,e=this.startNode();if(this.next(),S(this.state.type)){const i=this.parseIdentifierName(),r=this.createIdentifier(e,i);if(r.type="V8IntrinsicIdentifier",this.match(10))return r}this.unexpected(t)}}parseExprAtom(t){return this.parseV8Intrinsic()||super.parseExprAtom(t)}};function k(a,s){const[t,e]=typeof s=="string"?[s,{}]:s,i=Object.keys(e),r=i.length===0;return a.some(n=>{if(typeof n=="string")return r&&n===t;{const[o,h]=n;if(o!==t)return!1;for(const l of i)if(h[l]!==e[l])return!1;return!0}})}function W(a,s,t){const e=a.find(i=>Array.isArray(i)?i[0]===s:i===s);return e&&Array.isArray(e)&&e.length>1?e[1][t]:null}const Le=["minimal","fsharp","hack","smart"],De=["^^","@@","^","%","#"],Me=["hash","bar"];function Gi(a){if(k(a,"decorators")){if(k(a,"decorators-legacy"))throw new Error("Cannot use the decorators and decorators-legacy plugin together");const s=W(a,"decorators","decoratorsBeforeExport");if(s!=null&&typeof s!="boolean")throw new Error("'decoratorsBeforeExport' must be a boolean, if specified.");const t=W(a,"decorators","allowCallParenthesized");if(t!=null&&typeof t!="boolean")throw new Error("'allowCallParenthesized' must be a boolean.")}if(k(a,"flow")&&k(a,"typescript"))throw new Error("Cannot combine flow and typescript plugins.");if(k(a,"placeholders")&&k(a,"v8intrinsic"))throw new Error("Cannot combine placeholders and v8intrinsic plugins.");if(k(a,"pipelineOperator")){const s=W(a,"pipelineOperator","proposal");if(!Le.includes(s)){const e=Le.map(i=>`"${i}"`).join(", ");throw new Error(`"pipelineOperator" requires "proposal" option whose value must be one of: ${e}.`)}const t=k(a,["recordAndTuple",{syntaxType:"hash"}]);if(s==="hack"){if(k(a,"placeholders"))throw new Error("Cannot combine placeholders plugin and Hack-style pipes.");if(k(a,"v8intrinsic"))throw new Error("Cannot combine v8intrinsic plugin and Hack-style pipes.");const e=W(a,"pipelineOperator","topicToken");if(!De.includes(e)){const i=De.map(r=>`"${r}"`).join(", ");throw new Error(`"pipelineOperator" in "proposal": "hack" mode also requires a "topicToken" option whose value must be one of: ${i}.`)}if(e==="#"&&t)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "hack", topicToken: "#" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}else if(s==="smart"&&t)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "smart" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}if(k(a,"moduleAttributes")){if(k(a,"importAssertions"))throw new Error("Cannot combine importAssertions and moduleAttributes plugins.");if(W(a,"moduleAttributes","version")!=="may-2020")throw new Error("The 'moduleAttributes' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is 'may-2020'.")}if(k(a,"recordAndTuple")&&W(a,"recordAndTuple","syntaxType")!=null&&!Me.includes(W(a,"recordAndTuple","syntaxType")))throw new Error("The 'syntaxType' option of the 'recordAndTuple' plugin must be one of: "+Me.map(s=>`'${s}'`).join(", "));if(k(a,"asyncDoExpressions")&&!k(a,"doExpressions")){const s=new Error("'asyncDoExpressions' requires 'doExpressions', please add 'doExpressions' to parser plugins.");throw s.missingPlugins="doExpressions",s}}const hs={estree:Fs,jsx:Fi,flow:Mi,typescript:$i,v8intrinsic:Xi,placeholders:Ji},Yi=Object.keys(hs);class Qi extends Ui{checkProto(s,t,e,i){if(s.type==="SpreadElement"||this.isObjectMethod(s)||s.computed||s.shorthand)return;const r=s.key;if((r.type==="Identifier"?r.name:r.value)==="__proto__"){if(t){this.raise(u.RecordNoProto,{at:r});return}e.used&&(i?i.doubleProtoLoc===null&&(i.doubleProtoLoc=r.loc.start):this.raise(u.DuplicateProto,{at:r})),e.used=!0}}shouldExitDescending(s,t){return s.type==="ArrowFunctionExpression"&&s.start===t}getExpression(){this.enterInitialScopes(),this.nextToken();const s=this.parseExpression();return this.match(137)||this.unexpected(),this.finalizeRemainingComments(),s.comments=this.state.comments,s.errors=this.state.errors,this.options.tokens&&(s.tokens=this.tokens),s}parseExpression(s,t){return s?this.disallowInAnd(()=>this.parseExpressionBase(t)):this.allowInAnd(()=>this.parseExpressionBase(t))}parseExpressionBase(s){const t=this.state.startLoc,e=this.parseMaybeAssign(s);if(this.match(12)){const i=this.startNodeAt(t);for(i.expressions=[e];this.eat(12);)i.expressions.push(this.parseMaybeAssign(s));return this.toReferencedList(i.expressions),this.finishNode(i,"SequenceExpression")}return e}parseMaybeAssignDisallowIn(s,t){return this.disallowInAnd(()=>this.parseMaybeAssign(s,t))}parseMaybeAssignAllowIn(s,t){return this.allowInAnd(()=>this.parseMaybeAssign(s,t))}setOptionalParametersError(s,t){var e;s.optionalParametersLoc=(e=t==null?void 0:t.loc)!=null?e:this.state.startLoc}parseMaybeAssign(s,t){const e=this.state.startLoc;if(this.isContextual(106)&&this.prodParam.hasYield){let o=this.parseYield();return t&&(o=t.call(this,o,e)),o}let i;s?i=!1:(s=new Et,i=!0);const{type:r}=this.state;(r===10||S(r))&&(this.state.potentialArrowAt=this.state.start);let n=this.parseMaybeConditional(s);if(t&&(n=t.call(this,n,e)),ys(this.state.type)){const o=this.startNodeAt(e),h=this.state.value;if(o.operator=h,this.match(29)){this.toAssignable(n,!0),o.left=n;const l=e.index;s.doubleProtoLoc!=null&&s.doubleProtoLoc.index>=l&&(s.doubleProtoLoc=null),s.shorthandAssignLoc!=null&&s.shorthandAssignLoc.index>=l&&(s.shorthandAssignLoc=null),s.privateKeyLoc!=null&&s.privateKeyLoc.index>=l&&(this.checkDestructuringPrivate(s),s.privateKeyLoc=null)}else o.left=n;return this.next(),o.right=this.parseMaybeAssign(),this.checkLVal(n,{in:this.finishNode(o,"AssignmentExpression")}),o}else i&&this.checkExpressionErrors(s,!0);return n}parseMaybeConditional(s){const t=this.state.startLoc,e=this.state.potentialArrowAt,i=this.parseExprOps(s);return this.shouldExitDescending(i,e)?i:this.parseConditional(i,t,s)}parseConditional(s,t,e){if(this.eat(17)){const i=this.startNodeAt(t);return i.test=s,i.consequent=this.parseMaybeAssignAllowIn(),this.expect(14),i.alternate=this.parseMaybeAssign(),this.finishNode(i,"ConditionalExpression")}return s}parseMaybeUnaryOrPrivate(s){return this.match(136)?this.parsePrivateName():this.parseMaybeUnary(s)}parseExprOps(s){const t=this.state.startLoc,e=this.state.potentialArrowAt,i=this.parseMaybeUnaryOrPrivate(s);return this.shouldExitDescending(i,e)?i:this.parseExprOp(i,t,-1)}parseExprOp(s,t,e){if(this.isPrivateName(s)){const r=this.getPrivateNameSV(s);(e>=bt(58)||!this.prodParam.hasIn||!this.match(58))&&this.raise(u.PrivateInExpectedIn,{at:s,identifierName:r}),this.classScope.usePrivateName(r,s.loc.start)}const i=this.state.type;if(Ps(i)&&(this.prodParam.hasIn||!this.match(58))){let r=bt(i);if(r>e){if(i===39){if(this.expectPlugin("pipelineOperator"),this.state.inFSharpPipelineDirectBody)return s;this.checkPipelineAtInfixOperator(s,t)}const n=this.startNodeAt(t);n.left=s,n.operator=this.state.value;const o=i===41||i===42,h=i===40;if(h&&(r=bt(42)),this.next(),i===39&&this.hasPlugin(["pipelineOperator",{proposal:"minimal"}])&&this.state.type===96&&this.prodParam.hasAwait)throw this.raise(u.UnexpectedAwaitAfterPipelineBody,{at:this.state.startLoc});n.right=this.parseExprOpRightExpr(i,r);const l=this.finishNode(n,o||h?"LogicalExpression":"BinaryExpression"),c=this.state.type;if(h&&(c===41||c===42)||o&&c===40)throw this.raise(u.MixingCoalesceWithLogical,{at:this.state.startLoc});return this.parseExprOp(l,t,e)}}return s}parseExprOpRightExpr(s,t){const e=this.state.startLoc;switch(s){case 39:switch(this.getPluginOption("pipelineOperator","proposal")){case"hack":return this.withTopicBindingContext(()=>this.parseHackPipeBody());case"smart":return this.withTopicBindingContext(()=>{if(this.prodParam.hasYield&&this.isContextual(106))throw this.raise(u.PipeBodyIsTighter,{at:this.state.startLoc});return this.parseSmartPipelineBodyInStyle(this.parseExprOpBaseRightExpr(s,t),e)});case"fsharp":return this.withSoloAwaitPermittingContext(()=>this.parseFSharpPipelineBody(t))}default:return this.parseExprOpBaseRightExpr(s,t)}}parseExprOpBaseRightExpr(s,t){const e=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnaryOrPrivate(),e,Ss(s)?t-1:t)}parseHackPipeBody(){var s;const{startLoc:t}=this.state,e=this.parseMaybeAssign();return ks.has(e.type)&&!((s=e.extra)!=null&&s.parenthesized)&&this.raise(u.PipeUnparenthesizedBody,{at:t,type:e.type}),this.topicReferenceWasUsedInCurrentContext()||this.raise(u.PipeTopicUnused,{at:t}),e}checkExponentialAfterUnary(s){this.match(57)&&this.raise(u.UnexpectedTokenUnaryExponentiation,{at:s.argument})}parseMaybeUnary(s,t){const e=this.state.startLoc,i=this.isContextual(96);if(i&&this.isAwaitAllowed()){this.next();const h=this.parseAwait(e);return t||this.checkExponentialAfterUnary(h),h}const r=this.match(34),n=this.startNode();if(Ts(this.state.type)){n.operator=this.state.value,n.prefix=!0,this.match(72)&&this.expectPlugin("throwExpressions");const h=this.match(89);if(this.next(),n.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(s,!0),this.state.strict&&h){const l=n.argument;l.type==="Identifier"?this.raise(u.StrictDelete,{at:n}):this.hasPropertyAsPrivateName(l)&&this.raise(u.DeletePrivateField,{at:n})}if(!r)return t||this.checkExponentialAfterUnary(n),this.finishNode(n,"UnaryExpression")}const o=this.parseUpdate(n,r,s);if(i){const{type:h}=this.state;if((this.hasPlugin("v8intrinsic")?qt(h):qt(h)&&!this.match(54))&&!this.isAmbiguousAwait())return this.raiseOverwrite(u.AwaitNotInAsyncContext,{at:e}),this.parseAwait(e)}return o}parseUpdate(s,t,e){if(t){const n=s;return this.checkLVal(n.argument,{in:this.finishNode(n,"UpdateExpression")}),s}const i=this.state.startLoc;let r=this.parseExprSubscripts(e);if(this.checkExpressionErrors(e,!1))return r;for(;gs(this.state.type)&&!this.canInsertSemicolon();){const n=this.startNodeAt(i);n.operator=this.state.value,n.prefix=!1,n.argument=r,this.next(),this.checkLVal(r,{in:r=this.finishNode(n,"UpdateExpression")})}return r}parseExprSubscripts(s){const t=this.state.startLoc,e=this.state.potentialArrowAt,i=this.parseExprAtom(s);return this.shouldExitDescending(i,e)?i:this.parseSubscripts(i,t)}parseSubscripts(s,t,e){const i={optionalChainMember:!1,maybeAsyncArrow:this.atPossibleAsyncArrow(s),stop:!1};do s=this.parseSubscript(s,t,e,i),i.maybeAsyncArrow=!1;while(!i.stop);return s}parseSubscript(s,t,e,i){const{type:r}=this.state;if(!e&&r===15)return this.parseBind(s,t,e,i);if(wt(r))return this.parseTaggedTemplateExpression(s,t,i);let n=!1;if(r===18){if(e&&(this.raise(u.OptionalChainingNoNew,{at:this.state.startLoc}),this.lookaheadCharCode()===40))return i.stop=!0,s;i.optionalChainMember=n=!0,this.next()}if(!e&&this.match(10))return this.parseCoverCallAndAsyncArrowHead(s,t,i,n);{const o=this.eat(0);return o||n||this.eat(16)?this.parseMember(s,t,i,o,n):(i.stop=!0,s)}}parseMember(s,t,e,i,r){const n=this.startNodeAt(t);return n.object=s,n.computed=i,i?(n.property=this.parseExpression(),this.expect(3)):this.match(136)?(s.type==="Super"&&this.raise(u.SuperPrivateField,{at:t}),this.classScope.usePrivateName(this.state.value,this.state.startLoc),n.property=this.parsePrivateName()):n.property=this.parseIdentifier(!0),e.optionalChainMember?(n.optional=r,this.finishNode(n,"OptionalMemberExpression")):this.finishNode(n,"MemberExpression")}parseBind(s,t,e,i){const r=this.startNodeAt(t);return r.object=s,this.next(),r.callee=this.parseNoCallExpr(),i.stop=!0,this.parseSubscripts(this.finishNode(r,"BindExpression"),t,e)}parseCoverCallAndAsyncArrowHead(s,t,e,i){const r=this.state.maybeInArrowParameters;let n=null;this.state.maybeInArrowParameters=!0,this.next();const o=this.startNodeAt(t);o.callee=s;const{maybeAsyncArrow:h,optionalChainMember:l}=e;h&&(this.expressionScope.enter(Ai()),n=new Et),l&&(o.optional=i),i?o.arguments=this.parseCallExpressionArguments(11):o.arguments=this.parseCallExpressionArguments(11,s.type==="Import",s.type!=="Super",o,n);let c=this.finishCallExpression(o,l);return h&&this.shouldParseAsyncArrow()&&!i?(e.stop=!0,this.checkDestructuringPrivate(n),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),c=this.parseAsyncArrowFromCallExpression(this.startNodeAt(t),c)):(h&&(this.checkExpressionErrors(n,!0),this.expressionScope.exit()),this.toReferencedArguments(c)),this.state.maybeInArrowParameters=r,c}toReferencedArguments(s,t){this.toReferencedListDeep(s.arguments,t)}parseTaggedTemplateExpression(s,t,e){const i=this.startNodeAt(t);return i.tag=s,i.quasi=this.parseTemplate(!0),e.optionalChainMember&&this.raise(u.OptionalChainingNoTemplate,{at:t}),this.finishNode(i,"TaggedTemplateExpression")}atPossibleAsyncArrow(s){return s.type==="Identifier"&&s.name==="async"&&this.state.lastTokEndLoc.index===s.end&&!this.canInsertSemicolon()&&s.end-s.start===5&&s.start===this.state.potentialArrowAt}finishCallExpression(s,t){if(s.callee.type==="Import")if(s.arguments.length===2&&(this.hasPlugin("moduleAttributes")||this.expectPlugin("importAssertions")),s.arguments.length===0||s.arguments.length>2)this.raise(u.ImportCallArity,{at:s,maxArgumentCount:this.hasPlugin("importAssertions")||this.hasPlugin("moduleAttributes")?2:1});else for(const e of s.arguments)e.type==="SpreadElement"&&this.raise(u.ImportCallSpreadArgument,{at:e});return this.finishNode(s,t?"OptionalCallExpression":"CallExpression")}parseCallExpressionArguments(s,t,e,i,r){const n=[];let o=!0;const h=this.state.inFSharpPipelineDirectBody;for(this.state.inFSharpPipelineDirectBody=!1;!this.eat(s);){if(o)o=!1;else if(this.expect(12),this.match(s)){t&&!this.hasPlugin("importAssertions")&&!this.hasPlugin("moduleAttributes")&&this.raise(u.ImportCallArgumentTrailingComma,{at:this.state.lastTokStartLoc}),i&&this.addTrailingCommaExtraToNode(i),this.next();break}n.push(this.parseExprListItem(!1,r,e))}return this.state.inFSharpPipelineDirectBody=h,n}shouldParseAsyncArrow(){return this.match(19)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(s,t){var e;return this.resetPreviousNodeTrailingComments(t),this.expect(19),this.parseArrowExpression(s,t.arguments,!0,(e=t.extra)==null?void 0:e.trailingCommaLoc),t.innerComments&&yt(s,t.innerComments),t.callee.trailingComments&&yt(s,t.callee.trailingComments),s}parseNoCallExpr(){const s=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),s,!0)}parseExprAtom(s){let t,e=null;const{type:i}=this.state;switch(i){case 79:return this.parseSuper();case 83:return t=this.startNode(),this.next(),this.match(16)?this.parseImportMetaProperty(t):(this.match(10)||this.raise(u.UnsupportedImport,{at:this.state.lastTokStartLoc}),this.finishNode(t,"Import"));case 78:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case 90:return this.parseDo(this.startNode(),!1);case 56:case 31:return this.readRegexp(),this.parseRegExpLiteral(this.state.value);case 132:return this.parseNumericLiteral(this.state.value);case 133:return this.parseBigIntLiteral(this.state.value);case 134:return this.parseDecimalLiteral(this.state.value);case 131:return this.parseStringLiteral(this.state.value);case 84:return this.parseNullLiteral();case 85:return this.parseBooleanLiteral(!0);case 86:return this.parseBooleanLiteral(!1);case 10:{const r=this.state.potentialArrowAt===this.state.start;return this.parseParenAndDistinguishExpression(r)}case 2:case 1:return this.parseArrayLike(this.state.type===2?4:3,!1,!0);case 0:return this.parseArrayLike(3,!0,!1,s);case 6:case 7:return this.parseObjectLike(this.state.type===6?9:8,!1,!0);case 5:return this.parseObjectLike(8,!1,!1,s);case 68:return this.parseFunctionOrFunctionSent();case 26:e=this.parseDecorators();case 80:return this.parseClass(this.maybeTakeDecorators(e,this.startNode()),!1);case 77:return this.parseNewOrNewTarget();case 25:case 24:return this.parseTemplate(!1);case 15:{t=this.startNode(),this.next(),t.object=null;const r=t.callee=this.parseNoCallExpr();if(r.type==="MemberExpression")return this.finishNode(t,"BindExpression");throw this.raise(u.UnsupportedBind,{at:r})}case 136:return this.raise(u.PrivateInExpectedIn,{at:this.state.startLoc,identifierName:this.state.value}),this.parsePrivateName();case 33:return this.parseTopicReferenceThenEqualsSign(54,"%");case 32:return this.parseTopicReferenceThenEqualsSign(44,"^");case 37:case 38:return this.parseTopicReference("hack");case 44:case 54:case 27:{const r=this.getPluginOption("pipelineOperator","proposal");if(r)return this.parseTopicReference(r);this.unexpected();break}case 47:{const r=this.input.codePointAt(this.nextTokenStart());B(r)||r===62?this.expectOnePlugin(["jsx","flow","typescript"]):this.unexpected();break}default:if(S(i)){if(this.isContextual(125)&&this.lookaheadInLineCharCode()===123)return this.parseModuleExpression();const r=this.state.potentialArrowAt===this.state.start,n=this.state.containsEsc,o=this.parseIdentifier();if(!n&&o.name==="async"&&!this.canInsertSemicolon()){const{type:h}=this.state;if(h===68)return this.resetPreviousNodeTrailingComments(o),this.next(),this.parseAsyncFunctionExpression(this.startNodeAtNode(o));if(S(h))return this.lookaheadCharCode()===61?this.parseAsyncArrowUnaryFunction(this.startNodeAtNode(o)):o;if(h===90)return this.resetPreviousNodeTrailingComments(o),this.parseDo(this.startNodeAtNode(o),!0)}return r&&this.match(19)&&!this.canInsertSemicolon()?(this.next(),this.parseArrowExpression(this.startNodeAtNode(o),[o],!1)):o}else this.unexpected()}}parseTopicReferenceThenEqualsSign(s,t){const e=this.getPluginOption("pipelineOperator","proposal");if(e)return this.state.type=s,this.state.value=t,this.state.pos--,this.state.end--,this.state.endLoc=L(this.state.endLoc,-1),this.parseTopicReference(e);this.unexpected()}parseTopicReference(s){const t=this.startNode(),e=this.state.startLoc,i=this.state.type;return this.next(),this.finishTopicReference(t,e,s,i)}finishTopicReference(s,t,e,i){if(this.testTopicReferenceConfiguration(e,t,i)){const r=e==="smart"?"PipelinePrimaryTopicReference":"TopicReference";return this.topicReferenceIsAllowedInCurrentContext()||this.raise(e==="smart"?u.PrimaryTopicNotAllowed:u.PipeTopicUnbound,{at:t}),this.registerTopicReference(),this.finishNode(s,r)}else throw this.raise(u.PipeTopicUnconfiguredToken,{at:t,token:$(i)})}testTopicReferenceConfiguration(s,t,e){switch(s){case"hack":return this.hasPlugin(["pipelineOperator",{topicToken:$(e)}]);case"smart":return e===27;default:throw this.raise(u.PipeTopicRequiresHackPipes,{at:t})}}parseAsyncArrowUnaryFunction(s){this.prodParam.enter(Ct(!0,this.prodParam.hasYield));const t=[this.parseIdentifier()];return this.prodParam.exit(),this.hasPrecedingLineBreak()&&this.raise(u.LineTerminatorBeforeArrow,{at:this.state.curPosition()}),this.expect(19),this.parseArrowExpression(s,t,!0)}parseDo(s,t){this.expectPlugin("doExpressions"),t&&this.expectPlugin("asyncDoExpressions"),s.async=t,this.next();const e=this.state.labels;return this.state.labels=[],t?(this.prodParam.enter(_t),s.body=this.parseBlock(),this.prodParam.exit()):s.body=this.parseBlock(),this.state.labels=e,this.finishNode(s,"DoExpression")}parseSuper(){const s=this.startNode();return this.next(),this.match(10)&&!this.scope.allowDirectSuper&&!this.options.allowSuperOutsideMethod?this.raise(u.SuperNotAllowed,{at:s}):!this.scope.allowSuper&&!this.options.allowSuperOutsideMethod&&this.raise(u.UnexpectedSuper,{at:s}),!this.match(10)&&!this.match(0)&&!this.match(16)&&this.raise(u.UnsupportedSuper,{at:s}),this.finishNode(s,"Super")}parsePrivateName(){const s=this.startNode(),t=this.startNodeAt(L(this.state.startLoc,1)),e=this.state.value;return this.next(),s.id=this.createIdentifier(t,e),this.finishNode(s,"PrivateName")}parseFunctionOrFunctionSent(){const s=this.startNode();if(this.next(),this.prodParam.hasYield&&this.match(16)){const t=this.createIdentifier(this.startNodeAtNode(s),"function");return this.next(),this.match(102)?this.expectPlugin("functionSent"):this.hasPlugin("functionSent")||this.unexpected(),this.parseMetaProperty(s,t,"sent")}return this.parseFunction(s)}parseMetaProperty(s,t,e){s.meta=t;const i=this.state.containsEsc;return s.property=this.parseIdentifier(!0),(s.property.name!==e||i)&&this.raise(u.UnsupportedMetaProperty,{at:s.property,target:t.name,onlyValidPropertyName:e}),this.finishNode(s,"MetaProperty")}parseImportMetaProperty(s){const t=this.createIdentifier(this.startNodeAtNode(s),"import");return this.next(),this.isContextual(100)&&(this.inModule||this.raise(u.ImportMetaOutsideModule,{at:t}),this.sawUnambiguousESM=!0),this.parseMetaProperty(s,t,"meta")}parseLiteralAtNode(s,t,e){return this.addExtra(e,"rawValue",s),this.addExtra(e,"raw",this.input.slice(e.start,this.state.end)),e.value=s,this.next(),this.finishNode(e,t)}parseLiteral(s,t){const e=this.startNode();return this.parseLiteralAtNode(s,t,e)}parseStringLiteral(s){return this.parseLiteral(s,"StringLiteral")}parseNumericLiteral(s){return this.parseLiteral(s,"NumericLiteral")}parseBigIntLiteral(s){return this.parseLiteral(s,"BigIntLiteral")}parseDecimalLiteral(s){return this.parseLiteral(s,"DecimalLiteral")}parseRegExpLiteral(s){const t=this.parseLiteral(s.value,"RegExpLiteral");return t.pattern=s.pattern,t.flags=s.flags,t}parseBooleanLiteral(s){const t=this.startNode();return t.value=s,this.next(),this.finishNode(t,"BooleanLiteral")}parseNullLiteral(){const s=this.startNode();return this.next(),this.finishNode(s,"NullLiteral")}parseParenAndDistinguishExpression(s){const t=this.state.startLoc;let e;this.next(),this.expressionScope.enter(bi());const i=this.state.maybeInArrowParameters,r=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.inFSharpPipelineDirectBody=!1;const n=this.state.startLoc,o=[],h=new Et;let l=!0,c,p;for(;!this.match(11);){if(l)l=!1;else if(this.expect(12,h.optionalParametersLoc===null?null:h.optionalParametersLoc),this.match(11)){p=this.state.startLoc;break}if(this.match(21)){const g=this.state.startLoc;if(c=this.state.startLoc,o.push(this.parseParenItem(this.parseRestBinding(),g)),!this.checkCommaAfterRest(41))break}else o.push(this.parseMaybeAssignAllowIn(h,this.parseParenItem))}const d=this.state.lastTokEndLoc;this.expect(11),this.state.maybeInArrowParameters=i,this.state.inFSharpPipelineDirectBody=r;let m=this.startNodeAt(t);return s&&this.shouldParseArrow(o)&&(m=this.parseArrow(m))?(this.checkDestructuringPrivate(h),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),this.parseArrowExpression(m,o,!1),m):(this.expressionScope.exit(),o.length||this.unexpected(this.state.lastTokStartLoc),p&&this.unexpected(p),c&&this.unexpected(c),this.checkExpressionErrors(h,!0),this.toReferencedListDeep(o,!0),o.length>1?(e=this.startNodeAt(n),e.expressions=o,this.finishNode(e,"SequenceExpression"),this.resetEndLocation(e,d)):e=o[0],this.wrapParenthesis(t,e))}wrapParenthesis(s,t){if(!this.options.createParenthesizedExpressions)return this.addExtra(t,"parenthesized",!0),this.addExtra(t,"parenStart",s.index),this.takeSurroundingComments(t,s.index,this.state.lastTokEndLoc.index),t;const e=this.startNodeAt(s);return e.expression=t,this.finishNode(e,"ParenthesizedExpression")}shouldParseArrow(s){return!this.canInsertSemicolon()}parseArrow(s){if(this.eat(19))return s}parseParenItem(s,t){return s}parseNewOrNewTarget(){const s=this.startNode();if(this.next(),this.match(16)){const t=this.createIdentifier(this.startNodeAtNode(s),"new");this.next();const e=this.parseMetaProperty(s,t,"target");return!this.scope.inNonArrowFunction&&!this.scope.inClass&&!this.options.allowNewTargetOutsideFunction&&this.raise(u.UnexpectedNewTarget,{at:e}),e}return this.parseNew(s)}parseNew(s){if(this.parseNewCallee(s),this.eat(10)){const t=this.parseExprList(11);this.toReferencedList(t),s.arguments=t}else s.arguments=[];return this.finishNode(s,"NewExpression")}parseNewCallee(s){s.callee=this.parseNoCallExpr(),s.callee.type==="Import"&&this.raise(u.ImportCallNotNewExpression,{at:s.callee})}parseTemplateElement(s){const{start:t,startLoc:e,end:i,value:r}=this.state,n=t+1,o=this.startNodeAt(L(e,1));r===null&&(s||this.raise(u.InvalidEscapeSequenceTemplate,{at:L(this.state.firstInvalidTemplateEscapePos,1)}));const h=this.match(24),l=h?-1:-2,c=i+l;o.value={raw:this.input.slice(n,c).replace(/\r\n?/g,`
`),cooked:r===null?null:r.slice(1,l)},o.tail=h,this.next();const p=this.finishNode(o,"TemplateElement");return this.resetEndLocation(p,L(this.state.lastTokEndLoc,l)),p}parseTemplate(s){const t=this.startNode();t.expressions=[];let e=this.parseTemplateElement(s);for(t.quasis=[e];!e.tail;)t.expressions.push(this.parseTemplateSubstitution()),this.readTemplateContinuation(),t.quasis.push(e=this.parseTemplateElement(s));return this.finishNode(t,"TemplateLiteral")}parseTemplateSubstitution(){return this.parseExpression()}parseObjectLike(s,t,e,i){e&&this.expectPlugin("recordAndTuple");const r=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;const n=Object.create(null);let o=!0;const h=this.startNode();for(h.properties=[],this.next();!this.match(s);){if(o)o=!1;else if(this.expect(12),this.match(s)){this.addTrailingCommaExtraToNode(h);break}let c;t?c=this.parseBindingProperty():(c=this.parsePropertyDefinition(i),this.checkProto(c,e,n,i)),e&&!this.isObjectProperty(c)&&c.type!=="SpreadElement"&&this.raise(u.InvalidRecordProperty,{at:c}),c.shorthand&&this.addExtra(c,"shorthand",!0),h.properties.push(c)}this.next(),this.state.inFSharpPipelineDirectBody=r;let l="ObjectExpression";return t?l="ObjectPattern":e&&(l="RecordExpression"),this.finishNode(h,l)}addTrailingCommaExtraToNode(s){this.addExtra(s,"trailingComma",this.state.lastTokStart),this.addExtra(s,"trailingCommaLoc",this.state.lastTokStartLoc,!1)}maybeAsyncOrAccessorProp(s){return!s.computed&&s.key.type==="Identifier"&&(this.isLiteralPropertyName()||this.match(0)||this.match(55))}parsePropertyDefinition(s){let t=[];if(this.match(26))for(this.hasPlugin("decorators")&&this.raise(u.UnsupportedPropertyDecorator,{at:this.state.startLoc});this.match(26);)t.push(this.parseDecorator());const e=this.startNode();let i=!1,r=!1,n;if(this.match(21))return t.length&&this.unexpected(),this.parseSpread();t.length&&(e.decorators=t,t=[]),e.method=!1,s&&(n=this.state.startLoc);let o=this.eat(55);this.parsePropertyNamePrefixOperator(e);const h=this.state.containsEsc,l=this.parsePropertyName(e,s);if(!o&&!h&&this.maybeAsyncOrAccessorProp(e)){const c=l.name;c==="async"&&!this.hasPrecedingLineBreak()&&(i=!0,this.resetPreviousNodeTrailingComments(l),o=this.eat(55),this.parsePropertyName(e)),(c==="get"||c==="set")&&(r=!0,this.resetPreviousNodeTrailingComments(l),e.kind=c,this.match(55)&&(o=!0,this.raise(u.AccessorIsGenerator,{at:this.state.curPosition(),kind:c}),this.next()),this.parsePropertyName(e))}return this.parseObjPropValue(e,n,o,i,!1,r,s)}getGetterSetterExpectedParamCount(s){return s.kind==="get"?0:1}getObjectOrClassMethodParams(s){return s.params}checkGetterSetterParams(s){var t;const e=this.getGetterSetterExpectedParamCount(s),i=this.getObjectOrClassMethodParams(s);i.length!==e&&this.raise(s.kind==="get"?u.BadGetterArity:u.BadSetterArity,{at:s}),s.kind==="set"&&((t=i[i.length-1])==null?void 0:t.type)==="RestElement"&&this.raise(u.BadSetterRestParameter,{at:s})}parseObjectMethod(s,t,e,i,r){if(r){const n=this.parseMethod(s,t,!1,!1,!1,"ObjectMethod");return this.checkGetterSetterParams(n),n}if(e||t||this.match(10))return i&&this.unexpected(),s.kind="method",s.method=!0,this.parseMethod(s,t,e,!1,!1,"ObjectMethod")}parseObjectProperty(s,t,e,i){if(s.shorthand=!1,this.eat(14))return s.value=e?this.parseMaybeDefault(this.state.startLoc):this.parseMaybeAssignAllowIn(i),this.finishNode(s,"ObjectProperty");if(!s.computed&&s.key.type==="Identifier"){if(this.checkReservedWord(s.key.name,s.key.loc.start,!0,!1),e)s.value=this.parseMaybeDefault(t,U(s.key));else if(this.match(29)){const r=this.state.startLoc;i!=null?i.shorthandAssignLoc===null&&(i.shorthandAssignLoc=r):this.raise(u.InvalidCoverInitializedName,{at:r}),s.value=this.parseMaybeDefault(t,U(s.key))}else s.value=U(s.key);return s.shorthand=!0,this.finishNode(s,"ObjectProperty")}}parseObjPropValue(s,t,e,i,r,n,o){const h=this.parseObjectMethod(s,e,i,r,n)||this.parseObjectProperty(s,t,r,o);return h||this.unexpected(),h}parsePropertyName(s,t){if(this.eat(0))s.computed=!0,s.key=this.parseMaybeAssignAllowIn(),this.expect(3);else{const{type:e,value:i}=this.state;let r;if(D(e))r=this.parseIdentifier(!0);else switch(e){case 132:r=this.parseNumericLiteral(i);break;case 131:r=this.parseStringLiteral(i);break;case 133:r=this.parseBigIntLiteral(i);break;case 134:r=this.parseDecimalLiteral(i);break;case 136:{const n=this.state.startLoc;t!=null?t.privateKeyLoc===null&&(t.privateKeyLoc=n):this.raise(u.UnexpectedPrivateField,{at:n}),r=this.parsePrivateName();break}default:this.unexpected()}s.key=r,e!==136&&(s.computed=!1)}return s.key}initFunction(s,t){s.id=null,s.generator=!1,s.async=t}parseMethod(s,t,e,i,r,n,o=!1){this.initFunction(s,e),s.generator=t,this.scope.enter(R|kt|(o?J:0)|(r?$e:0)),this.prodParam.enter(Ct(e,s.generator)),this.parseFunctionParams(s,i);const h=this.parseFunctionBodyAndFinish(s,n,!0);return this.prodParam.exit(),this.scope.exit(),h}parseArrayLike(s,t,e,i){e&&this.expectPlugin("recordAndTuple");const r=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;const n=this.startNode();return this.next(),n.elements=this.parseExprList(s,!e,i,n),this.state.inFSharpPipelineDirectBody=r,this.finishNode(n,e?"TupleExpression":"ArrayExpression")}parseArrowExpression(s,t,e,i){this.scope.enter(R|he);let r=Ct(e,!1);!this.match(5)&&this.prodParam.hasIn&&(r|=Y),this.prodParam.enter(r),this.initFunction(s,e);const n=this.state.maybeInArrowParameters;return t&&(this.state.maybeInArrowParameters=!0,this.setArrowFunctionParameters(s,t,i)),this.state.maybeInArrowParameters=!1,this.parseFunctionBody(s,!0),this.prodParam.exit(),this.scope.exit(),this.state.maybeInArrowParameters=n,this.finishNode(s,"ArrowFunctionExpression")}setArrowFunctionParameters(s,t,e){this.toAssignableList(t,e,!1),s.params=t}parseFunctionBodyAndFinish(s,t,e=!1){return this.parseFunctionBody(s,!1,e),this.finishNode(s,t)}parseFunctionBody(s,t,e=!1){const i=t&&!this.match(5);if(this.expressionScope.enter(ss()),i)s.body=this.parseMaybeAssign(),this.checkParams(s,!1,t,!1);else{const r=this.state.strict,n=this.state.labels;this.state.labels=[],this.prodParam.enter(this.prodParam.currentFlags()|rs),s.body=this.parseBlock(!0,!1,o=>{const h=!this.isSimpleParamList(s.params);o&&h&&this.raise(u.IllegalLanguageModeDirective,{at:(s.kind==="method"||s.kind==="constructor")&&s.key?s.key.loc.end:s});const l=!r&&this.state.strict;this.checkParams(s,!this.state.strict&&!t&&!e&&!h,t,l),this.state.strict&&s.id&&this.checkIdentifier(s.id,Xs,l)}),this.prodParam.exit(),this.state.labels=n}this.expressionScope.exit()}isSimpleParameter(s){return s.type==="Identifier"}isSimpleParamList(s){for(let t=0,e=s.length;t<e;t++)if(!this.isSimpleParameter(s[t]))return!1;return!0}checkParams(s,t,e,i=!0){const r=!t&&new Set,n={type:"FormalParameters"};for(const o of s.params)this.checkLVal(o,{in:n,binding:Dt,checkClashes:r,strictModeChanged:i})}parseExprList(s,t,e,i){const r=[];let n=!0;for(;!this.eat(s);){if(n)n=!1;else if(this.expect(12),this.match(s)){i&&this.addTrailingCommaExtraToNode(i),this.next();break}r.push(this.parseExprListItem(t,e))}return r}parseExprListItem(s,t,e){let i;if(this.match(12))s||this.raise(u.UnexpectedToken,{at:this.state.curPosition(),unexpected:","}),i=null;else if(this.match(21)){const r=this.state.startLoc;i=this.parseParenItem(this.parseSpread(t),r)}else if(this.match(17)){this.expectPlugin("partialApplication"),e||this.raise(u.UnexpectedArgumentPlaceholder,{at:this.state.startLoc});const r=this.startNode();this.next(),i=this.finishNode(r,"ArgumentPlaceholder")}else i=this.parseMaybeAssignAllowIn(t,this.parseParenItem);return i}parseIdentifier(s){const t=this.startNode(),e=this.parseIdentifierName(s);return this.createIdentifier(t,e)}createIdentifier(s,t){return s.name=t,s.loc.identifierName=t,this.finishNode(s,"Identifier")}parseIdentifierName(s){let t;const{startLoc:e,type:i}=this.state;D(i)?t=this.state.value:this.unexpected();const r=fs(i);return s?r&&this.replaceToken(130):this.checkReservedWord(t,e,r,!1),this.next(),t}checkReservedWord(s,t,e,i){if(s.length>10||!qs(s))return;if(e&&Vs(s)){this.raise(u.UnexpectedKeyword,{at:t,keyword:s});return}if((this.state.strict?i?Ve:je:Ue)(s,this.inModule)){this.raise(u.UnexpectedReservedWord,{at:t,reservedWord:s});return}else if(s==="yield"){if(this.prodParam.hasYield){this.raise(u.YieldBindingIdentifier,{at:t});return}}else if(s==="await"){if(this.prodParam.hasAwait){this.raise(u.AwaitBindingIdentifier,{at:t});return}if(this.scope.inStaticBlock){this.raise(u.AwaitBindingIdentifierInStaticBlock,{at:t});return}this.expressionScope.recordAsyncArrowParametersError({at:t})}else if(s==="arguments"&&this.scope.inClassAndNotInNonArrowFunction){this.raise(u.ArgumentsInClass,{at:t});return}}isAwaitAllowed(){return!!(this.prodParam.hasAwait||this.options.allowAwaitOutsideFunction&&!this.scope.inFunction)}parseAwait(s){const t=this.startNodeAt(s);return this.expressionScope.recordParameterInitializerError(u.AwaitExpressionFormalParameter,{at:t}),this.eat(55)&&this.raise(u.ObsoleteAwaitStar,{at:t}),!this.scope.inFunction&&!this.options.allowAwaitOutsideFunction&&(this.isAmbiguousAwait()?this.ambiguousScriptDifferentAst=!0:this.sawUnambiguousESM=!0),this.state.soloAwait||(t.argument=this.parseMaybeUnary(null,!0)),this.finishNode(t,"AwaitExpression")}isAmbiguousAwait(){if(this.hasPrecedingLineBreak())return!0;const{type:s}=this.state;return s===53||s===10||s===0||wt(s)||s===101&&!this.state.containsEsc||s===135||s===56||this.hasPlugin("v8intrinsic")&&s===54}parseYield(){const s=this.startNode();this.expressionScope.recordParameterInitializerError(u.YieldInParameter,{at:s}),this.next();let t=!1,e=null;if(!this.hasPrecedingLineBreak())switch(t=this.eat(55),this.state.type){case 13:case 137:case 8:case 11:case 3:case 9:case 14:case 12:if(!t)break;default:e=this.parseMaybeAssign()}return s.delegate=t,s.argument=e,this.finishNode(s,"YieldExpression")}checkPipelineAtInfixOperator(s,t){this.hasPlugin(["pipelineOperator",{proposal:"smart"}])&&s.type==="SequenceExpression"&&this.raise(u.PipelineHeadSequenceExpression,{at:t})}parseSmartPipelineBodyInStyle(s,t){if(this.isSimpleReference(s)){const e=this.startNodeAt(t);return e.callee=s,this.finishNode(e,"PipelineBareFunction")}else{const e=this.startNodeAt(t);return this.checkSmartPipeTopicBodyEarlyErrors(t),e.expression=s,this.finishNode(e,"PipelineTopicExpression")}}isSimpleReference(s){switch(s.type){case"MemberExpression":return!s.computed&&this.isSimpleReference(s.object);case"Identifier":return!0;default:return!1}}checkSmartPipeTopicBodyEarlyErrors(s){if(this.match(19))throw this.raise(u.PipelineBodyNoArrow,{at:this.state.startLoc});this.topicReferenceWasUsedInCurrentContext()||this.raise(u.PipelineTopicUnused,{at:s})}withTopicBindingContext(s){const t=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return s()}finally{this.state.topicContext=t}}withSmartMixTopicForbiddingContext(s){if(this.hasPlugin(["pipelineOperator",{proposal:"smart"}])){const t=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return s()}finally{this.state.topicContext=t}}else return s()}withSoloAwaitPermittingContext(s){const t=this.state.soloAwait;this.state.soloAwait=!0;try{return s()}finally{this.state.soloAwait=t}}allowInAnd(s){const t=this.prodParam.currentFlags();if(Y&~t){this.prodParam.enter(t|Y);try{return s()}finally{this.prodParam.exit()}}return s()}disallowInAnd(s){const t=this.prodParam.currentFlags();if(Y&t){this.prodParam.enter(t&~Y);try{return s()}finally{this.prodParam.exit()}}return s()}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}topicReferenceIsAllowedInCurrentContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentContext(){return this.state.topicContext.maxTopicIndex!=null&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(s){const t=this.state.startLoc;this.state.potentialArrowAt=this.state.start;const e=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;const i=this.parseExprOp(this.parseMaybeUnaryOrPrivate(),t,s);return this.state.inFSharpPipelineDirectBody=e,i}parseModuleExpression(){this.expectPlugin("moduleBlocks");const s=this.startNode();this.next(),this.match(5)||this.unexpected(null,5);const t=this.startNodeAt(this.state.endLoc);this.next();const e=this.initializeScopes(!0);this.enterInitialScopes();try{s.body=this.parseProgram(t,8,"module")}finally{e()}return this.finishNode(s,"ModuleExpression")}parsePropertyNamePrefixOperator(s){}}const Ht={kind:"loop"},Zi={kind:"switch"},tr=/[\uD800-\uDFFF]/u,$t=/in(?:stanceof)?/y;function er(a,s){for(let t=0;t<a.length;t++){const e=a[t],{type:i}=e;if(typeof i=="number"){{if(i===136){const{loc:r,start:n,value:o,end:h}=e,l=n+1,c=L(r.start,1);a.splice(t,1,new V({type:O(27),value:"#",start:n,end:l,startLoc:r.start,endLoc:c}),new V({type:O(130),value:o,start:l,end:h,startLoc:c,endLoc:r.end})),t++;continue}if(wt(i)){const{loc:r,start:n,value:o,end:h}=e,l=n+1,c=L(r.start,1);let p;s.charCodeAt(n)===96?p=new V({type:O(22),value:"`",start:n,end:l,startLoc:r.start,endLoc:c}):p=new V({type:O(8),value:"}",start:n,end:l,startLoc:r.start,endLoc:c});let d,m,g,I;i===24?(m=h-1,g=L(r.end,-1),d=o===null?null:o.slice(1,-1),I=new V({type:O(22),value:"`",start:m,end:h,startLoc:g,endLoc:r.end})):(m=h-2,g=L(r.end,-2),d=o===null?null:o.slice(1,-2),I=new V({type:O(23),value:"${",start:m,end:h,startLoc:g,endLoc:r.end})),a.splice(t,1,p,new V({type:O(20),value:d,start:l,end:m,startLoc:c,endLoc:g}),I),t+=2;continue}}e.type=O(i)}}return a}class sr extends Qi{parseTopLevel(s,t){return s.program=this.parseProgram(t),s.comments=this.state.comments,this.options.tokens&&(s.tokens=er(this.tokens,this.input)),this.finishNode(s,"File")}parseProgram(s,t=137,e=this.options.sourceType){if(s.sourceType=e,s.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(s,!0,!0,t),this.inModule&&!this.options.allowUndeclaredExports&&this.scope.undefinedExports.size>0)for(const[r,n]of Array.from(this.scope.undefinedExports))this.raise(u.ModuleExportUndefined,{at:n,localName:r});let i;return t===137?i=this.finishNode(s,"Program"):i=this.finishNodeAt(s,"Program",L(this.state.startLoc,-1)),i}stmtToDirective(s){const t=s;t.type="Directive",t.value=t.expression,delete t.expression;const e=t.value,i=e.value,r=this.input.slice(e.start,e.end),n=e.value=r.slice(1,-1);return this.addExtra(e,"raw",r),this.addExtra(e,"rawValue",n),this.addExtra(e,"expressionValue",i),e.type="DirectiveLiteral",t}parseInterpreterDirective(){if(!this.match(28))return null;const s=this.startNode();return s.value=this.state.value,this.next(),this.finishNode(s,"InterpreterDirective")}isLet(){return this.isContextual(99)?this.hasFollowingBindingAtom():!1}chStartsBindingIdentifier(s,t){if(B(s)){if($t.lastIndex=t,$t.test(this.input)){const e=this.codePointAtPos($t.lastIndex);if(!et(e)&&e!==92)return!1}return!0}else return s===92}chStartsBindingPattern(s){return s===91||s===123}hasFollowingBindingAtom(){const s=this.nextTokenStart(),t=this.codePointAtPos(s);return this.chStartsBindingPattern(t)||this.chStartsBindingIdentifier(t,s)}hasInLineFollowingBindingIdentifier(){const s=this.nextTokenInLineStart(),t=this.codePointAtPos(s);return this.chStartsBindingIdentifier(t,s)}startsUsingForOf(){const{type:s,containsEsc:t}=this.lookahead();if(s===101&&!t)return!1;if(S(s)&&!this.hasFollowingLineBreak())return this.expectPlugin("explicitResourceManagement"),!0}parseModuleItem(){return this.parseStatementLike(15)}parseStatementListItem(){return this.parseStatementLike(6|(!this.options.annexB||this.state.strict?0:8))}parseStatementOrSloppyAnnexBFunctionDeclaration(s=!1){let t=0;return this.options.annexB&&!this.state.strict&&(t|=4,s&&(t|=8)),this.parseStatementLike(t)}parseStatement(){return this.parseStatementLike(0)}parseStatementLike(s){let t=null;return this.match(26)&&(t=this.parseDecorators(!0)),this.parseStatementContent(s,t)}parseStatementContent(s,t){const e=this.state.type,i=this.startNode(),r=!!(s&2),n=!!(s&4),o=s&1;switch(e){case 60:return this.parseBreakContinueStatement(i,!0);case 63:return this.parseBreakContinueStatement(i,!1);case 64:return this.parseDebuggerStatement(i);case 90:return this.parseDoWhileStatement(i);case 91:return this.parseForStatement(i);case 68:if(this.lookaheadCharCode()===46)break;return n||this.raise(this.state.strict?u.StrictFunction:this.options.annexB?u.SloppyFunctionAnnexB:u.SloppyFunction,{at:this.state.startLoc}),this.parseFunctionStatement(i,!1,!r&&n);case 80:return r||this.unexpected(),this.parseClass(this.maybeTakeDecorators(t,i),!0);case 69:return this.parseIfStatement(i);case 70:return this.parseReturnStatement(i);case 71:return this.parseSwitchStatement(i);case 72:return this.parseThrowStatement(i);case 73:return this.parseTryStatement(i);case 105:if(this.state.containsEsc||!this.hasInLineFollowingBindingIdentifier())break;return this.expectPlugin("explicitResourceManagement"),!this.scope.inModule&&this.scope.inTopLevel?this.raise(u.UnexpectedUsingDeclaration,{at:this.state.startLoc}):r||this.raise(u.UnexpectedLexicalDeclaration,{at:this.state.startLoc}),this.parseVarStatement(i,"using");case 99:{if(this.state.containsEsc)break;const c=this.nextTokenStart(),p=this.codePointAtPos(c);if(p!==91&&(!r&&this.hasFollowingLineBreak()||!this.chStartsBindingIdentifier(p,c)&&p!==123))break}case 75:r||this.raise(u.UnexpectedLexicalDeclaration,{at:this.state.startLoc});case 74:{const c=this.state.value;return this.parseVarStatement(i,c)}case 92:return this.parseWhileStatement(i);case 76:return this.parseWithStatement(i);case 5:return this.parseBlock();case 13:return this.parseEmptyStatement(i);case 83:{const c=this.lookaheadCharCode();if(c===40||c===46)break}case 82:{!this.options.allowImportExportEverywhere&&!o&&this.raise(u.UnexpectedImportExport,{at:this.state.startLoc}),this.next();let c;return e===83?(c=this.parseImport(i),c.type==="ImportDeclaration"&&(!c.importKind||c.importKind==="value")&&(this.sawUnambiguousESM=!0)):(c=this.parseExport(i,t),(c.type==="ExportNamedDeclaration"&&(!c.exportKind||c.exportKind==="value")||c.type==="ExportAllDeclaration"&&(!c.exportKind||c.exportKind==="value")||c.type==="ExportDefaultDeclaration")&&(this.sawUnambiguousESM=!0)),this.assertModuleNodeAllowed(c),c}default:if(this.isAsyncFunction())return r||this.raise(u.AsyncFunctionInSingleStatementContext,{at:this.state.startLoc}),this.next(),this.parseFunctionStatement(i,!0,!r&&n)}const h=this.state.value,l=this.parseExpression();return S(e)&&l.type==="Identifier"&&this.eat(14)?this.parseLabeledStatement(i,h,l,s):this.parseExpressionStatement(i,l,t)}assertModuleNodeAllowed(s){!this.options.allowImportExportEverywhere&&!this.inModule&&this.raise(u.ImportOutsideModule,{at:s})}decoratorsEnabledBeforeExport(){return this.hasPlugin("decorators-legacy")?!0:this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")!==!1}maybeTakeDecorators(s,t,e){return s&&(t.decorators&&t.decorators.length>0?(typeof this.getPluginOption("decorators","decoratorsBeforeExport")!="boolean"&&this.raise(u.DecoratorsBeforeAfterExport,{at:t.decorators[0]}),t.decorators.unshift(...s)):t.decorators=s,this.resetStartLocationFromNode(t,s[0]),e&&this.resetStartLocationFromNode(e,t)),t}canHaveLeadingDecorator(){return this.match(80)}parseDecorators(s){const t=[];do t.push(this.parseDecorator());while(this.match(26));if(this.match(82))s||this.unexpected(),this.decoratorsEnabledBeforeExport()||this.raise(u.DecoratorExportClass,{at:this.state.startLoc});else if(!this.canHaveLeadingDecorator())throw this.raise(u.UnexpectedLeadingDecorator,{at:this.state.startLoc});return t}parseDecorator(){this.expectOnePlugin(["decorators","decorators-legacy"]);const s=this.startNode();if(this.next(),this.hasPlugin("decorators")){const t=this.state.startLoc;let e;if(this.match(10)){const i=this.state.startLoc;this.next(),e=this.parseExpression(),this.expect(11),e=this.wrapParenthesis(i,e);const r=this.state.startLoc;s.expression=this.parseMaybeDecoratorArguments(e),this.getPluginOption("decorators","allowCallParenthesized")===!1&&s.expression!==e&&this.raise(u.DecoratorArgumentsOutsideParentheses,{at:r})}else{for(e=this.parseIdentifier(!1);this.eat(16);){const i=this.startNodeAt(t);i.object=e,this.match(136)?(this.classScope.usePrivateName(this.state.value,this.state.startLoc),i.property=this.parsePrivateName()):i.property=this.parseIdentifier(!0),i.computed=!1,e=this.finishNode(i,"MemberExpression")}s.expression=this.parseMaybeDecoratorArguments(e)}}else s.expression=this.parseExprSubscripts();return this.finishNode(s,"Decorator")}parseMaybeDecoratorArguments(s){if(this.eat(10)){const t=this.startNodeAtNode(s);return t.callee=s,t.arguments=this.parseCallExpressionArguments(11,!1),this.toReferencedList(t.arguments),this.finishNode(t,"CallExpression")}return s}parseBreakContinueStatement(s,t){return this.next(),this.isLineTerminator()?s.label=null:(s.label=this.parseIdentifier(),this.semicolon()),this.verifyBreakContinue(s,t),this.finishNode(s,t?"BreakStatement":"ContinueStatement")}verifyBreakContinue(s,t){let e;for(e=0;e<this.state.labels.length;++e){const i=this.state.labels[e];if((s.label==null||i.name===s.label.name)&&(i.kind!=null&&(t||i.kind==="loop")||s.label&&t))break}if(e===this.state.labels.length){const i=t?"BreakStatement":"ContinueStatement";this.raise(u.IllegalBreakContinue,{at:s,type:i})}}parseDebuggerStatement(s){return this.next(),this.semicolon(),this.finishNode(s,"DebuggerStatement")}parseHeaderExpression(){this.expect(10);const s=this.parseExpression();return this.expect(11),s}parseDoWhileStatement(s){return this.next(),this.state.labels.push(Ht),s.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.expect(92),s.test=this.parseHeaderExpression(),this.eat(13),this.finishNode(s,"DoWhileStatement")}parseForStatement(s){this.next(),this.state.labels.push(Ht);let t=null;if(this.isAwaitAllowed()&&this.eatContextual(96)&&(t=this.state.lastTokStartLoc),this.scope.enter(Q),this.expect(10),this.match(13))return t!==null&&this.unexpected(t),this.parseFor(s,null);const e=this.isContextual(99),i=this.isContextual(105),r=e&&this.hasFollowingBindingAtom()||i&&this.startsUsingForOf();if(this.match(74)||this.match(75)||r){const c=this.startNode(),p=this.state.value;this.next(),this.parseVar(c,!0,p);const d=this.finishNode(c,"VariableDeclaration"),m=this.match(58);return m&&i&&this.raise(u.ForInUsing,{at:d}),(m||this.isContextual(101))&&d.declarations.length===1?this.parseForIn(s,d,t):(t!==null&&this.unexpected(t),this.parseFor(s,d))}const n=this.isContextual(95),o=new Et,h=this.parseExpression(!0,o),l=this.isContextual(101);if(l&&(e&&this.raise(u.ForOfLet,{at:h}),t===null&&n&&h.type==="Identifier"&&this.raise(u.ForOfAsync,{at:h})),l||this.match(58)){this.checkDestructuringPrivate(o),this.toAssignable(h,!0);const c=l?"ForOfStatement":"ForInStatement";return this.checkLVal(h,{in:{type:c}}),this.parseForIn(s,h,t)}else this.checkExpressionErrors(o,!0);return t!==null&&this.unexpected(t),this.parseFor(s,h)}parseFunctionStatement(s,t,e){return this.next(),this.parseFunction(s,1|(e?2:0)|(t?8:0))}parseIfStatement(s){return this.next(),s.test=this.parseHeaderExpression(),s.consequent=this.parseStatementOrSloppyAnnexBFunctionDeclaration(),s.alternate=this.eat(66)?this.parseStatementOrSloppyAnnexBFunctionDeclaration():null,this.finishNode(s,"IfStatement")}parseReturnStatement(s){return!this.prodParam.hasReturn&&!this.options.allowReturnOutsideFunction&&this.raise(u.IllegalReturn,{at:this.state.startLoc}),this.next(),this.isLineTerminator()?s.argument=null:(s.argument=this.parseExpression(),this.semicolon()),this.finishNode(s,"ReturnStatement")}parseSwitchStatement(s){this.next(),s.discriminant=this.parseHeaderExpression();const t=s.cases=[];this.expect(5),this.state.labels.push(Zi),this.scope.enter(Q);let e;for(let i;!this.match(8);)if(this.match(61)||this.match(65)){const r=this.match(61);e&&this.finishNode(e,"SwitchCase"),t.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(i&&this.raise(u.MultipleDefaultsInSwitch,{at:this.state.lastTokStartLoc}),i=!0,e.test=null),this.expect(14)}else e?e.consequent.push(this.parseStatementListItem()):this.unexpected();return this.scope.exit(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.state.labels.pop(),this.finishNode(s,"SwitchStatement")}parseThrowStatement(s){return this.next(),this.hasPrecedingLineBreak()&&this.raise(u.NewlineAfterThrow,{at:this.state.lastTokEndLoc}),s.argument=this.parseExpression(),this.semicolon(),this.finishNode(s,"ThrowStatement")}parseCatchClauseParam(){const s=this.parseBindingAtom();return this.scope.enter(this.options.annexB&&s.type==="Identifier"?He:0),this.checkLVal(s,{in:{type:"CatchClause"},binding:Ks}),s}parseTryStatement(s){if(this.next(),s.block=this.parseBlock(),s.handler=null,this.match(62)){const t=this.startNode();this.next(),this.match(10)?(this.expect(10),t.param=this.parseCatchClauseParam(),this.expect(11)):(t.param=null,this.scope.enter(Q)),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseBlock(!1,!1)),this.scope.exit(),s.handler=this.finishNode(t,"CatchClause")}return s.finalizer=this.eat(67)?this.parseBlock():null,!s.handler&&!s.finalizer&&this.raise(u.NoCatchOrFinally,{at:s}),this.finishNode(s,"TryStatement")}parseVarStatement(s,t,e=!1){return this.next(),this.parseVar(s,!1,t,e),this.semicolon(),this.finishNode(s,"VariableDeclaration")}parseWhileStatement(s){return this.next(),s.test=this.parseHeaderExpression(),this.state.labels.push(Ht),s.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.finishNode(s,"WhileStatement")}parseWithStatement(s){return this.state.strict&&this.raise(u.StrictWith,{at:this.state.startLoc}),this.next(),s.object=this.parseHeaderExpression(),s.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.finishNode(s,"WithStatement")}parseEmptyStatement(s){return this.next(),this.finishNode(s,"EmptyStatement")}parseLabeledStatement(s,t,e,i){for(const n of this.state.labels)n.name===t&&this.raise(u.LabelRedeclaration,{at:e,labelName:t});const r=xs(this.state.type)?"loop":this.match(71)?"switch":null;for(let n=this.state.labels.length-1;n>=0;n--){const o=this.state.labels[n];if(o.statementStart===s.start)o.statementStart=this.state.start,o.kind=r;else break}return this.state.labels.push({name:t,kind:r,statementStart:this.state.start}),s.body=i&8?this.parseStatementOrSloppyAnnexBFunctionDeclaration(!0):this.parseStatement(),this.state.labels.pop(),s.label=e,this.finishNode(s,"LabeledStatement")}parseExpressionStatement(s,t,e){return s.expression=t,this.semicolon(),this.finishNode(s,"ExpressionStatement")}parseBlock(s=!1,t=!0,e){const i=this.startNode();return s&&this.state.strictErrors.clear(),this.expect(5),t&&this.scope.enter(Q),this.parseBlockBody(i,s,!1,8,e),t&&this.scope.exit(),this.finishNode(i,"BlockStatement")}isValidDirective(s){return s.type==="ExpressionStatement"&&s.expression.type==="StringLiteral"&&!s.expression.extra.parenthesized}parseBlockBody(s,t,e,i,r){const n=s.body=[],o=s.directives=[];this.parseBlockOrModuleBlockBody(n,t?o:void 0,e,i,r)}parseBlockOrModuleBlockBody(s,t,e,i,r){const n=this.state.strict;let o=!1,h=!1;for(;!this.match(i);){const l=e?this.parseModuleItem():this.parseStatementListItem();if(t&&!h){if(this.isValidDirective(l)){const c=this.stmtToDirective(l);t.push(c),!o&&c.value.value==="use strict"&&(o=!0,this.setStrict(!0));continue}h=!0,this.state.strictErrors.clear()}s.push(l)}r&&r.call(this,o),n||this.setStrict(!1),this.next()}parseFor(s,t){return s.init=t,this.semicolon(!1),s.test=this.match(13)?null:this.parseExpression(),this.semicolon(!1),s.update=this.match(11)?null:this.parseExpression(),this.expect(11),s.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(s,"ForStatement")}parseForIn(s,t,e){const i=this.match(58);return this.next(),i?e!==null&&this.unexpected(e):s.await=e!==null,t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!i||!this.options.annexB||this.state.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(u.ForInOfLoopInitializer,{at:t,type:i?"ForInStatement":"ForOfStatement"}),t.type==="AssignmentPattern"&&this.raise(u.InvalidLhs,{at:t,ancestor:{type:"ForStatement"}}),s.left=t,s.right=i?this.parseExpression():this.parseMaybeAssignAllowIn(),this.expect(11),s.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(s,i?"ForInStatement":"ForOfStatement")}parseVar(s,t,e,i=!1){const r=s.declarations=[];for(s.kind=e;;){const n=this.startNode();if(this.parseVarId(n,e),n.init=this.eat(29)?t?this.parseMaybeAssignDisallowIn():this.parseMaybeAssignAllowIn():null,n.init===null&&!i&&(n.id.type!=="Identifier"&&!(t&&(this.match(58)||this.isContextual(101)))?this.raise(u.DeclarationMissingInitializer,{at:this.state.lastTokEndLoc,kind:"destructuring"}):e==="const"&&!(this.match(58)||this.isContextual(101))&&this.raise(u.DeclarationMissingInitializer,{at:this.state.lastTokEndLoc,kind:"const"})),r.push(this.finishNode(n,"VariableDeclarator")),!this.eat(12))break}return s}parseVarId(s,t){const e=this.parseBindingAtom();this.checkLVal(e,{in:{type:"VariableDeclarator"},binding:t==="var"?Dt:it}),s.id=e}parseAsyncFunctionExpression(s){return this.parseFunction(s,8)}parseFunction(s,t=0){const e=t&2,i=!!(t&1),r=i&&!(t&4),n=!!(t&8);this.initFunction(s,n),this.match(55)&&(e&&this.raise(u.GeneratorInSingleStatementContext,{at:this.state.startLoc}),this.next(),s.generator=!0),i&&(s.id=this.parseFunctionId(r));const o=this.state.maybeInArrowParameters;return this.state.maybeInArrowParameters=!1,this.scope.enter(R),this.prodParam.enter(Ct(n,s.generator)),i||(s.id=this.parseFunctionId()),this.parseFunctionParams(s,!1),this.withSmartMixTopicForbiddingContext(()=>{this.parseFunctionBodyAndFinish(s,i?"FunctionDeclaration":"FunctionExpression")}),this.prodParam.exit(),this.scope.exit(),i&&!e&&this.registerFunctionStatementId(s),this.state.maybeInArrowParameters=o,s}parseFunctionId(s){return s||S(this.state.type)?this.parseIdentifier():null}parseFunctionParams(s,t){this.expect(10),this.expressionScope.enter(Ti()),s.params=this.parseBindingList(11,41,2|(t?4:0)),this.expressionScope.exit()}registerFunctionStatementId(s){s.id&&this.scope.declareName(s.id.name,!this.options.annexB||this.state.strict||s.generator||s.async?this.scope.treatFunctionsAsVar?Dt:it:Je,s.id.loc.start)}parseClass(s,t,e){this.next();const i=this.state.strict;return this.state.strict=!0,this.parseClassId(s,t,e),this.parseClassSuper(s),s.body=this.parseClassBody(!!s.superClass,i),this.finishNode(s,t?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(29)||this.match(13)||this.match(8)}isClassMethod(){return this.match(10)}isNonstaticConstructor(s){return!s.computed&&!s.static&&(s.key.name==="constructor"||s.key.value==="constructor")}parseClassBody(s,t){this.classScope.enter();const e={hadConstructor:!1,hadSuperClass:s};let i=[];const r=this.startNode();if(r.body=[],this.expect(5),this.withSmartMixTopicForbiddingContext(()=>{for(;!this.match(8);){if(this.eat(13)){if(i.length>0)throw this.raise(u.DecoratorSemicolon,{at:this.state.lastTokEndLoc});continue}if(this.match(26)){i.push(this.parseDecorator());continue}const n=this.startNode();i.length&&(n.decorators=i,this.resetStartLocationFromNode(n,i[0]),i=[]),this.parseClassMember(r,n,e),n.kind==="constructor"&&n.decorators&&n.decorators.length>0&&this.raise(u.DecoratorConstructor,{at:n})}}),this.state.strict=t,this.next(),i.length)throw this.raise(u.TrailingDecorator,{at:this.state.startLoc});return this.classScope.exit(),this.finishNode(r,"ClassBody")}parseClassMemberFromModifier(s,t){const e=this.parseIdentifier(!0);if(this.isClassMethod()){const i=t;return i.kind="method",i.computed=!1,i.key=e,i.static=!1,this.pushClassMethod(s,i,!1,!1,!1,!1),!0}else if(this.isClassProperty()){const i=t;return i.computed=!1,i.key=e,i.static=!1,s.body.push(this.parseClassProperty(i)),!0}return this.resetPreviousNodeTrailingComments(e),!1}parseClassMember(s,t,e){const i=this.isContextual(104);if(i){if(this.parseClassMemberFromModifier(s,t))return;if(this.eat(5)){this.parseClassStaticBlock(s,t);return}}this.parseClassMemberWithIsStatic(s,t,e,i)}parseClassMemberWithIsStatic(s,t,e,i){const r=t,n=t,o=t,h=t,l=t,c=r,p=r;if(t.static=i,this.parsePropertyNamePrefixOperator(t),this.eat(55)){c.kind="method";const E=this.match(136);if(this.parseClassElementName(c),E){this.pushClassPrivateMethod(s,n,!0,!1);return}this.isNonstaticConstructor(r)&&this.raise(u.ConstructorIsGenerator,{at:r.key}),this.pushClassMethod(s,r,!0,!1,!1,!1);return}const d=S(this.state.type)&&!this.state.containsEsc,m=this.match(136),g=this.parseClassElementName(t),I=this.state.startLoc;if(this.parsePostMemberNameModifiers(p),this.isClassMethod()){if(c.kind="method",m){this.pushClassPrivateMethod(s,n,!1,!1);return}const E=this.isNonstaticConstructor(r);let w=!1;E&&(r.kind="constructor",e.hadConstructor&&!this.hasPlugin("typescript")&&this.raise(u.DuplicateConstructor,{at:g}),E&&this.hasPlugin("typescript")&&t.override&&this.raise(u.OverrideOnConstructor,{at:g}),e.hadConstructor=!0,w=e.hadSuperClass),this.pushClassMethod(s,r,!1,!1,E,w)}else if(this.isClassProperty())m?this.pushClassPrivateProperty(s,h):this.pushClassProperty(s,o);else if(d&&g.name==="async"&&!this.isLineTerminator()){this.resetPreviousNodeTrailingComments(g);const E=this.eat(55);p.optional&&this.unexpected(I),c.kind="method";const w=this.match(136);this.parseClassElementName(c),this.parsePostMemberNameModifiers(p),w?this.pushClassPrivateMethod(s,n,E,!0):(this.isNonstaticConstructor(r)&&this.raise(u.ConstructorIsAsync,{at:r.key}),this.pushClassMethod(s,r,E,!0,!1,!1))}else if(d&&(g.name==="get"||g.name==="set")&&!(this.match(55)&&this.isLineTerminator())){this.resetPreviousNodeTrailingComments(g),c.kind=g.name;const E=this.match(136);this.parseClassElementName(r),E?this.pushClassPrivateMethod(s,n,!1,!1):(this.isNonstaticConstructor(r)&&this.raise(u.ConstructorIsAccessor,{at:r.key}),this.pushClassMethod(s,r,!1,!1,!1,!1)),this.checkGetterSetterParams(r)}else if(d&&g.name==="accessor"&&!this.isLineTerminator()){this.expectPlugin("decoratorAutoAccessors"),this.resetPreviousNodeTrailingComments(g);const E=this.match(136);this.parseClassElementName(o),this.pushClassAccessorProperty(s,l,E)}else this.isLineTerminator()?m?this.pushClassPrivateProperty(s,h):this.pushClassProperty(s,o):this.unexpected()}parseClassElementName(s){const{type:t,value:e}=this.state;if((t===130||t===131)&&s.static&&e==="prototype"&&this.raise(u.StaticPrototype,{at:this.state.startLoc}),t===136){e==="constructor"&&this.raise(u.ConstructorClassPrivateField,{at:this.state.startLoc});const i=this.parsePrivateName();return s.key=i,i}return this.parsePropertyName(s)}parseClassStaticBlock(s,t){var e;this.scope.enter(J|vt|kt);const i=this.state.labels;this.state.labels=[],this.prodParam.enter(rt);const r=t.body=[];this.parseBlockOrModuleBlockBody(r,void 0,!1,8),this.prodParam.exit(),this.scope.exit(),this.state.labels=i,s.body.push(this.finishNode(t,"StaticBlock")),(e=t.decorators)!=null&&e.length&&this.raise(u.DecoratorStaticBlock,{at:t})}pushClassProperty(s,t){!t.computed&&(t.key.name==="constructor"||t.key.value==="constructor")&&this.raise(u.ConstructorClassField,{at:t.key}),s.body.push(this.parseClassProperty(t))}pushClassPrivateProperty(s,t){const e=this.parseClassPrivateProperty(t);s.body.push(e),this.classScope.declarePrivateName(this.getPrivateNameSV(e.key),jt,e.key.loc.start)}pushClassAccessorProperty(s,t,e){if(!e&&!t.computed){const r=t.key;(r.name==="constructor"||r.value==="constructor")&&this.raise(u.ConstructorClassField,{at:r})}const i=this.parseClassAccessorProperty(t);s.body.push(i),e&&this.classScope.declarePrivateName(this.getPrivateNameSV(i.key),jt,i.key.loc.start)}pushClassMethod(s,t,e,i,r,n){s.body.push(this.parseMethod(t,e,i,r,n,"ClassMethod",!0))}pushClassPrivateMethod(s,t,e,i){const r=this.parseMethod(t,e,i,!1,!1,"ClassPrivateMethod",!0);s.body.push(r);const n=r.kind==="get"?r.static?Zs:ei:r.kind==="set"?r.static?ti:si:jt;this.declareClassPrivateMethodInScope(r,n)}declareClassPrivateMethodInScope(s,t){this.classScope.declarePrivateName(this.getPrivateNameSV(s.key),t,s.key.loc.start)}parsePostMemberNameModifiers(s){}parseClassPrivateProperty(s){return this.parseInitializer(s),this.semicolon(),this.finishNode(s,"ClassPrivateProperty")}parseClassProperty(s){return this.parseInitializer(s),this.semicolon(),this.finishNode(s,"ClassProperty")}parseClassAccessorProperty(s){return this.parseInitializer(s),this.semicolon(),this.finishNode(s,"ClassAccessorProperty")}parseInitializer(s){this.scope.enter(J|kt),this.expressionScope.enter(ss()),this.prodParam.enter(rt),s.value=this.eat(29)?this.parseMaybeAssignAllowIn():null,this.expressionScope.exit(),this.prodParam.exit(),this.scope.exit()}parseClassId(s,t,e,i=We){if(S(this.state.type))s.id=this.parseIdentifier(),t&&this.declareNameFromIdentifier(s.id,i);else if(e||!t)s.id=null;else throw this.raise(u.MissingClassName,{at:this.state.startLoc})}parseClassSuper(s){s.superClass=this.eat(81)?this.parseExprSubscripts():null}parseExport(s,t){const e=this.maybeParseExportDefaultSpecifier(s),i=!e||this.eat(12),r=i&&this.eatExportStar(s),n=r&&this.maybeParseExportNamespaceSpecifier(s),o=i&&(!n||this.eat(12)),h=e||r;if(r&&!n){if(e&&this.unexpected(),t)throw this.raise(u.UnsupportedDecoratorExport,{at:s});return this.parseExportFrom(s,!0),this.finishNode(s,"ExportAllDeclaration")}const l=this.maybeParseExportNamedSpecifiers(s);e&&i&&!r&&!l&&this.unexpected(null,5),n&&o&&this.unexpected(null,97);let c;if(h||l){if(c=!1,t)throw this.raise(u.UnsupportedDecoratorExport,{at:s});this.parseExportFrom(s,h)}else c=this.maybeParseExportDeclaration(s);if(h||l||c){var p;const d=s;if(this.checkExport(d,!0,!1,!!d.source),((p=d.declaration)==null?void 0:p.type)==="ClassDeclaration")this.maybeTakeDecorators(t,d.declaration,d);else if(t)throw this.raise(u.UnsupportedDecoratorExport,{at:s});return this.finishNode(d,"ExportNamedDeclaration")}if(this.eat(65)){const d=s,m=this.parseExportDefaultExpression();if(d.declaration=m,m.type==="ClassDeclaration")this.maybeTakeDecorators(t,m,d);else if(t)throw this.raise(u.UnsupportedDecoratorExport,{at:s});return this.checkExport(d,!0,!0),this.finishNode(d,"ExportDefaultDeclaration")}this.unexpected(null,5)}eatExportStar(s){return this.eat(55)}maybeParseExportDefaultSpecifier(s){if(this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom");const t=this.startNode();return t.exported=this.parseIdentifier(!0),s.specifiers=[this.finishNode(t,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(s){if(this.isContextual(93)){s.specifiers||(s.specifiers=[]);const t=this.startNodeAt(this.state.lastTokStartLoc);return this.next(),t.exported=this.parseModuleExportName(),s.specifiers.push(this.finishNode(t,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(s){if(this.match(5)){s.specifiers||(s.specifiers=[]);const t=s.exportKind==="type";return s.specifiers.push(...this.parseExportSpecifiers(t)),s.source=null,s.declaration=null,this.hasPlugin("importAssertions")&&(s.assertions=[]),!0}return!1}maybeParseExportDeclaration(s){return this.shouldParseExportDeclaration()?(s.specifiers=[],s.source=null,this.hasPlugin("importAssertions")&&(s.assertions=[]),s.declaration=this.parseExportDeclaration(s),!0):!1}isAsyncFunction(){if(!this.isContextual(95))return!1;const s=this.nextTokenStart();return!fe.test(this.input.slice(this.state.pos,s))&&this.isUnparsedContextual(s,"function")}parseExportDefaultExpression(){const s=this.startNode();if(this.match(68))return this.next(),this.parseFunction(s,5);if(this.isAsyncFunction())return this.next(),this.next(),this.parseFunction(s,13);if(this.match(80))return this.parseClass(s,!0,!0);if(this.match(26))return this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(u.DecoratorBeforeExport,{at:this.state.startLoc}),this.parseClass(this.maybeTakeDecorators(this.parseDecorators(!1),this.startNode()),!0,!0);if(this.match(75)||this.match(74)||this.isLet())throw this.raise(u.UnsupportedDefaultExport,{at:this.state.startLoc});const t=this.parseMaybeAssignAllowIn();return this.semicolon(),t}parseExportDeclaration(s){return this.match(80)?this.parseClass(this.startNode(),!0,!1):this.parseStatementListItem()}isExportDefaultSpecifier(){const{type:s}=this.state;if(S(s)){if(s===95&&!this.state.containsEsc||s===99)return!1;if((s===128||s===127)&&!this.state.containsEsc){const{type:i}=this.lookahead();if(S(i)&&i!==97||i===5)return this.expectOnePlugin(["flow","typescript"]),!1}}else if(!this.match(65))return!1;const t=this.nextTokenStart(),e=this.isUnparsedContextual(t,"from");if(this.input.charCodeAt(t)===44||S(this.state.type)&&e)return!0;if(this.match(65)&&e){const i=this.input.charCodeAt(this.nextTokenStartSince(t+4));return i===34||i===39}return!1}parseExportFrom(s,t){if(this.eatContextual(97)){s.source=this.parseImportSource(),this.checkExport(s);const e=this.maybeParseImportAssertions();e&&(s.assertions=e,this.checkJSONModuleImport(s))}else t&&this.unexpected();this.semicolon()}shouldParseExportDeclaration(){const{type:s}=this.state;return s===26&&(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators"))?(this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(u.DecoratorBeforeExport,{at:this.state.startLoc}),!0):s===74||s===75||s===68||s===80||this.isLet()||this.isAsyncFunction()}checkExport(s,t,e,i){if(t){if(e){if(this.checkDuplicateExports(s,"default"),this.hasPlugin("exportDefaultFrom")){var r;const n=s.declaration;n.type==="Identifier"&&n.name==="from"&&n.end-n.start===4&&!((r=n.extra)!=null&&r.parenthesized)&&this.raise(u.ExportDefaultFromAsIdentifier,{at:n})}}else if(s.specifiers&&s.specifiers.length)for(const n of s.specifiers){const{exported:o}=n,h=o.type==="Identifier"?o.name:o.value;if(this.checkDuplicateExports(n,h),!i&&n.local){const{local:l}=n;l.type!=="Identifier"?this.raise(u.ExportBindingIsString,{at:n,localName:l.value,exportName:h}):(this.checkReservedWord(l.name,l.loc.start,!0,!1),this.scope.checkLocalExport(l))}}else if(s.declaration){if(s.declaration.type==="FunctionDeclaration"||s.declaration.type==="ClassDeclaration"){const n=s.declaration.id;if(!n)throw new Error("Assertion failure");this.checkDuplicateExports(s,n.name)}else if(s.declaration.type==="VariableDeclaration")for(const n of s.declaration.declarations)this.checkDeclaration(n.id)}}}checkDeclaration(s){if(s.type==="Identifier")this.checkDuplicateExports(s,s.name);else if(s.type==="ObjectPattern")for(const t of s.properties)this.checkDeclaration(t);else if(s.type==="ArrayPattern")for(const t of s.elements)t&&this.checkDeclaration(t);else s.type==="ObjectProperty"?this.checkDeclaration(s.value):s.type==="RestElement"?this.checkDeclaration(s.argument):s.type==="AssignmentPattern"&&this.checkDeclaration(s.left)}checkDuplicateExports(s,t){this.exportedIdentifiers.has(t)&&(t==="default"?this.raise(u.DuplicateDefaultExport,{at:s}):this.raise(u.DuplicateExport,{at:s,exportName:t})),this.exportedIdentifiers.add(t)}parseExportSpecifiers(s){const t=[];let e=!0;for(this.expect(5);!this.eat(8);){if(e)e=!1;else if(this.expect(12),this.eat(8))break;const i=this.isContextual(128),r=this.match(131),n=this.startNode();n.local=this.parseModuleExportName(),t.push(this.parseExportSpecifier(n,r,s,i))}return t}parseExportSpecifier(s,t,e,i){return this.eatContextual(93)?s.exported=this.parseModuleExportName():t?s.exported=wi(s.local):s.exported||(s.exported=U(s.local)),this.finishNode(s,"ExportSpecifier")}parseModuleExportName(){if(this.match(131)){const s=this.parseStringLiteral(this.state.value),t=s.value.match(tr);return t&&this.raise(u.ModuleExportNameHasLoneSurrogate,{at:s,surrogateCharCode:t[0].charCodeAt(0)}),s}return this.parseIdentifier(!0)}isJSONModuleImport(s){return s.assertions!=null?s.assertions.some(({key:t,value:e})=>e.value==="json"&&(t.type==="Identifier"?t.name==="type":t.value==="type")):!1}checkImportReflection(s){if(s.module){var t;(s.specifiers.length!==1||s.specifiers[0].type!=="ImportDefaultSpecifier")&&this.raise(u.ImportReflectionNotBinding,{at:s.specifiers[0].loc.start}),((t=s.assertions)==null?void 0:t.length)>0&&this.raise(u.ImportReflectionHasAssertion,{at:s.specifiers[0].loc.start})}}checkJSONModuleImport(s){if(this.isJSONModuleImport(s)&&s.type!=="ExportAllDeclaration"){const{specifiers:t}=s;if(t!=null){const e=t.find(i=>{let r;if(i.type==="ExportSpecifier"?r=i.local:i.type==="ImportSpecifier"&&(r=i.imported),r!==void 0)return r.type==="Identifier"?r.name!=="default":r.value!=="default"});e!==void 0&&this.raise(u.ImportJSONBindingNotDefault,{at:e.loc.start})}}}parseMaybeImportReflection(s){let t=!1;if(this.isContextual(125)){const e=this.lookahead(),i=e.type;S(i)?(i!==97||this.input.charCodeAt(this.nextTokenStartSince(e.end))===102)&&(t=!0):i!==12&&(t=!0)}t?(this.expectPlugin("importReflection"),this.next(),s.module=!0):this.hasPlugin("importReflection")&&(s.module=!1)}parseImport(s){if(s.specifiers=[],!this.match(131)){this.parseMaybeImportReflection(s);const i=!this.maybeParseDefaultImportSpecifier(s)||this.eat(12),r=i&&this.maybeParseStarImportSpecifier(s);i&&!r&&this.parseNamedImportSpecifiers(s),this.expectContextual(97)}s.source=this.parseImportSource();const t=this.maybeParseImportAssertions();if(t)s.assertions=t;else{const e=this.maybeParseModuleAttributes();e&&(s.attributes=e)}return this.checkImportReflection(s),this.checkJSONModuleImport(s),this.semicolon(),this.finishNode(s,"ImportDeclaration")}parseImportSource(){return this.match(131)||this.unexpected(),this.parseExprAtom()}shouldParseDefaultImport(s){return S(this.state.type)}parseImportSpecifierLocal(s,t,e){t.local=this.parseIdentifier(),s.specifiers.push(this.finishImportSpecifier(t,e))}finishImportSpecifier(s,t,e=it){return this.checkLVal(s.local,{in:{type:t},binding:e}),this.finishNode(s,t)}parseAssertEntries(){const s=[],t=new Set;do{if(this.match(8))break;const e=this.startNode(),i=this.state.value;if(t.has(i)&&this.raise(u.ModuleAttributesWithDuplicateKeys,{at:this.state.startLoc,key:i}),t.add(i),this.match(131)?e.key=this.parseStringLiteral(i):e.key=this.parseIdentifier(!0),this.expect(14),!this.match(131))throw this.raise(u.ModuleAttributeInvalidValue,{at:this.state.startLoc});e.value=this.parseStringLiteral(this.state.value),s.push(this.finishNode(e,"ImportAttribute"))}while(this.eat(12));return s}maybeParseModuleAttributes(){if(this.match(76)&&!this.hasPrecedingLineBreak())this.expectPlugin("moduleAttributes"),this.next();else return this.hasPlugin("moduleAttributes")?[]:null;const s=[],t=new Set;do{const e=this.startNode();if(e.key=this.parseIdentifier(!0),e.key.name!=="type"&&this.raise(u.ModuleAttributeDifferentFromType,{at:e.key}),t.has(e.key.name)&&this.raise(u.ModuleAttributesWithDuplicateKeys,{at:e.key,key:e.key.name}),t.add(e.key.name),this.expect(14),!this.match(131))throw this.raise(u.ModuleAttributeInvalidValue,{at:this.state.startLoc});e.value=this.parseStringLiteral(this.state.value),this.finishNode(e,"ImportAttribute"),s.push(e)}while(this.eat(12));return s}maybeParseImportAssertions(){if(this.isContextual(94)&&!this.hasPrecedingLineBreak())this.expectPlugin("importAssertions"),this.next();else return this.hasPlugin("importAssertions")?[]:null;this.eat(5);const s=this.parseAssertEntries();return this.eat(8),s}maybeParseDefaultImportSpecifier(s){return this.shouldParseDefaultImport(s)?(this.parseImportSpecifierLocal(s,this.startNode(),"ImportDefaultSpecifier"),!0):!1}maybeParseStarImportSpecifier(s){if(this.match(55)){const t=this.startNode();return this.next(),this.expectContextual(93),this.parseImportSpecifierLocal(s,t,"ImportNamespaceSpecifier"),!0}return!1}parseNamedImportSpecifiers(s){let t=!0;for(this.expect(5);!this.eat(8);){if(t)t=!1;else{if(this.eat(14))throw this.raise(u.DestructureNamedImport,{at:this.state.startLoc});if(this.expect(12),this.eat(8))break}const e=this.startNode(),i=this.match(131),r=this.isContextual(128);e.imported=this.parseModuleExportName();const n=this.parseImportSpecifier(e,i,s.importKind==="type"||s.importKind==="typeof",r,void 0);s.specifiers.push(n)}}parseImportSpecifier(s,t,e,i,r){if(this.eatContextual(93))s.local=this.parseIdentifier();else{const{imported:n}=s;if(t)throw this.raise(u.ImportBindingIsString,{at:s,importName:n.value});this.checkReservedWord(n.name,s.loc.start,!0,!0),s.local||(s.local=U(n))}return this.finishImportSpecifier(s,"ImportSpecifier",r)}isThisParam(s){return s.type==="Identifier"&&s.name==="this"}}class ls extends sr{constructor(s,t){s=us(s),super(s,t),this.options=s,this.initializeScopes(),this.plugins=ir(this.options.plugins),this.filename=s.sourceFilename}getScopeHandler(){return de}parse(){this.enterInitialScopes();const s=this.startNode(),t=this.startNode();return this.nextToken(),s.errors=null,this.parseTopLevel(s,t),s.errors=this.state.errors,s}}function ir(a){const s=new Map;for(const t of a){const[e,i]=Array.isArray(t)?t:[t,{}];s.has(e)||s.set(e,i||{})}return s}function rr(a,s){var t;if(((t=s)==null?void 0:t.sourceType)==="unambiguous"){s=Object.assign({},s);try{s.sourceType="module";const e=pt(s,a),i=e.parse();if(e.sawUnambiguousESM)return i;if(e.ambiguousScriptDifferentAst)try{return s.sourceType="script",pt(s,a).parse()}catch{}else i.program.sourceType="script";return i}catch(e){try{return s.sourceType="script",pt(s,a).parse()}catch{}throw e}}else return pt(s,a).parse()}function ar(a,s){const t=pt(s,a);return t.options.strictMode&&(t.state.strict=!0),t.getExpression()}function nr(a){const s={};for(const t of Object.keys(a))s[t]=O(a[t]);return s}const or=nr(ds);function pt(a,s){let t=ls;return a!=null&&a.plugins&&(Gi(a.plugins),t=hr(a.plugins)),new t(a,s)}const Oe={};function hr(a){const s=Yi.filter(i=>k(a,i)),t=s.join("/");let e=Oe[t];if(!e){e=ls;for(const i of s)e=hs[i](e);Oe[t]=e}return e}var lr=at.parse=rr,cr=at.parseExpression=ar,ur=at.tokTypes=or;const Pr=cs({__proto__:null,default:at,parse:lr,parseExpression:cr,tokTypes:ur},[at]);export{Pr as i,at as l};
